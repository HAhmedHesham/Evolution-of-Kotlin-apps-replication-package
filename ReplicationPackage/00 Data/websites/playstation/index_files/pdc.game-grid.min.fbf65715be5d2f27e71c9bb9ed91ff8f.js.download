/*!
 * @sie/designkit
 * @copyright     2021 Sony Interactive Entertainment LLC, all rights reserved
 */

!function(){"use strict";var e={IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches},t=({IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_JETSTREAM_MOBILE:(window.matchMedia&&matchMedia("(max-width: 699px)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_TABLET_LG:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches,IS_LAPTOP:(window.matchMedia&&matchMedia("(min-width: 1367px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1920px)")||{}).matches},function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),a=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),i=function(){function i(){t(this,i)}return a(i,[{key:"init",value:function(){var e=this,t=$('[data-component="game-grid"]');$.each(t,function(t,a){var i=$(a);i&&i.length&&(e.createCarousels(i),e.setTheme(i))}),_gpdc.Logger.log("Game grid initialized!!")}},{key:"setTheme",value:function(e){e.data("include-banner")?e.css("background",e.find('[data-component="page-banner"]').data("banner-theme")):e.data("game-grid-theme")&&e.css("background",e.data("game-grid-theme"))}},{key:"createCarousels",value:function(t){var a=new _gpdc.components.Carousel,i={accessibility:!0,cellAlign:"center",wrapAround:!0,initialIndex:0,fullscreen:!0,imagesLoaded:!0,percentPosition:!0,prevNextButtons:!1,pageDots:!1},n={};if(e.IS_MOBILE){var c=t.find(".game-grid__games");$.each(c,function(e,t){var c=$(t),o=c.children();$.each(o,function(e,t){var a=$(t);a.removeClass("carousel-cell"),e%4==0&&$('<div class="game-grid__cell carousel-cell"></div>').appendTo(c),e<=3&&a.appendTo(c.find(".game-grid__cell").get(0)),e>=4&&e<=7?a.appendTo(c.find(".game-grid__cell").get(1)):e>=8&&a.appendTo(c.find(".game-grid__cell").get(2))}),c.children().remove(".game-grid__game"),n=c,a.createCarousel(n,i).catch(function(){})})}else if(t.data("multiple-collections")){n=t.find(".game-grid__collections"),n.find(".game-grid__game").removeClass("carousel-cell");var o=t.find('.game-grid__collection[data-collection-subtitle="true"]'),d=t.find('.game-grid__collection[data-collection-btn="true"]');(o.length||d.length)&&this.setDynamicHeader(n),i.adapativeHeight=!1,i.draggable=!1,i.cellAlign="left",a.createCarousel(n,i).catch(function(){}),t.find(".carousel-cell.is-selected").attr("tabindex",0),n.siblings(".button--previous").on("click.dkGameGridPrevCollectionBtnClick",function(){n.flickity("previous")}),n.siblings(".button--next").on("click.dkGameGridNextCollectionBtnClick",function(){n.flickity("next")})}}},{key:"setDynamicHeader",value:function(e){var t=e.closest('[data-component="game-grid"]'),a=e.find(".game-grid__collection-header"),i=Math.max.apply(null,a.map(function(){return $(this).outerHeight()}).get()),n=i-t.find(".button--previous").height()/2;$.each(a,function(e,t){$(t).css("min-height",i)}),t.find(".button--previous").addClass("button--balance").css("top",n),t.find(".button--next").addClass("button--balance").css("top",n)}}]),i}(),n=function(){function e(){var a=this;t(this,e),window._gpdc&&_gpdc.user&&"undefined"!=typeof _gpdc.user.isLoggedIn?this.initModules():_gpdc.elements.$document.one("userInfoSet.dkComponents",function(){return a.initModules()})}return a(e,[{key:"initModules",value:function(){_gpdc.Logger.groupStart("Components");var e=new i;e.init(),_gpdc.Logger.groupEnd()}}]),e}();!function(e){_gpdc.elements.$document.ready(function(){_gpdc.Logger.groupStart("GameGrid");new n;_gpdc.Logger.groupEnd()})}(jQuery)}();
