/*!
 * @sie/designkit
 *
 * @version       1.0.6 - Fri, 24 Sep 2021 19:11:49 GMT (release-sept_27--hotfix)
 * @license       UNLICENSED
 * @copyright     2021 Sony Interactive Entertainment LLC, all rights reserved
 */

!function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),i=function(){function i(){e(this,i),this.$els={win:_gpdc.elements.$window,htmlBody:$("html, body"),dkNav:$("#sony-bar.dk-nav__wrapper"),nav:$("#shared-nav-root #shared-nav-container"),tertiary:$("#jetstream-tertiary-nav .tertiary-container")},this.EVENT_CHANGE="hashchange.dkHashAnchor",this.EVENT_LOAD="load.dkHashAnchor",this.EVENT_CLICK="click.dkHashAnchor"}return t(i,[{key:"bind",value:function(){this.onHashChange=this.onHashChange.bind(this),this.onHashAnchorClick=this.onHashAnchorClick.bind(this)}},{key:"init",value:function(){var e=this;this.$els.win.on(this.EVENT_CHANGE,this.onHashChange),"complete"===document.readyState?this.$els.win.trigger(this.EVENT_CHANGE):this.$els.win.on(this.EVENT_LOAD,function(){return e.$els.win.trigger(e.EVENT_CHANGE)});var t='a[href^="#"]';$("#gdk__content "+t).on(this.EVENT_CLICK,this.onHashAnchorClick),this.$els.tertiary.on(this.EVENT_CLICK,t,this.onHashAnchorClick),_gpdc.Logger.log("Hash Anchor Plugin initialized!!")}},{key:"onHashAnchorClick",value:function(e){var t=$(e.currentTarget).attr("href")||"";location.href.includes(t)&&t.length>1&&this.scrollToElementByHash(t)}},{key:"onHashChange",value:function(e){var t=window.location.hash;if(t)return t.includes("?")?void this.sanitizeHashUrl(t):void this.scrollToElementByHash(t)}},{key:"scrollToElementByHash",value:function(e){var t=$(e+', [name="'+e.substring(1)+'"]').first();if(t.length){var i=t.offset().top;location.href.includes(e)&&this.$els.htmlBody.scrollTop(i),this.$els.htmlBody.animate({scrollTop:i-this.calculateNavigationOffset()})}}},{key:"calculateNavigationOffset",value:function(){var e=0;return this.$els.dkNav.length&&(e+=this.$els.dkNav.outerHeight()),this.$els.nav.length&&(e+=this.$els.nav.outerHeight()),this.$els.tertiary.length&&(e+=this.$els.tertiary.outerHeight()),e}},{key:"sanitizeHashUrl",value:function(e){var t=e.split("?");if(t){var i=""+location.origin+location.pathname;window.location.replace(i+"?"+(t[1]||"")+(t[0]||""))}}}]),i}(),a={LABELS:{EU_COOKIE:"eucookiepreference",PREFERENCE_ACCEPT:"accept",PREFERENCE_REJECT:"reject"},DOMAIN:".playstation.com",COOKIE_AGE:3650,UH:"userinfo",ORACLE:{e1:"isSignedIn_e",np:"isSignedIn",mgmt:"isSignedIn_m"},PLUS:"p"},n={PROD:/(www|wwwglobal|author)\.playstation\.com/i,STAGE:/(author\.stage|stage)\.playstation\.com/i,PREVIEW:/preview\.www\.playstation\.com/i,WWWGLOBAL:/wwwglobal\.playstation\.com/i},o={navFooter:"navFooter",userState:"userState",gpdcUser:"gpdcUser"},s={IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches},r={IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_JETSTREAM_MOBILE:(window.matchMedia&&matchMedia("(max-width: 699px)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_TABLET_LG:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches,IS_LAPTOP:(window.matchMedia&&matchMedia("(min-width: 1367px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1920px)")||{}).matches},l={EMPTY_LABEL:"empty"},d=function(){function i(){e(this,i),this.init()}return t(i,[{key:"getRootMargin",value:function(){var e={mobile:30,desktop:20,default:200},t=s.IS_MOBILE?e.mobile:null,i=s.IS_DESKTOP?e.mobile:e.desktop,a=Math.round(window.innerHeight*(t||i)/100)||e.default;return(isNaN(a)||a<e.default?e.default:a)+"px"}},{key:"init",value:function(){if(window.lozad){var e=lozad(".lozad",{rootMargin:this.getRootMargin(),threshold:0,loaded:function(e){e.classList.add("lazy-loaded")}});e.observe(),_gpdc.components.lozad={_observer:e}}_gpdc.Logger.log("Lozad class initialized!!")}}]),i}(),c=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".playstation.com";if(t){var n=new Date;n.setTime(n.getTime()+60*i*1e3),document.cookie=e+"="+encodeURIComponent(t)+"; expires="+n.toUTCString()+";path=/; domain="+a+";secure"}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return t?decodeURIComponent(t[2]):null},h=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t},g={INPUTS_RESERVED_KEY_CODES:[8,9,16,37,38,39,40],INLINE_VIDEO_WAIT:500,DTM_IGNORE_EVENT:"ignore-dtm-click-event",COMPONENT_INSTANCE_ID_ATTR:"uuid"},p={EMBED_URL:"https://www.youtube.com/embed/"},f={endpoint:_gpdc.elements.$body.data("wc-api"),arkhamAPIHost:_gpdc.elements.$body.data("arkham-api"),arkhamAPIPath:"/api/session/v1/signin?redirect_uri=CURRENT_PAGE_URL&flow=web:walletAdmin",loadingClass:"loading",loadedAction:"checkout_app_visible",loginAction:"checkout_signin_required",pswrdVerifAction:"checkout_password_verification_required",closeActions:["checkout_cart_cancel","checkout_continue_shopping","checkout_error_dismiss","checkout_thankyou_dismiss"]},v={btnBlock:".btn-block",btnBlockGated:".btn-block [data-age-gated]",btnBlockGatedForce:".btn-block [data-force-age-gate]",btnLinkSelector:'.btn-block [class^="cta__"]:not(.cta__inner), .btn-block .text-link',btnVideoSelector:".btn-block [data-video-dam], .btn-block [data-video-youtube]",btnAgeGateSelector:".btn-block .age-gate__input-btn",oldStoreUrl:"store.sonyentertainmentnetwork",newStoreUrl:"store.playstation",pdcDirectUrl:"direct.playstation",consoleUrlPrefix:{product:"psns:browse?product=",category:"psns:browse?category="}},m={pictureTag:{lower:'<source srcset="IMG_SRC_DESKTOP?$400pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$200pxMOBILE_TRANSPARENT" media="(min-width: 320px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">',main:'<source srcset="IMG_SRC_DESKTOP?$1600pxDESKTOP_TRANSPARENT" media="(min-width: 1024px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1200pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$800pxMOBILE_TRANSPARENT" media="(min-width: 320px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">',fullscreen:'<source srcset="IMG_SRC_DESKTOP?$4000pxDESKTOP_TRANSPARENT" media="(min-width: 3000px)">\n                    <source srcset="IMG_SRC_DESKTOP?$2400pxDESKTOP_TRANSPARENT" media="(min-width: 1367px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1600pxDESKTOP_TRANSPARENT" media="(min-width: 1024px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1200pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$800pxMOBILE_TRANSPARENT" media="(min-width: 320px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">'}},k={COOKIE_NAME:"gpdc_gated",TYPE_TEMPLATE_ID_MAP:{SIGN_IN:"#age-gate__user-sign-in-required",DOB:"#age-gate__user-input-required",SHALL_NOT_PASS:"#age-gate__user-shall-not-pass"},CONTENT:"#gdk__content .cmp-container",FIELDS:{y:".year",m:".month",d:".day"}},_=function(){function a(){e(this,a),this.hashAnchor=new i}return t(a,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.COMPONENT_INSTANCE_ID_ATTR,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&(sessionStorage.setItem(o.userState,JSON.stringify({idAttr:t,value:e,cellIndex:i})),_gpdc.Logger.log("User State has been saved in sessionStorage for element with id: "+e))}},{key:"clear",value:function(){sessionStorage.removeItem(o.userState)}},{key:"retrieve",value:function(){var e=this,t=sessionStorage.getItem(o.userState);if(t){var i=h(t)||{},a=i.idAttr,n=i.value,s=i.cellIndex,r=void 0===s?null:s;if(sessionStorage.removeItem(o.userState),_gpdc.user&&_gpdc.user.isLoggedIn&&a&&n){var l=$("[data-"+a+'="'+n+'"]');l.length&&(l.data(g.DTM_IGNORE_EVENT,!0),setTimeout(function(){e.hashAnchor.$els.htmlBody.animate({scrollTop:l.offset().top-e.hashAnchor.calculateNavigationOffset()},0),r>=0&&l.data("carousel")?e.selectCarouselElement(l,r):l.data("pxp-action")?e.handleExpWidgetReopen(l):l.get(0).click()},200))}}}},{key:"selectCarouselElement",value:function(e,t){if("image-gallery"===e.data("component")){var i=e.find('[data-component="image-block"]:eq('+t+")").get(0);return void(i&&i.click())}var a=(e.data("flickity")||{}).cells,n=a&&a[t]?$(a[t].element):null;n.length&&(e.find(".carousel-cell.is-selected").removeClass("is-selected"),n.addClass("is-selected").trigger($.Event("keydown",{key:"Enter",keyCode:13,preventDefault:function(){}})))}},{key:"handleExpWidgetReopen",value:function(e){window.PSEXP&&PSEXP.isClickReady?e.get(0).click():document.addEventListener("psexp-click-ready",function(t){return e.get(0).click()},!1)}}]),a}(),b="no-scroll",y="curtain",C="curtain__blur",E=function(e,t){var i="addClass"===e?"on":"off";$("html, body")[e](b),t[i]("touchmove.dkUtilsLockScreen",function(e){return e.preventDefault(),e.stopPropagation(),!1})},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dark";!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise(function(a,n){var o=$("."+y),s=[i,"opacity--"+t];o.length||(o=$('<div class="'+y+'" />'),$("#gdk__content").append(o)),o[0].$wrapper||(o[0].$wrapper=$(".cmp-container")),e?(o.removeClass("display--hidden"),setTimeout(function(){o.addClass(s)},10),setTimeout(function(){o[0].$wrapper.addClass(C)},250)):(o[0].$wrapper.removeClass(C),o.removeClass(s),setTimeout(function(){o.attr("class",y+" display--hidden")},250)),E(e?"addClass":"removeClass",o),a()})},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#gdk__content",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(a,n){var o=($(e).html()||"").trim();if(o){if(i){var s=$($.parseHTML(o)).addClass(e.replace(/^#+/,""));$(t).append(s)}else $(t).append($.parseHTML(o));a("success")}else n("failure")})},A=function(e){var t=$(e);t.length&&t.html("")},I=function(e){if(!e||"false"===e)return null;if(e.startsWith("#"))return e;var t=/^rgba\(/.test(e);e=e.substring(t?5:4).split(")")[0].split(e.indexOf(",")>-1?",":" ");var i=(+e[0]).toString(16),a=(+e[1]).toString(16),n=(+e[2]).toString(16);if(i=1==i.length?"0"+i:i,a=1==a.length?"0"+a:a,n=1==n.length?"0"+n:n,!t)return"#"+i+a+n;var o=Math.round(255*+e[3]).toString(16);return o=1==o.length?"0"+o:o,"#"+i+a+n+o},L=function(e){var t=e.length>7;return(t?e.substring(0,7):e)+"00"},x=function(e,t,i,a,n,o){var s=e.data(t)||"";if(s){var r={};s=I(s),a&&(r={"--gradient-start-color":s,"--gradient-end-color":L(s)}),n&&(r["--gradient-start-color-tablet"]=s,r["--gradient-end-color-tablet"]=L(s)),o&&(r["--gradient-start-color-desktop"]=s,r["--gradient-end-color-desktop"]=L(s)),i&&(r[i]=s),e.css(r)}},S=function(){function i(){e(this,i);var t=new Date;this.IGNORE_RATING_CLASS="ignore-rating",this.userState=new _,this.isMatureRatedPage=_gpdc.elements.$body.data("rated-mature"),this.ageGateType=_gpdc.elements.$body.data("age-gate-type"),this.ageThreshold=parseInt(_gpdc.elements.$body.data("age-threshold")||"17",10),this.cookieTimeout=parseInt(_gpdc.elements.$body.data("cookie-timeout")||"120",10),this.isAutoTriggered=_gpdc.elements.$body.data("auto-trigger-gated-page"),this.$ageGate=null,this.$allInputFields=null,this.$dayInput=null,this.$yearInput=null,this.$monthInput=null,this.$submitBtn=null,this.lastElementTabIndex=2,this.$triggerElement=null,this.formValidations={year:{regx:/^\d{4}$/,min:1869,max:t.getFullYear()},month:{regx:/^\d{1,2}$/,min:1,max:12,currentMonth:t.getMonth()+1},day:{regx:/^\d{1,2}$/,min:1,max:31,currentDay:t.getDate()}}}return t(i,[{key:"checkAgeGateStatus",value:function(e){("success"===u(k.COOKIE_NAME)||_gpdc.user&&_gpdc.user.isLoggedIn&&_gpdc.user.isMature)&&this.setAgeGateSuccess(e)}},{key:"setAgeGateSuccess",value:function(e){var t='[data-component="image-block"][data-age-gated]:not([data-lightbox="true"])';this.isAutoTriggered&&_gpdc.elements.$body.attr("data-auto-trigger-gated-page",!1),this.isMatureRatedPage&&(_gpdc.elements.$body.addClass(this.IGNORE_RATING_CLASS),_gpdc.elements.$body.attr("data-rated-mature",!1).data("rated-mature",!1)),$('[data-age-gated="true"]').attr("data-age-gated",!1).data("age-gated",!1),$('[data-force-age-gate="true"]').attr("data-force-age-gate",!1).data("force-age-gate",!1),$(t+'[href="javascript:void(0);"]').attr("tabindex",-1),e||this.userState.clear()}},{key:"updateSignInLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".age-gate",t=$(e+' [data-sign-in-link="true"]');t.length&&t.on("click.dkSignIn",window._gpdc.config.doSignIn)}},{key:"logAgeGateDtmEvent",value:function(e,t,i,a){_gpdc.analytics.event.addGDLEvent("click",t,{moduleName:"age-gate",elementType:a,assetName:l.EMPTY_LABEL,linkUrl:l.EMPTY_LABEL,label:i,userActionFlag:!1,position:1},e)}},{key:"toggleSubmitBtnState",value:function(e){e?(this.$submitBtn.attr("aria-disabled","true"),this.$submitBtn.addClass("cta__disabled")):(this.$submitBtn.attr("aria-disabled","false"),this.$submitBtn.removeClass("cta__disabled"))}},{key:"getUsersAgeInYears",value:function(e,t,i){var a=new Date,n=new Date(e,t,i),o=a.getMonth()-n.getMonth(),s=a.getFullYear()-n.getFullYear();return(o<0||0===o&&a.getDate()<n.getDate())&&s--,s}},{key:"toggleFormValidityState",value:function(){var e=$(".age-gate__error-notice"),t=[this.$dayInput.attr("aria-invalid"),this.$monthInput.attr("aria-invalid"),this.$yearInput.attr("aria-invalid")];t.includes("true")?(this.toggleSubmitBtnState(!0),e.removeClass("visibility--hidden")):(this.toggleSubmitBtnState(!1),e.addClass("visibility--hidden")),this.$dayInput.val()&&this.$monthInput.val()&&this.$yearInput.val()||this.toggleSubmitBtnState(!0)}},{key:"validateInputField",value:function(e,t,i){var a=this.formValidations[t],n=!0,o=void 0,s=void 0,r=void 0,l=void 0,d=void 0,c=void 0;if(n=""===i||a.regx.test(i)&&i>=a.min&&i<=a.max,"year"!==t&&(o=parseInt(this.$yearInput.val()||"0",10),s=parseInt(this.$monthInput.val()||"0",10),l=o===this.formValidations.year.max,r="true"==this.$yearInput.attr("aria-invalid"),d="true"==this.$monthInput.attr("aria-invalid")),!n)return n;if("month"!==t||r||(n=l?i<=a.currentMonth:n),"day"===t&&!r&&!d){var u=s===this.formValidations.month.currentMonth;c=new Date(o,s,0).getDate(),c=l&&u?a.currentDay:c,n=!i||i<=c}return n}},{key:"ageGateClose",value:function(e,t,i){var a=this;w(!1).then(function(n){a.$ageGate.addClass("display--hidden"),"DOB"===a.ageGateType&&($.each(a.$ageGate.find(".age-gate__input-field"),function(e,t){var i=$(t);i.val("").removeClass("dirty").attr("aria-invalid",!1),i.closest("label").removeClass("hasError")}),a.$ageGate.find(".age-gate__error-notice").addClass("visibility--hidden"),a.$submitBtn.off("click.psAgeGate")),e.off(t),a.ageGateAccessibilityUtils("off"),null!==i&&i()})}},{key:"defineAgeGateEscape",value:function(e){var t=this,i=this.$ageGate.find(".text-link"),a=this.$ageGate.find(".age-gate__close");if(this.isAutoTriggered){i.removeClass("display--hidden"),a.remove();var n=!1;try{var o=new URL(document.referrer);n=o.origin===location.origin}catch(e){n=(document.referrer||"").startsWith(location.origin)}return void(n&&i.on("click.psAgeGateBack",function(e){e.preventDefault(),i.attr("href",document.referrer),window.history.back(-1)}))}i.remove(),a.removeClass("display--hidden"),a.on("click.psAgeGate",function(i){return t.ageGateClose(a,"click.psAgeGate",e)}),_gpdc.elements.$document.on("keyup.psAgeGate",function(i){"Escape"!==i.key&&"Esc"!==i.key&&27!==i.keyCode||(i.stopPropagation(),t.ageGateClose(_gpdc.elements.$document,"keyup.psAgeGate",e))})}},{key:"showAccessDenied",value:function(){var e=this;this.isAutoTriggered&&A(k.CONTENT),w(!0).then(function(t){e.$ageGate&&e.$ageGate.length?(e.defineAgeGateEscape(null),e.$ageGate.removeClass("display--hidden")):T(k.TYPE_TEMPLATE_ID_MAP.SHALL_NOT_PASS).then(function(t){e.$ageGate=$("#user-shall-not-pass"),e.applyTabOrder("ACCESS_DENIED"),e.defineAgeGateEscape(null)}).catch(function(){return _gpdc.Logger.warn("Unable to find Age Gate Shall Not Pass HTML Template!!")})}).then(function(t){e.ageGateAccessibilityUtils("on")})}},{key:"attachInputFieldEventHandler",value:function(e,t){var i=this;e.on("keyup.psAgeGate blur.psAgeGate",function(a){var n=a.which||a.keyCode,o=e.val(),s=o.length,r=parseInt(e.attr("minlength")),l=parseInt(e.attr("maxlength")),d=e.attr("name"),c=0,u=!1,h=void 0;e.addClass("dirty"),(s>=r||"blur"==a.type||!o&&e.hasClass("dirty"))&&(c=parseInt(o.substring(0,l),10),c=isNaN(c)?"":c,e.val(c),u=i.validateInputField(e,d,c),e.attr("aria-invalid",!u),e.closest("label")[(u?"remove":"add")+"Class"]("hasError"),"day"!=d&&i.$dayInput.hasClass("dirty")&&(h=i.validateInputField(i.$dayInput,"day",i.$dayInput.val()),i.$dayInput.attr("aria-invalid",!h),i.$dayInput.closest("label")[(h?"remove":"add")+"Class"]("hasError")),u&&o&&s>=l&&n&&g.INPUTS_RESERVED_KEY_CODES.indexOf(n)===-1&&t.focus()),o||e.removeClass("dirty"),i.toggleFormValidityState()})}},{key:"attachSubmitBtnLogic",value:function(){var e=this;return new Promise(function(t,i){e.$submitBtn.on("click.psAgeGate",function(a){if(a.preventDefault(),a.stopPropagation(),!e.$submitBtn.hasClass("cta__disabled")){var n=e.$dayInput.val(),o=e.$yearInput.val(),s=e.$monthInput.val();s=parseInt(s||"1",10)-1,e.getUsersAgeInYears(o,s,n)<e.ageThreshold?w(!0).then(function(t){e.$ageGate.remove(),e.$ageGate=null,c(k.COOKIE_NAME,"failure",e.cookieTimeout),e.showAccessDenied(),e.logAgeGateDtmEvent(e.$submitBtn,"submit age-gate too-young","sumbit","button"),i()}):e.isAutoTriggered?(c(k.COOKIE_NAME,"success",e.cookieTimeout),e.logAgeGateDtmEvent(e.$submitBtn,"submit age-gate","submit","button"),setTimeout(function(){return window.location.reload()},350)):w(!1).then(function(i){e.$ageGate.addClass("display--hidden"),c(k.COOKIE_NAME,"success",e.cookieTimeout),e.logAgeGateDtmEvent(e.$submitBtn,"submit age-gate","submit","button"),e.$ageGate.remove(),t()})}})})}},{key:"applyTabOrder",value:function(e){var t=this;switch(e){case"SIGN_IN":this.lastElementTabIndex=2,this.$ageGate.find('[data-sign-in-link="true"]').attr("tabindex",this.lastElementTabIndex);break;case"ACCESS_DENIED":this.lastElementTabIndex=2,this.$ageGate.find(".text-block a").attr("tabindex",this.lastElementTabIndex);break;case"DOB":var i=(_gpdc.elements.$body.data("date-format")||"YYYY/MM/DD").toLowerCase().split(/\/|\-|\:|\.|\,/);i.forEach(function(e,i){var a=k.FIELDS[e.substring(0,1)],n=i+1;t.$ageGate.find(a).addClass("order--"+n),t.$ageGate.find(a+" input").attr("tabindex",n+1),t.lastElementTabIndex++}),this.$submitBtn.attr("tabindex",this.lastElementTabIndex),this.lastElementTabIndex++,this.$ageGate.find('[data-sign-in-link="true"]').attr("tabindex",this.lastElementTabIndex)}}},{key:"handleCustomFocus",value:function(e,t,i){16===e.keyCode||"Tab"!==e.key&&9!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.$ageGate.find('[tabindex="'+(e.shiftKey?t:i)+'"]').focus())}},{key:"ageGateAccessibilityUtils",value:function(e){var t=this;"on"===e?this.$ageGate.find('[tabindex="2"]').focus():this.$triggerElement&&this.$triggerElement.focus(),this.$ageGate.find('[tabindex="'+this.lastElementTabIndex+'"]')[e]("keydown.dkAgeGate",function(e){t.handleCustomFocus(e,t.lastElementTabIndex-1,1)}),this.$ageGate.find('[tabindex="1"]')[e]("keydown.dkAgeGate",function(e){t.handleCustomFocus(e,t.lastElementTabIndex,2)})}},{key:"defineDOBAgeGateFields",value:function(e,t){var i=this;this.$dayInput=this.$ageGate.find("#age-gate-day"),this.$monthInput=this.$ageGate.find("#age-gate-month"),this.$yearInput=this.$ageGate.find("#age-gate-year"),this.$submitBtn=this.$ageGate.find(".age-gate__input-btn"),this.$allInputFields=this.$ageGate.find(".age-gate__input-field"),this.applyTabOrder(this.ageGateType),this.$allInputFields.each(function(e,t){var a=$(t),n=a.get(0).tabIndex+1,o=i.$ageGate.find('[tabindex="'+n+'"]');i.attachInputFieldEventHandler(a,o)}),this.attachSubmitBtnLogic().then(function(t){return e()}).catch(function(){return t()})}},{key:"showAgeGate",value:function(){var e=this;return this.$ageGate=$(".age-gate"),new Promise(function(t,i){e.$ageGate&&e.$ageGate.length?("DOB"===e.ageGateType&&e.defineDOBAgeGateFields(t,i),e.defineAgeGateEscape(i),w(!0).then(function(t){e.$ageGate.removeClass("display--hidden"),e.logAgeGateDtmEvent(e.$ageGate,"open age-gate",l.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")})):T(k.TYPE_TEMPLATE_ID_MAP[e.ageGateType]).then(function(a){e.$ageGate=$(".age-gate"),e.updateSignInLink(),e.defineAgeGateEscape(i),"DOB"===e.ageGateType?w(!0).then(function(a){e.defineDOBAgeGateFields(t,i)}).then(function(t){e.logAgeGateDtmEvent(e.$ageGate,"open age-gate",l.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")}):(w(!0).then(function(t){e.applyTabOrder(e.ageGateType),e.logAgeGateDtmEvent(e.$ageGate,"open age-gate",l.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")}),i())}).catch(function(e){_gpdc.Logger.warn("Unable to find Age Gate HTML Template!!",e)})})}},{key:"isGated",value:function(e){var t=e.data(),i=t.ageGated,a=void 0!==i&&i,n=t.forceAgeGate,o=void 0!==n&&n;return a===!0||o===!0}},{key:"triggerIfNeeded",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.isGated(e)?(this.userState.save(e.data(g.COMPONENT_INSTANCE_ID_ATTR)),this.triggerAgeGate(e)):Promise.resolve()}},{key:"triggerAgeGate",value:function(e){var t=this,i=u(k.COOKIE_NAME);return this.$triggerElement=e,new Promise(function(e,a){"success"===i?(t.setAgeGateSuccess(),e()):"failure"===i?(c(k.COOKIE_NAME,"failure",t.cookieTimeout),t.showAccessDenied(),a()):_gpdc.user&&_gpdc.user.isLoggedIn&&_gpdc.user.isMature?(t.setAgeGateSuccess(),c(k.COOKIE_NAME,"success",t.cookieTimeout),e()):_gpdc.user&&_gpdc.user.isLoggedIn&&!_gpdc.user.isMature?(c(k.COOKIE_NAME,"failure",t.cookieTimeout),t.showAccessDenied(),t.userState.clear(),a()):(t.isAutoTriggered&&A(k.CONTENT),t.showAgeGate().then(function(i){t.setAgeGateSuccess(),e()}).catch(function(e){a()}))})}},{key:"init",value:function(){var e=this;this.isMatureRatedPage&&(_gpdc.user&&_gpdc.user.isLoggedIn&&!_gpdc.user.isMature?this.isAutoTriggered=!0:_gpdc.elements.$body.addClass(this.IGNORE_RATING_CLASS)),this.isAutoTriggered?this.triggerAgeGate(null).catch(function(e){}):this.checkAgeGateStatus(!0);var t=$("[data-trigger-gated-elm]");return!(!t||!t.length)&&void t.each(function(t,i){var a=$(i);a.on("click.psAgeGate",function(){e.triggerAgeGate(a).then(function(e){a.trigger("success.psAgeGate.attr")}).catch(function(e){})})})}}]),i}(),P=function(){function i(){e(this,i)}return t(i,[{key:"setUpVideoPlayers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={controls:!0,controlBar:{pictureInPictureToggle:!1,volumePanel:!0,currentTimeDisplay:!0,durationDisplay:!0,remainingTimeDisplay:!1,timeTooltip:!1},autoplay:!1,preload:"auto",fluid:!0,fill:!0};$.each(t,function(t,i){var n=$(i).closest(".media-block--video"),o=videojs(i,a);o.on("ready",function(){var t=parseInt(n.attr("tabindex")||"0",10)+1;e.setUpCustomButtons(n,t,o)})}),1===t.length&&i&&t.focus()}},{key:"addCustomListeners",value:function(e,t,i,a){e.on("keyup.dkVideoBlock",function(e){var t=e.key,i=e.keyCode;if("Enter"==t||"Space"==t||13==i||32==i){var n=$(document.activeElement);n.is("video")||n.hasClass("media-block--video")||n.hasClass("vjs-volume-bar")?a.paused()?a.play():a.pause():n.hasClass("pause-video")&&setTimeout(function(){return n.prev().focus()},30)}}),e.on("keydown.dkVideoBlock",function(i){16===i.keyCode||"Tab"!==i.key&&9!==i.keyCode||(i.preventDefault(),i.stopPropagation(),!i.shiftKey&&$(i.target).hasClass("media-block--video")?e.find('[tabindex="'+t+'"]:visible').eq(0).focus():i.shiftKey&&t>2&&e.closest(".media-lightbox").find('[tabindex="'+(t-2)+'"]').focus())}),e.find('[tabindex="'+i+'"]').on("keydown.dkVideoBlock",function(a){if(16!==a.keyCode&&("Tab"===a.key||9===a.keyCode))if(a.preventDefault(),a.stopPropagation(),a.shiftKey)e.find('[tabindex="'+(i-1)+'"]').focus();else{var n=e.closest(".media-lightbox").find('[tabindex="'+(t+6)+'"]');n.length?n.focus():function(){}}})}},{key:"setUpCustomButtons",value:function(e,t,i){var a=void 0,n=void 0,o=void 0,s=void 0,r=void 0,l=void 0,d=$("#custom-btn-template"),c=d.prop("content"),u=$(c).find("svg"),h=t+5;e.find(".vjs-big-play-button").attr("tabindex",t),e.find(".vjs-mute-control").attr("tabindex",t+2),e.find(".vjs-volume-bar").attr("tabindex",t+3),e.find(".vjs-progress-holder").attr("tabindex",t+4);var g=e.find(".vjs-control-bar .vjs-play-control");$.each(u,function(e,d){var c=i.controlBar.addChild("button"),u=$(d).attr("data-btn-id"),p=c.el(),f=$(p);switch(f.append(document.importNode(d,!0)),u){case"play-video":a=f.attr("tabindex",t),f.addClass("play-video"),f.insertBefore(g);break;case"pause-video":n=f.attr("tabindex",t),f.addClass("pause-video"),f.insertBefore(g);break;case"replay-video":o=f.attr("tabindex",t),f.addClass("replay-video"),f.insertAfter(g);break;case"back-to-start":s=f,f.addClass("back-to-start").attr("tabindex",t+1),f.insertAfter(g);break;case"full-screen":r=f.attr("tabindex",h),f.addClass("full-screen-control");break;case"close-full-screen":l=f.attr("tabindex",h),f.addClass("close-full-screen-control")}}),i.on("play",function(){$(".vjs-big-play-button").hide(),a.hide(),o.hide(),s.show(),n.show().focus()}),i.on("pause",function(){n.hide(),a.show().focus()}),i.on("ended",function(){a.hide(),s.hide(),o.show().focus()}),i.on("fullscreenchange",function(){setTimeout(function(){i.hasClass("vjs-fullscreen")?$(i.el_).find('[tabindex="'+t+'"]').focus():(l.hide(),r.show().focus())},50)}),a.on("click.dkPlayVideo touchend.dkPlayVideo",function(){a.hide(),n.show(),i.play()}),n.on("click.dkPauseVideo touchend.dkPauseVideo",function(){n.hide(),a.show(),i.pause()}),o.on("click.dkReplayVideo touchend.dkReplayVideo",function(){o.hide(),s.show(),n.show(),i.play()}),s.on("click.dkBackToStart touchend.dkBackToStart",function(){i.currentTime(0)}),r.on("click.dkFullScreen touchend.dkFullScreen",function(){r.hide(),l.show(),i.requestFullscreen()}),l.on("click.dkCloseFullScreen touchend.dkCloseFullScreen",function(){l.hide(),r.show(),i.exitFullscreen()}),this.addCustomListeners(e,t,h,i)}}]),i}(),M=function(){function i(){e(this,i),this.ageGate=new S}return t(i,[{key:"processEmbedVideo",value:function(e,t,i){var a=$.trim(e.attr("data-playlist")||""),n=""+p.EMBED_URL+i+"?controls=1&enablejsapi=1";a||"true"!==e.attr("data-loop")?a&&(n+="&loop=1&listType=playlist&list="+a):n+="&loop=1&playlist="+i,"true"===e.attr("data-autoplay")&&(n+="&autoplay=1&rel=0",t.attr("allow","autoplay; encrypted-media"));var o=e.attr("data-yt-captions");o&&(n+="&cc_lang_pref="+o+"&cc_load_policy=1");var s=window.location.origin;n+="&origin="+s+"&widget_referrer="+s;var r="yt-video-"+i;t.attr("src",n),t.attr("id",r);try{var l=new YT.Player(r);t.data("player",l)}catch(e){_gpdc.Logger.warn("YouTube API error",e)}}},{key:"setupEmbeddedVideos",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-embed-video="true"]',i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t instanceof jQuery?t:$(t);a&&a.length&&a.each(function(t,a){var n=$(a),o=n.find("iframe"),s=n.attr("data-video-id");i?e.processEmbedVideo(n,o,s):(o.hide(),e.ageGate.triggerIfNeeded(n).then(function(){o.show(),e.processEmbedVideo(n,o,s)}).catch(function(){_gpdc.Logger.log("Age gate failed on YT Embed Video Block.")}))})}},{key:"loadYoutubeApi",value:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},{key:"init",value:function(){this.loadYoutubeApi(),this.setupEmbeddedVideos('[data-embed-video="true"]',!1),_gpdc.Logger.log("YT Embed Video initialized!!")}}]),i}(),B=6,N=void 0,G=1,O=function(){function i(){e(this,i),this.videoPlayer=new P,this.ytEmbedVideo=new M,this.carousel=new D,_gpdc.Logger.log("MediaLightbox instantiated!!")}return t(i,[{key:"openMediaLightbox",value:function(e,t,i,a){var n=this,o=$(".media-lightbox__main");return N=t,N.data("dk-media-lightbox")===!0?Promise.reject():(N.data("dk-media-lightbox",!0),new Promise(function(s,r){o.length?n.displayMediaLightbox(a,!1,e).then(function(a){n.chooseLightboxType(e,t,i,o),s(a)},function(e){return r(err)}):T("#media-lightbox__template").then(function(l){o=$(".media-lightbox__main"),n.displayMediaLightbox(a,!0,e).then(function(a){n.chooseLightboxType(e,t,i,o),s(a)},function(e){return r(err)})}).catch(function(e){r(e),_gpdc.Logger.warn("Unable to find Media LightBox HTML Template!!")})}))}},{key:"chooseLightboxType",value:function(e,t,i,a){var n=$(".media-lightbox"),o=$(".media-lightbox__lower");if(G=1,"carousel"===e)a.addClass("carousel"),this.createLightboxCarousels(i);else{var s=t.data("component");n.addClass("no-carousel"),o.addClass("no-carousel-lower"),"video-block"===s||"live-image"===s?this.cloneMediaBlockIntoLightbox("video",t,a,"main"):"image-block"===s&&(this.cloneMediaBlockIntoLightbox("image",t,a,"main"),this.fullscreenLightboxMedia())}}},{key:"displayMediaLightbox",value:function(e,t,i){var a=this,n=$(".media-lightbox"),o=$(".media-lightbox__main"),s=$(".media-lightbox__lower");return new Promise(function(r,l){w(!0).then(function(l){n.addClass("show reveal "+e),o.addClass("reveal"),setTimeout(function(){s.addClass("reveal"),a.lightboxAccessibilityUtils("on",i)},250),t&&(n.on("click.dkMediaLightbox",function(e){return a.closeMediaLightbox(e)}),_gpdc.elements.$document.on("keyup.dkMediaLightboxImage",function(e){"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(e.stopPropagation(),a.closeMediaLightbox(e))}),o.on("click",function(e){return e.stopPropagation()}),a.carousel.addAnalyticsEventHandlers(o)),r(l)},function(e){return l(e)})})}},{key:"closeMediaLightbox",value:function(e){var t=$(".media-lightbox"),i=$(".media-lightbox__main"),a=$(".media-lightbox__fullscreen-image"),n=$(".media-lightbox__lower");return i.hasClass("fullscreen")?void this.exitFullScreenMode(e):(n.hasClass("flickity-enabled")&&(this.carousel.destroyCarousel(n),n.empty()),i.hasClass("flickity-enabled")&&(i.removeClass("carousel"),this.carousel.destroyCarousel(i)),t.removeClass("reveal no-carousel"),i.removeClass("reveal"),n.removeClass("reveal no-carousel-lower"),a.removeClass("reveal"),this.lightboxAccessibilityUtils("off"),void w(!1).then(function(){setTimeout(function(){t.removeClass("show light dark"),n.removeClass("fullscreen"),i.removeClass("fullscreen").empty(),a.removeClass("show").empty()},250)}))}},{key:"createLightboxCarousels",value:function(e){var t=this,i=$(".media-lightbox__main"),a=$(".media-lightbox__lower"),n=e.find(".carousel-cell, .media-carousel__cell"),o=e.data("carousel-cell-index");$.each(n,function(e,n){var s=$(n);s=s.hasClass("media-block")?s:s.find(".media-block");var r=s.data("component");switch(r){case"image-block":t.cloneMediaBlockIntoLightbox("image",s,i,"main",!0,e),
t.cloneMediaBlockIntoLightbox("image",s,a,"lower",!0,e);break;case"video-block":case"live-image":t.cloneMediaBlockIntoLightbox("video",s,i,"main",!0,e),t.cloneMediaBlockIntoLightbox("image",s,a,"lower",!0,e);break;default:e<o?o--:e===o&&(o=0)}}),this.carousel.createCarousel(i,{accessibility:!0,cellAlign:"center",contain:!1,prevNextButtons:!0,pageDots:!1,percentPosition:!0,fullscreen:!0,imagesLoaded:!0,initialIndex:o}).catch(function(){}),this.carousel.createCarousel(a,{asNavFor:".media-lightbox__main",cellAlign:"left",contain:!1,prevNextButtons:!0,pageDots:!1,percentPosition:!0,imagesLoaded:!0,accessibility:!1,initialIndex:o}).catch(function(){}),this.fullscreenLightboxMedia(),this.carousel.addAnalyticsEventHandlers(i),a.on("click.dkMediaLightbox",function(e){return e.stopPropagation()}),a.on("hover.dkMediaLightbox",function(){i.hasClass("carousel")&&i.addClass("shade")},function(){i.hasClass("carousel")&&i.removeClass("shade")})}},{key:"cloneMediaBlockIntoLightbox",value:function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,$(".toCloneImage")),s=$(".toCloneVideo"),r=$(".toCloneYoutubeVideo"),l=t.attr("data-caption"),d=t.data("video-id"),c=t.data("yt-captions"),u="video"===e&&!d,h=void 0;if("image"===e){var g=t.data("component"),p=void 0,f=void 0;"video-block"!==g&&"live-image"!==g||"lower"!=a?(p=t.attr("data-src"),f=t.attr("data-src-desktop")||p):(p=t.attr("data-video-thumbnail"),f=t.attr("data-video-desktop-thumbnail")||p);var v=this.getTransparentRenditionVariant(t,!0),k=this.getTransparentRenditionVariant(t,!1),_=m.pictureTag[a||"main"],b=_.replace(/IMG_SRC_MOBILE/g,p).replace(/IMG_SRC_DESKTOP/g,f).replace(/MOBILE_TRANSPARENT/g,v).replace(/DESKTOP_TRANSPARENT/g,k);o.clone().appendTo(i),h=i.find(".toCloneImage"),h.attr({"data-src":p,"data-src-desktop":f}),h.removeClass("cloner toCloneImage"),h.find(".media-block__img").html(b)}else if(u){var y=t.data("src"),C=_gpdc.elements.$window.width()>767?t.data("src-desktop"):y,E=void 0;s.clone().appendTo(i),h=i.find(".toCloneVideo"),E=h.find("video"),E.addClass("video-js"),h.removeClass("cloner toCloneVideo"),h.find("source").attr("src",C||y),this.videoPlayer.setUpVideoPlayers(E,!0)}else"video"===e&&d&&(r.clone().appendTo(i),h=i.find(".toCloneYoutubeVideo"),h.attr({"data-video-id":d,"data-component":"youtube-embed-block","data-yt-captions":c}).removeClass("cloner toCloneYoutubeVideo"),this.ytEmbedVideo.setupEmbeddedVideos('[data-component="youtube-embed-block"]',!1));"main"===a&&l&&h.append('<figcaption class="media-block__caption">'+l+"</figcaption>"),n?(h.addClass("carousel-cell"),"lower"!==a?(G++,h.attr("tabindex",G)):h.attr("tabindex",-1)):"fullscreen"!==a&&(G++,h.attr("tabindex",G)),"lower"!==a&&u&&(G+=B),d&&(G++,h.find("iframe").attr("tabindex",G))}},{key:"exitFullScreenMode",value:function(e){e.stopPropagation();var t=$(".media-lightbox__main"),i=$(".media-lightbox__lower"),a=$(".media-lightbox__fullscreen-image"),n=$(".media-lightbox").data("close-label");a.removeClass("reveal"),t.removeClass("fullscreen"),i.removeClass("fullscreen"),setTimeout(function(){t.addClass("reveal"),a.removeClass("show").empty(),$(".media-lightbox__close svg").attr("aria-label",n)},450)}},{key:"fullscreenLightboxMedia",value:function(){var e=this,t=$(".media-lightbox__main"),i=$(".media-lightbox__lower"),a=$(".media-lightbox__fullscreen-image"),n=t.find('[data-component="image-block"]'),o=$(".media-lightbox").data("close-fullscreen-label");$.each(n,function(n,s){var r=$(s);r.on("click.dkMediaLightbox keypress.dkMediaLightboxKeyPress",function(n){return n.stopPropagation(),t.hasClass("fullscreen")?void e.exitFullScreenMode(n):void("keypress"===n.type&&13!==n.keyCode||(t.addClass("fullscreen"),i.addClass("fullscreen"),e.cloneMediaBlockIntoLightbox("image",r,a,"fullscreen"),a.addClass("show"),t.removeClass("reveal"),setTimeout(function(){a.addClass("reveal"),$(".media-lightbox__close svg").attr("aria-label",o),$(".media-lightbox__close").focus()},450)))}),a.on("click.dkMediaLightbox",function(t){return e.exitFullScreenMode(t)})})}},{key:"getTransparentRenditionVariant",value:function(e,t){var i='[media="(min-width: '+(t?"320px":"768px")+')"]';return(e.find("source"+i).attr("srcset")||"").indexOf("--t$")>-1?"--t$":"$"}},{key:"handleCustomFocus",value:function(e,t,i){var a=$(".media-lightbox");16===e.keyCode||"Tab"!==e.key&&9!==e.keyCode||(e.preventDefault(),e.stopPropagation(),a.find('[tabindex="'+(e.shiftKey?t:i)+'"]').focus())}},{key:"lightboxAccessibilityUtils",value:function(e,t){var i=this,a=$(".media-lightbox");"on"===e?"carousel"===t?a.find(".is-selected")[0].focus():a.find('[tabindex="2"]').focus():N&&(N.data("dk-media-lightbox",!1),setTimeout(function(){return N.focus()},300)),a.find('[tabindex="'+G+'"]')[e]("keydown.dkMediaLightbox",function(e){i.handleCustomFocus(e,G-1,1)}),a.find('[tabindex="1"]')[e]("keydown.dkMediaLightbox",function(e){i.handleCustomFocus(e,G,2)})}}]),i}(),D=function(){function i(){e(this,i),this.userState=new _,this.arrowShape="M32.483 43.12l-16.66-16.185a2.007 2.007 0 0 1 0-2.879l16.66-16.18a2.007 2.007 0 0 1 2.823.026l.617.622a2.007 2.007 0 0 1-.027 2.853l-13.058 12.68a2.007 2.007 0 0 0 0 2.878L35.896 39.62a2.007 2.007 0 0 1 .027 2.852l-.617.622a2.007 2.007 0 0 1-2.823.027z",this.carouselCellClass=".carousel-cell, .media-carousel__cell"}return t(i,[{key:"init",value:function(){this.createCarousel().catch(function(){}),this.addCarouselClickHandlers(),_gpdc.Logger.log("Carousel initialized!!")}},{key:"shouldOpenLightBox",value:function(e,t,i,a){var n=t.hasClass("icon")||t.closest(".media-block__overlay").length;return(!i.data("disable-lightbox")||"video-block"===a.data("component"))&&(!a.data("pause-play-toggle")||!n)}},{key:"triggerLightBox",value:function(e,t,i,a,n){var o=this;return new Promise(function(s,r){var l=new O,d=new S;return t.data("carousel-cell-index",a),t.data("disable-lightbox")&&"video-block"===n.data("component")?void d.triggerIfNeeded(n).then(function(){l.openMediaLightbox("singleMedia",n,null,n.data("lightbox-theme")||"dark").catch(function(){}),s()}).catch(function(){_gpdc.Logger.log("Age gate failed on Carousel Video Block."),r()}):void(t.data("carousel-age-gated")?(o.userState.save(t.data(g.COMPONENT_INSTANCE_ID_ATTR),g.COMPONENT_INSTANCE_ID_ATTR,a),d.triggerAgeGate(t).then(function(a){t.data("carousel-age-gated",!1),l.openMediaLightbox("carousel",e,t,i).catch(function(){}),o.userState.clear(),s()}).catch(function(e){_gpdc.Logger.log("Age gate failed on Carousel!",e),r()})):(l.openMediaLightbox("carousel",e,t,i).catch(function(){}),s()))})}},{key:"addCarouselClickHandlers",value:function(){var e=this,t=$('[data-carousel="true"]');$.each(t,function(t,i){var a=$(i);a.find(".next"),a.find(".previous"),a.data("flickity");$.each(a.find(e.carouselCellClass),function(e,t){return $(t).data("cell-idx",e)}),a.on("keyup.dkCarouselFocus",function(e){var t=e.key,i=e.keyCode;"Tab"!==t&&9!==i||a.addClass("focus-in")}),a.on("blur.dkCarouselBlur",function(){a.removeClass("focus-in")}),a.on("keydown.dkCarousel",function(t,i,n,o){var s=t.target,r=t.type,l=t.key,d=t.keyCode;if("keydown"==r&&("Enter"===l||13===d)){var c=$(s),u=c.filter(".carousel-cell.is-selected, .media-carousel__cell.is-selected").length?c:c.find(".carousel-cell.is-selected, .media-carousel__cell.is-selected");e.performLightboxChecks(u,u.find("picture"),a,u.data("cell-idx"))}}),a.on("staticClick.flickity",function(t,i,n,o){var s=t.target,r=t.type;"staticClick"==r&&e.performLightboxChecks($(n),$(s),a,o)}),e.addAnalyticsEventHandlers(a)})}},{key:"performLightboxChecks",value:function(e,t,i,a){var n=this;if(e&&e.length&&t&&t.length){var o=$(e).hasClass("media-block")?$(e):$(e).find(".media-block");if(!this.shouldOpenLightBox(e,t,i,o)||!t.closest(".media-block__inner").length)return void _gpdc.Logger.log("Carousel Cell click - action returned due to either click being on Pause/Play toggle or on cell description text, buttons, etc");var s=i.data("lightbox-theme")||"dark";this.triggerLightBox(e,i,s,a,o).then(function(){setTimeout(function(){return n.logCarouselDtmEvent(i,"click",e)},500)}).catch(function(e){return _gpdc.Logger.log("Age Gate Failed on Carousel click",e)})}}},{key:"addAgeGateAttribute",value:function(e){var t=!1;$.each(e.find(this.carouselCellClass),function(e,i){var a=$(i),n=a.hasClass("media-block")?a:a.find(".media-block");(n.data("age-gated")||n.data("force-age-gate"))&&(t=!0)}),e.data("carousel-age-gated",t)}},{key:"createCarousel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-carousel="true"]',i=arguments[1];return new Promise(function(a,n){var o=$(t);o.length?($.each(o,function(t,a){var n=$(a),o=n.data("initial-index"),r={cellAlign:"center",accessibility:!0,adaptiveHeight:!0,wrapAround:!0,groupCells:!1,contain:!0,prevNextButtons:!0,pageDots:!0,percentPosition:!0,arrowShape:e.arrowShape,watchCSS:!0,selectedAttraction:.04,friction:.4},l=void 0,d=Object.assign(r,i);if(!n.hasClass("gallery")){o>=0&&(d.initialIndex=o),(n.hasClass("slider__controls--swatches")||n.hasClass("slider__controls--thumbnails"))&&(d.wrapAround=!1),e.addAgeGateAttribute(n),n.data("initial-index")>0&&(d.initialIndex=n.data("initial-index"));var c=n.closest(".media-carousel").find(".media-carousel__pagination");if(c.length){d.pageDots=!1;var u=function(e,t){c[0].pagination("select",t+1)};c.on("change.dkPagination",function(e,t){n.off("change.flickity",u),n.flickity("select",t-1),n.on("change.flickity",u)})}n.on("ready.flickity",function(){var e=n.closest(".media-carousel__content").find(".media-carousel__pager");e.length&&e.prepend('\n                                <div class="'+n.attr("class")+'">\n                                    <div class="media-carousel__cell"><!-- --></div>\n                                </div>\n                            ')}),n.flickity(d);var h=n.data("flickity");n.find(".media-carousel__cell .media-carousel__description").length&&n.find(".flickity-button").css("top",n.find(".is-selected .media-block").height()/2),n.on("change.flickity",function(e,t){var i=$(".media-block--video .video-js"),a=$(".embed-video iframe");d.fullscreen&&($.each(i,function(e,t){videojs($(t).attr("id")).pause()}),$.each(a,function(e,t){$(t)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),c.length&&c[0].pagination("select",t+1),l=t});var g=n.data("carousel-mobile"),p=n.data("carousel-desktop");(g||void 0==g)&&s.IS_MOBILE&&n.find(e.carouselCellClass).attr("tabindex",-1),(p||void 0==p)&&s.IS_TABLET&&n.find(e.carouselCellClass).attr("tabindex",-1),n.closest(".game-hero__gallery").length&&h.cells.length<4&&(n.find(".flickity-button").hide(),n.find(".flickity-page-dots").hide(),h.unbindDrag()),n.find(".flickity-button.previous").attr("tabindex",-1),n.find(".flickity-button.next").attr("tabindex",-1)}}),a("success")):n("error")})}},{key:"destroyCarousel",value:function(e){return new Promise(function(t){e.flickity("destroy"),t()})}},{key:"getMediaType",value:function(e){var t=e.data("component")?e.data("component"):e.find("[data-component]");return"video-block"==t||"live-image"==t?"video":"image"}},{key:"addAnalyticsEventHandlers",value:function(e){var t=this,i=e.find(".next"),a=e.find(".prev");e.find(this.carouselCellClass);i.on("click.carouselNext",function(){t.logCarouselDtmEvent(e,"next"),t.logCarouselDtmEvent(e,"click")}),a.on("click.carouselPrev",function(){t.logCarouselDtmEvent(e,"prev"),t.logCarouselDtmEvent(e,"click")})}},{key:"logCarouselDtmEvent",value:function(e,t,i){var a=i&&i.length?i:e.find(".is-selected"),n=this.getMediaType(a),o="",s="",r="",d=!1;if("next"==t||"prev"==t)o="select carousel "+t,d=!0;else if("click"==t){var c=a.hasClass("media-block")?a:a.find(".media-block");o="select "+n,s=c.data("src-desktop")||c.data("src"),r=e.find(this.carouselCellClass).index(a)}_gpdc.analytics.event.addGDLEvent("click",o,{moduleName:"carousel",elementType:n,assetName:s||l.EMPTY_LABEL,linkUrl:l.EMPTY_LABEL,label:l.EMPTY_LABEL,userActionFlag:d,position:r+1||"1"},e)}}]),i}(),R=function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];setTimeout(function(){var a={assetName:e.data("video-id")||e.data("src-desktop")||e.data("src")||l.EMPTY_LABEL,position:"1",label:l.EMPTY_LABEL,moduleName:i,elementType:t,userActionFlag:!1};n&&(a.linkUrl=e.attr("href")),_gpdc.analytics.event.addGDLEvent("click","select "+t,a,e)},a)},V=function(e,t){return t?t.find(e):$(e)},F=function(){function i(t){e(this,i),this.$context=t,this.ageGate=null,this.mediaLightBox=null}return t(i,[{key:"init",value:function(){var e=V('[data-component="live-image"], [data-component="bg-video"]',this.$context);e.length&&(this.ageGate=new S,this.mediaLightBox=new O,$.each(e,this.processInlineVideo.bind(this)))}},{key:"processInlineVideo",value:function(e,t){var i=this,a=$(t),n=a.data("auto-pause-play"),o=a.data("pause-play-toggle"),r=a.data("playback-limit"),l=a.data("post-playback"),d=s.IS_TABLET?"video.media-block__video\\@tablet":"",c=a.find(d),u=a.find(".media-block__img");c=c.length?c:a.find("video"),c.length&&u.length&&(r&&!o&&this.addVideoPlayEndHandler(a,c,r,l),"image"!==l&&this.addVideoClickHandler(a,o,l),c.hasClass("lozad")&&!c.hasClass("lazy-loaded")?c.watch({properties:"attr_class",callback:function(e){return i.checkIfVideoPlaying(e,a,c,n)}}):this.checkIfVideoPlaying(null,a,c,n))}},{key:"addVideoPlayEndHandler",value:function(e,t,i,a){var n={image:"+inline-video--removed",replay:"+replay-inline-video"},o=0;t.on("ended.dkInlineVideo",function(t){var s=t.currentTarget;o++,o===i?(e.addClass(n[a]).data("video-ended",!0),_gpdc.Logger.log("Video playback reached set count limit: "+o),o=0):s.play()})}},{key:"addVideoClickHandler",value:function(e,t,i){var a=this,n=t||"replay"===i?e.find(".media-block__overlay > .icon"):e;n.on("click.dkInlineVideo",function(o){o.preventDefault();var s=e.find("video:visible").get(0);if(t){var r=e.hasClass("+inline-video--paused");return r?s.play():s.pause(),void e[r?"removeClass":"addClass"]("+inline-video--paused").data("user-paused",!r)}if(n.closest('[data-carousel="true"]').length)return void _gpdc.Logger.log("Returned from inline video click, since it is in carousel");var l=e.data("video-ended");if(l)return"replay"===i?(e.removeClass("+replay-inline-video").data("video-ended",!1),s.currentTime=0,void s.play()):void("dam"!==i&&"youtube"!==i||a.ageGate.triggerIfNeeded(e).then(function(){a.mediaLightBox.openMediaLightbox("singleMedia",e,null,e.data("lightbox-theme")||"dark").catch(function(){}),R(e,"video","liveimageblock",500)}).catch(function(){return _gpdc.Logger.log("Age gate failed on Live Image Block.")}))})}},{key:"checkIfVideoPlaying",value:function(e,t,i,a){var n=this;try{i.on("error.dkInlineVideo",function(){n.applyFallback(t)}),i.on("loadeddata.dkInlineVideo",function(){var e=i.get(0);e.readyState>=1&&setTimeout(function(){return e.buffered&&e.buffered.length?(e.buffered.end(0)>0||!e.paused||t.hasClass("+inline-video--paused")?n.setupVideoInView(t,i,a):n.applyFallback(t),void i.off("loadeddata.dkInlineVideo")):void n.applyFallback(t)},g.INLINE_VIDEO_WAIT)})}catch(e){this.applyFallback(t),i.off("loadeddata.dkInlineVideo"),_gpdc.Logger.log("Inline Video exception while checking if video is playing:",e)}e&&setTimeout(function(){return i.unwatch(e.id)},10)}},{key:"applyFallback",value:function(e){e.removeClass("+inline-video +interactive").addClass("+inline-video--removed"),e.find("video").remove(),e.find(".media-block__overlay").remove()}},{key:"setupVideoInView",value:function(e,t,i){if(i&&window.Waypoint){new Waypoint.Inview({element:t,enter:function(){e.data("video-ended")||e.data("user-paused")||(t.get(0).play(),e.removeClass("+inline-video--paused"))},exited:function(){e.data("video-ended")||e.data("user-paused")||(t.get(0).pause(),e.addClass("+inline-video--paused"))}})}}}]),i}(),U=function(){function i(t){e(this,i),this.$context=t,this.ageGate=null,this.mediaLightBox=null,this.ytLinkClass="media-block__youtube-link"}return t(i,[{key:"init",value:function(){var e=V('[data-component="video-block"][data-lightbox="true"]:not(.carousel [data-component="video-block"][data-lightbox="true"])',this.$context);return!!e.length&&(this.ageGate=new S,this.mediaLightBox=new O,$.each(e,this.process.bind(this)),void _gpdc.Logger.log("Video Block Plugin initialized!!"))}},{key:"process",value:function(e,t){var i=this,a=$(t);a.on("click.dkVideoBlock keydown.dkVideoBlockKeyDown",function(e){var t=e.key,n=e.type,o=e.target,s=$(o),r=s.hasClass(i.ytLinkClass)||s.closest("."+i.ytLinkClass).length;"keydown"===n&&"Enter"!==t||r||i.ageGate.triggerIfNeeded(a).then(function(){i.mediaLightBox.openMediaLightbox("singleMedia",a,null,a.data("lightbox-theme")||"dark").catch(function(){}),R(a,"video","videoblock",500)}).catch(function(){return _gpdc.Logger.log("Age gate failed on Video Block.")})})}}]),i}(),W="javascript:void(0);",H=function(){function i(){e(this,i),this.ageGate=null,this.mediaLightBox=null}return t(i,[{key:"init",value:function(){var e=$('[data-component="image-block"][data-lightbox]:not(.carousel [data-component="image-block"][data-lightbox])');return!!e.length&&(this.ageGate=new S,this.mediaLightBox=new O,$.each(e,this.process.bind(this)),void _gpdc.Logger.log("Image Block Plugin initialized!!"))}},{key:"process",value:function(e,t){var i=this,a=$(t),n=a.data("lightbox"),o=a.attr("href")||W,s=o!==W;a.attr("tabindex",n||a.data("age-gated")||s?0:-1),a.on("click.dkImageBlock keydown.dkImageBlockKeyUp",function(e){var t=e.type,o=e.key;"keydown"===t&&"Enter"!==o||i.ageGate.triggerIfNeeded(a).then(function(){return n&&i.mediaLightBox.openMediaLightbox("singleMedia",a,null,a.data("lightbox-theme")||"dark").catch(function(){}),n||s?void R(a,"image","imageblock",500,s):void a.attr("tabindex",-1)}).catch(function(){return _gpdc.Logger.log("Age gate failed on Image Block.")})})}}]),i}(),K=function(){function i(t){e(this,i),this.$context=t}return t(i,[{key:"init",value:function(){var e=V(".media-block.media-block--bg",this.$context);e.length&&($.each(e,this.process.bind(this)),this.process(e),_gpdc.Logger.log("BG Block Plugin initialized!!"))}},{key:"process",value:function(e,t){var i=$(t);x(i,"gradient-theme",null,!0),x(i,"gradient-theme-tablet",null,!1,!0,!0)}}]),i}(),Y=function(){function i(){e(this,i)}return t(i,[{key:"init",value:function(){var e=new K,t=new H,i=new U,a=new F,n=new M;e.init(),t.init(),i.init(),a.init(),n.init()}}]),i}(),z=function(){function i(){e(this,i)}return t(i,[{key:"formatLinkLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.trim().replace(/\s+/g,"-").toLowerCase():l.EMPTY_LABEL}},{key:"addClickHandlerForTextBlocks",value:function(){var e=this,t=$(".text-block a, .title-block a, .stat-block a");$.each(t,function(t,i){var a=$(i);a.attr("dtm-position",t+1),a.on("click.DKTextBlocks",function(t){t.preventDefault(),e.logTextBlockDtmEvent(a).then(function(){setTimeout(function(){var e=a.attr("href");"_blank"===a.attr("target")?window.open(e):window.location.href=e},250)})})})}},{key:"logTextBlockDtmEvent",value:function(e){var t=this;return new Promise(function(i){var a=e.children("span:visible");_gpdc.analytics.event.addGDLEvent("click","select textblock link",{moduleName:"textblock",elementType:"link",assetName:l.EMPTY_LABEL,linkUrl:e.attr("href")||l.EMPTY_LABEL,label:t.formatLinkLabel(a.text()||e.text()),userActionFlag:!0,position:e.attr("dtm-position")},e),i()})}},{key:"init",value:function(){this.addClickHandlerForTextBlocks(),_gpdc.Logger.log("Text Block Tracker intialized!!")}}]),i}(),j=function(){function i(){e(this,i)}return t(i,[{key:"changeOlStartingPos",value:function(){var e=$(".text-block[data-ol-order-start]");$.each(e,function(e,t){var i=$(t).find("ol").eq(0),a=($(t).data("ol-order-start")||1)-1;i.css("counter-reset","item "+(a<-1?0:a))})}},{key:"init",value:function(){this.changeOlStartingPos();var e=new z;e.init()}}]),i}(),q=function(){function i(){e(this,i)}return t(i,[{key:"formatLinkLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trim().replace(/\s+/g,"-").toLowerCase()||l.EMPTY_LABEL}},{key:"getDeviceUrlForSniffer",value:function(e){var t={};return e.replace(/([^#\/&=?]+)=([^?&=]+)/gi,function(e,i,a,n){t[i]=decodeURIComponent(a)}),t.cid&&(e=t.cid.match(/STORE-/)?v.consoleUrlPrefix.category:v.consoleUrlPrefix.product+t.cid),e}},{key:"updateUrlForBtnSniffer",value:function(e){var t=e.attr("href");(t.indexOf(v.oldStoreUrl)>-1||t.indexOf(v.newStoreUrl)>-1)&&e.attr({href:this.getDeviceUrlForSniffer(t),target:"_self"})}},{key:"updateButtonUrlForConsole",value:function(e){var t=((window._gpdc||{}).browser||{}).device||"";(t.match(/ps3/i)||t.match(/ps4/i)||t.match(/ps5/i))&&this.updateUrlForBtnSniffer(e)}},{key:"trackClick",value:function(e,t,i){if(e.data(g.DTM_IGNORE_EVENT))return void e.data(g.DTM_IGNORE_EVENT,!1);var a=e.attr("href")||"",n=e.data("sku")||null,o=t?e.data("media-block-src")||e.data("video-id"):"",s={moduleName:"buttonblock",elementType:"button",assetName:o||l.EMPTY_LABEL,linkUrl:a||l.EMPTY_LABEL,label:e.data("dtm-label"),userActionFlag:!(n||i||t),position:e.data("dtm-position")||e.data("btn-position")};n&&(s.sku=n);var r=i?"Purchase Intent":"select"+(n?" purchase":t?" video":"")+" button";_gpdc.analytics.event.addRawEvent(e,{eventName:r,eventAction:"click"},s)}},{key:"getButtonLabelText",value:function(e){var t=e.data("dtm-label-override");return t&&s.IS_TABLET?this.formatLinkLabel(t):this.formatLinkLabel(e.data("dtm-label"))}},{key:"addClickHandlerForButtonBlocks",value:function(){var e=this,t=$(v.btnLinkSelector);$.each(t,function(t,i){var a=$(i),n=e.getButtonLabelText(a);if(a.data({"btn-position":t+1,"dtm-label":n}),!a.is(v.btnVideoSelector)&&!a.is(v.btnAgeGateSelector)){_gpdc.analytics.commerce.updateStoreOrDirectLinkHref({},i,"buttonblock",n,!0);var o=a.attr("href")||"",s=o.indexOf(v.newStoreUrl)>-1||o.indexOf(v.pdcDirectUrl)>-1;a.on("click.DKButtonBlocks",function(t){return s&&"_blank"!==a.attr("target")?(t.preventDefault(),void setTimeout(function(){e.trackClick(a,!1,s),window.location.href=o},250)):void e.trackClick(a,!1,s)}),e.updateButtonUrlForConsole(a)}})}},{key:"init",value:function(){this.addClickHandlerForButtonBlocks(),_gpdc.Logger.log("Button Block Tracker intialized!!")}}]),i}(),X=function(){function i(){e(this,i),this.WebCheckoutConstants=f,this.clientIdAttr=n.PREVIEW.test(location.href||"")?"data-preview-cid":n.WWWGLOBAL.test(location.href||"")?"data-wwwglobal-cid":"data-cid",this.$webCheckout=null,this.$webCheckoutWrapper=null,this.webCheckoutClientId=null,this.arkhamSessionAPIUrl="",this.displayClass=s.IS_MOBILE_PORTRAIT?"fadeInUpBig":"slideInRight",this.hideClass=(s.IS_MOBILE_PORTRAIT?"fadeOutUpBig":"slideOutRight")+" display--hidden"}return t(i,[{key:"appendQuery",value:function(e,t,i){return""+e+(e.indexOf("?")>-1?"&":"?")+t+"="+i}},{key:"toggleWebCheckout",value:function(e){var t=this,i=80;e?w(e,i).then(function(){t.$webCheckoutWrapper.removeClass(t.hideClass).addClass(t.displayClass),t.toggleCurtainClickHandler("on")}):w(e,i).then(function(){t.$webCheckoutWrapper.removeClass(t.displayClass).addClass(t.hideClass),t.toggleCurtainClickHandler("off")})}},{key:"toggleCurtainClickHandler",value:function(e){var t=this;$("#gdk__content .curtain")[e]("click.dkWebCheckout",function(){t.toggleWebCheckout(t.$webCheckoutWrapper.hasClass("display--hidden"))})}},{key:"attachWebCheckoutiFrame",value:function(e,t){var i=this;return new Promise(function(a,n){var o=window._gpdc.config||{},s=o.productFormattedLocale,r=i.WebCheckoutConstants.endpoint+"/buynow/"+e;if(i.$webCheckoutWrapper=$("#gdk__content .webcheckout__wrapper"),!window._gpdc)return void n("window._gpdc is not defined");var l=_gpdc.analytics.commerce.appendCIDs(r)||"",d=l.match(/emcid=([^&]+)/i)||"",c=l.match(/smcid=([^&]+)/i)||"";d&&(r=i.appendQuery(r,"emcid",d[1])),c&&(r=i.appendQuery(r,"smcid",c[1])),r=i.appendQuery(r,"privacy-policy","exempt"),r=i.appendQuery(r,"language",s||"en-US"),_gpdc.user.isLoggedIn&&(r=i.appendQuery(r,"age",_gpdc.user.age||"18")),r=i.appendQuery(r,"clientId",i.webCheckoutClientId),i.$webCheckout=i.$webCheckoutWrapper.find("iframe"),i.$webCheckout.attr("src")!==r&&(i.$webCheckoutWrapper.addClass(i.WebCheckoutConstants.loadingClass),i.$webCheckout.attr({src:""+r,"data-sku-id":e,"data-uuid":t})),a()})}},{key:"doPasswordVerification",value:function(){this.arkhamSessionAPIUrl||(this.arkhamSessionAPIUrl=this.WebCheckoutConstants.arkhamAPIHost+this.WebCheckoutConstants.arkhamAPIPath.replace("CURRENT_PAGE_URL",encodeURIComponent(window.location.href))),window.location.href=this.arkhamSessionAPIUrl}},{key:"onWindowMessage",value:function(e){var t=e.originalEvent,i=(h(t.data)||{}).action;return i?void(i===this.WebCheckoutConstants.loginAction?(_gpdc.Logger.log("Web Checkout - action to Login: ",i),this.userState.save(this.$webCheckout.data(g.COMPONENT_INSTANCE_ID_ATTR)),window._gpdc.config.doSignIn()):i===this.WebCheckoutConstants.pswrdVerifAction?(_gpdc.Logger.log("Web Checkout - action to Password Verification: ",i),this.userState.save(this.$webCheckout.data(g.COMPONENT_INSTANCE_ID_ATTR)),this.doPasswordVerification()):this.WebCheckoutConstants.closeActions.includes(i)?(this.toggleWebCheckout(!1),_gpdc.Logger.log("Web Checkout - action to close iFrame: ",i)):i===this.WebCheckoutConstants.loadedAction?(this.$webCheckoutWrapper.removeClass(this.WebCheckoutConstants.loadingClass),_gpdc.Logger.log("Web Checkout - action to remove iFrame loader: ",i)):_gpdc.Logger.log("Web Checkout - unhandled event action: ",i)):void _gpdc.Logger.log("Web Checkout - response does not contain valid/expected data object")}},{key:"displayFailSafe",value:function(e){var t=this.$webCheckoutWrapper.data("country-failsafe-text"),i=$('<div class="text-block failsafe-wrap"><p><a href="">'+t+"</a></p></div>");if(t){var a=window.location.href;"publish"===_gpdc.config.siteRunMode&&(a=a.replace(_gpdc.config.locale,(_gpdc.user.locale||"").toLowerCase())),i.find("a").attr("href",a),i.insertAfter(e.closest(".btn-block")),A(e.parent())}}},{key:"init",value:function(){var e=this,t=$("[data-sku]"),i=_gpdc.elements.$body.data("store-disabled");if(i||!t||!t.length)return!1;var a=new q,n=_gpdc.user.isLoggedIn&&(_gpdc.user.legalCountry||"").toLowerCase()!==window._gpdc.config.countryCode.toLowerCase();this.userState=new _,T("#webcheckout__wrapper-template").then(function(i){e.$webCheckoutWrapper=$("#gdk__content .webcheckout__wrapper"),e.webCheckoutClientId=e.$webCheckoutWrapper.attr(e.clientIdAttr),$.each(t,function(t,i){var o=$(i);return n?void e.displayFailSafe(o):void o.on("click.dkWebCheckout",function(t){t.stopPropagation(),t.stopImmediatePropagation();var i=$(t.currentTarget);e.attachWebCheckoutiFrame(i.data("sku"),i.data(g.COMPONENT_INSTANCE_ID_ATTR)).then(function(){return e.toggleWebCheckout(!0)}).catch(function(e){return _gpdc.Logger.log("WebCheckout failure: ",e)}),i.is(':not([class^="cta__"])')&&a.trackClick(i)})}),_gpdc.elements.$window.on("message.dkWebCheckout",e.onWindowMessage.bind(e))}).catch(function(){return _gpdc.Logger.warn("Unable to find webcheckout HTML Template!!")})}}]),i}(),Q=function(){function i(){e(this,i)}return t(i,[{key:"init",value:function(){var e=$("[data-pxp-campaign]");if(!e||!e.length)return!1;var t=new _;$.each(e,function(e,i){var a=$(i),n=a.data("pxp-action")||"";if(n.includes("manualForceToComplete")){var o="PXP_TASK_"+e;n=n+","+o,a.attr({"data-pxp-action":n,id:o})}a.on("click.psexpClick",function(){return t.save(a.data(g.COMPONENT_INSTANCE_ID_ATTR))})}),_gpdc.Logger.log("Experience PlayStation initialized!!")}}]),i}(),J=function(){function i(){e(this,i),this.$buttons=$(v.btnVideoSelector),this.buttonBlockTracker=new q,this.mediaLightBox=new O,this.ageGate=new S}return t(i,[{key:"onClick",value:function(e){e.preventDefault();var t=$(e.currentTarget),i=t.data(),a=i.videoDam,n=i.videoYoutube,o=i.lightboxTheme,s=void 0===o?"dark":o;t.data("component","video-block"),a?t.data("src",a):t.data("video-id",n),this.ageGate.isGated(t)||(this.mediaLightBox.openMediaLightbox("singleMedia",t,null,s),this.buttonBlockTracker.trackClick(t,!0))}},{key:"addEventListeners",value:function(e){e.on("click.dkVideoButtonClick",this.onClick.bind(this))}},{key:"init",value:function(){this.$buttons.length&&this.addEventListeners(this.$buttons)}}]),i}(),Z=function(){function i(){e(this,i),this.ageGate=new S}return t(i,[{key:"init",value:function(){var e=new X,t=new Q,i=new q,a=new J;a.init(),e.init(),t.init(),i.init(),this.aemPatch(),this.applyAgeGate()}},{key:"applyAgeGate",value:function(){var e=this,t=$(v.btnBlockGated+", "+v.btnBlockGatedForce);t.on("click.dkBtnBlock",function(t){var i=$(t.currentTarget);e.ageGate.isGated(i)&&(t.preventDefault(),e.ageGate.triggerIfNeeded(i).then(function(){i[0].click()}).catch(function(){return _gpdc.Logger.log("Age gate failed on Button.")}))})}},{key:"aemPatch",value:function(){var e=$(v.btnBlock);(e||e.length)&&$.each(e,function(e,t){var i=$(t),a=i.parent();if(a.hasClass("buttonblock")){var n=i.attr("class").split(/\s+/);$.each(n,function(e,t){t.includes("--auto")&&a.addClass(t)})}})}}]),i}(),ee=function(){function i(){e(this,i),this.init()}return t(i,[{key:"setCustomWidths",value:function(e){var t="custom-"+e+"-width",i=$("[data-"+t+"]");$.each(i,function(e,i){var a=$(i).data(t);a!==!1&&$(i).get(0).style.setProperty("--"+t,a)})}},{key:"init",value:function(){this.setCustomWidths("mobile"),this.setCustomWidths("tablet"),this.setCustomWidths("desktop"),_gpdc.Logger.log("Blocks initialized")}}]),i}(),te=function(){function i(){e(this,i),this.init()}return t(i,[{key:"removeNavFooter",value:function(){$("#sony-bar").remove(),$("#shared-nav-root").remove(),$("#jetstream-tertiary-nav").remove(),$(".gdk .site-footer").remove()}},{key:"addStickyBehavior",value:function(e,t){window.sharedNav&&window.sharedNav.makeSticky(t.length?t[0]:e[0])}},{key:"addTerNavAnchorsActiveLogic",value:function(e){var t=e.find('a.tertiary-tab__link[data-ps-anchor-link="true"]');$.each(t,function(t,i){$(i).on("click.pdcTertiaryNav",function(t){var i=t.currentTarget;e.find("a.tertiary-tab__link--active").removeClass("tertiary-tab__link--active"),$(i).addClass("tertiary-tab__link--active")})})}},{key:"init",value:function(){var e="hide"===sessionStorage.getItem(o.navFooter);if(e)return void this.removeNavFooter();var t=$("#shared-nav-container"),i=$("#jetstream-tertiary-nav");t&&t.length&&(this.addStickyBehavior(t,i),this.addTerNavAnchorsActiveLogic(i)),_gpdc.Logger.log("Jetstream Tertiary Nav module initialized!!")}}]),i}(),ie=function(){function i(){e(this,i)}return t(i,[{key:"addWaypointAnimation",value:function(e,t){if(s.IS_LANDSCAPE){var i=e.data("tablet-up-animation-class");if(!i)return;var a=new Waypoint({element:e.get(0),handler:function(){t.addClass(i),a.destroy()},offset:"90%"})}else{var n=e.data("mobile-animation-class");if(!n)return;$.each(t,function(e,t){var i=new Waypoint({element:t,handler:function(){$(t).addClass(n),i.destroy()},offset:"90%"})})}}},{key:"applyAnimations",value:function(e,t,i){var a=e.data("grid-animation-"+i)||"";if(a){if("tablet-up"===i){var n=e.data("grid-animation-delay-step")||.2,o=e.data("grid-animation-sequence")||"";$.each(t,function(e,i){var a="disabled"===o?0:"reversed"===o?t.length-e-1:e;$(i).css("--animation-delay",a*n+"s")})}e.data(i+"-animation-class",a)}}},{key:"processContentGrids",value:function(e){var t=this;$.each(e,function(e,i){var a=$(i),n=a.find('div[class^="box"]');t.applyAnimations(a,n,"mobile"),t.applyAnimations(a,n,"tablet-up"),t.addWaypointAnimation(a,n)})}},{key:"init",value:function(){var e=$(".content-grid");e.length&&this.processContentGrids(e),_gpdc.Logger.log("ContentGrid initialized!!")}}]),i}(),ae=function(){function i(){e(this,i),this.formMessage="form__message",this.input="input",this.inputItem=this.input+"__item",this.inputError=this.input+"__error",
window._gpdc.components.form=this,this.init()}return t(i,[{key:"addInputItemHandlers",value:function(e){var t=this,i="input[type=text],input[type=number],input[type=email],input[type=password],select",a=this.inputItem,n="."+a,o=a+"--focused",s=a+"--filled";e.find(i).each(function(e,i){var a=$(i);""!==a.val()&&a.closest("."+t.inputItem).addClass(s)}).on("focus.dkInput",function(e){var t=e.currentTarget;$(t).closest(n).addClass(o)}).on("blur.dkInput",function(e){var t=e.currentTarget,i=$(t),a=i.closest(n),r=i.val();""===r?a.removeClass(s):a.addClass(s),a.removeClass(o)})}},{key:"addFormValidationHandlers",value:function(e){var t="."+this.input,i="."+this.inputError,a={errorsContainer:function(e){var a=e.$element.closest(t);if(a.length){var n=a.find(i);return n.empty(),n}return e}},n=this.inputItem,o="."+this.inputItem,s=n+"--success",r=n+"--error",l="[class$='server-validation-error']";e.parsley().destroy(),e.parsley(a).on("field:error",function(e){e.$element.closest(t).find(l).remove(),e.$element.closest(o).removeClass(s).addClass(r),e.$element.attr("aria-invalid","true")}).on("field:success",function(e){e.$element.closest(o).removeClass(r).addClass(s),e.$element.attr("aria-invalid","false")}).on("form:submit",function(t){var i=new q;return i.trackClick(e.find("[type=submit]")),!0})}},{key:"addTextAreaLetterCounter",value:function(e){var t="."+this.input;e.find("textarea").each(function(e,i){var a=$(i),n=a.closest(t).find(".current");a.on("keyup.dkInput",function(){n.text(a.val().length)})})}},{key:"init",value:function(){var e=this,t=$('[data-component="form"]');t&&t.length&&($.each(t,function(t,i){var a=$(i),n=a.data("bound")||!1;n||(e.addInputItemHandlers(a),e.addFormValidationHandlers(a),e.addTextAreaLetterCounter(a),a.data("bound",!0))}),_gpdc.Logger.log("Forms initialized!!"))}}]),i}(),ne=function(){function i(){e(this,i)}return t(i,[{key:"addEventListeners",value:function(e){var t=e,i=t.find(".form__view--1"),a=t.find(".form__view--2"),n=t.find(".form__view--3"),o=1200,s=new q;a.find(".input__field").on("click.dkForm",function(e){s.trackClick($(e.currentTarget)),t.submit()}),$(".input__item--icon-smile .input__field").on("click.dkForm",function(e){s.trackClick($(e.currentTarget)),t.submit()}),$(".input__item--icon-frown .input__field").on("click.dkForm",function(e){s.trackClick($(e.currentTarget)),a.fadeIn(o)}),t.on("submit.dkForm",function(e){e.preventDefault(),i.hide(),a.hide(),n.fadeIn(o)})}},{key:"init",value:function(){var e=this,t=$('[data-component="form-feedback"]');t.length&&($.each(t,function(t,i){var a=$(i);e.addEventListeners(a)}),_gpdc.Logger.log("Form feedback initialized!!"))}}]),i}(),oe=function(){function i(){e(this,i),_gpdc.Logger.log("SearchBar initialized!!"),this.bind()}return t(i,[{key:"bind",value:function(){this._onFormSubmit=this._onFormSubmit.bind(this),this._onInputKeyUp=this._onInputKeyUp.bind(this),this._onInputFocus=this._onInputFocus.bind(this),this._onInputBlur=this._onInputBlur.bind(this),this._onSubmitClick=this._onSubmitClick.bind(this),this._onClearClick=this._onClearClick.bind(this)}},{key:"init",value:function(){var e="dkSearchBar",t=$(".search-bar__input");this.$form=$('[name="gdk-search-box"]'),this.$form.on("submit."+e,this._onFormSubmit),t.on("keyup."+e,this._onInputKeyUp).trigger("keyup."+e),t.on("focus."+e,this._onInputFocus),t.on("blur."+e,this._onInputBlur),t.data("bar-keyup-event-name","keyup."+e),$(".search-bar__submit").on("click."+e,this._onSubmitClick),$(".search-bar__clear").on("click."+e,this._onClearClick)}},{key:"_onInputFocus",value:function(e){this.$form.addClass("border--active")}},{key:"_onInputBlur",value:function(e){this.$form.removeClass("border--active")}},{key:"_onFormSubmit",value:function(e){var t=this.$form.attr("action");t&&location.pathname!==t||e.preventDefault()}},{key:"_onInputKeyUp",value:function(e){var t=e.currentTarget.value,i=$(e.currentTarget),a=i[0],n="search-bar__clear--active";a.$clear||(a.$clear=i.parent().find(".search-bar__clear")),t&&!a.$clear.hasClass(n)?a.$clear.addClass(n):!t&&a.$clear.hasClass(n)&&a.$clear.removeClass(n)}},{key:"_onSubmitClick",value:function(e){e.preventDefault(),$(e.currentTarget).closest("form").trigger("submit")}},{key:"_onClearClick",value:function(e){e.preventDefault();var t=$(e.currentTarget).removeClass("search-bar__clear--active").prevAll(".search-bar__input");t[0].cleared=!0,t.val(""),t.trigger("keydown")}}]),i}(),se=function(){function i(){e(this,i)}return t(i,[{key:"init",value:function(){var e=$('[data-component="cookie-launcher"]');return!(!e||!e.length)&&(e.on("click.dkCookie",function(){window.evidon&&window.evidon.notice.showOptions()}),void _gpdc.Logger.log("Cookie Launcher initialized!!"))}}]),i}(),re=function(){function i(){e(this,i)}return t(i,[{key:"init",value:function(){_gpdc.Logger.log("A11y initialized."),_gpdc.elements.$document.on("keydown.dkA11yEnter",'div[role="button"]',function(e){"Enter"===e.key?$(e.currentTarget).trigger("click"):" "===e.key&&(e.preventDefault(),$(e.currentTarget).trigger("click"))})}}]),i}(),le=function(){function i(){e(this,i),this.videoEqualsQueryParamRegex=new RegExp("video=")}return t(i,[{key:"autoloadVideo",value:function(e){var t=new URLSearchParams(e)||{},i=t.get("video"),a=$(".video-autoload-template"),n=a.find('[data-auto-load-query="'+i+'"]');if(n&&n.length){var o=new _gpdc.components.VideoButton;o.addEventListeners(a.find(v.btnVideoSelector)),n.click()}}},{key:"init",value:function(){var e=this,t=window.location&&window.location.search||"";t&&this.videoEqualsQueryParamRegex.test(t)&&(T("#video-autoload__template").then(function(i){e.autoloadVideo(t)}).catch(function(e){_gpdc.Logger.warn("Unable to find VideoAutoload HTML Template!!")}),_gpdc.Logger.log("VideoAutoload initialized!!"))}}]),i}(),de=function(){function a(){e(this,a),this.ALERT_SHOW_DELAY=1e3,this.ALERT_COOKIE_PREFIX="pdcAlert",this.ALERT_COOKIE_TIMEOUT_OFFSET=6048e5,this.ALERT_PINNED_CLASS="pinned-top",this.fadeInAlertsWrapper=!1,this.$els={sonyBar:$("#sony-bar:not(.dk-nav__wrapper)"),tertiary:$("#jetstream-tertiary-nav .tertiary-container")}}return t(a,[{key:"init",value:function(){var e=this,t=$('[data-component="alerts"]');if(t.length){this.hashAnchor=new i;var a=t.eq(0),n=a.find(".alerts__item");a.css("--alert-top",this.hashAnchor.calculateNavigationOffset()+this.getSonyBarOffset()+"px"),a.css("--alert-top-pinned",this.$els.tertiary.length||!r.IS_JETSTREAM_MOBILE?"64px":"60px"),$.each(n,function(t,i){return e.processAlerts(a,$(i),t)}),this.fadeInAlertsWrapper&&setTimeout(function(){a.addClass("in"),$.each(n,function(t,i){return e.trackAlertEvent($(i),"impression","alert impression","image")})},this.ALERT_SHOW_DELAY),_gpdc.Logger.log("Alerts initialized!!")}}},{key:"processAlerts",value:function(e,t,i){return this.shouldDisplayAlert(t)?(this.fadeInAlertsWrapper=!0,t.data("analytics-position",i+1),this.pinAlertToTop(e),void this.addListeners(e,t)):void t.remove()}},{key:"shouldDisplayAlert",value:function(e){var t=u(this.ALERT_COOKIE_PREFIX+(e.data("alert-id")||""));if(t)return!1;var i=new Date((new Date).toUTCString()).getTime(),a=e.data("start-time"),n=e.data("end-time");return a&&n&&a<i&&n>i}},{key:"addListeners",value:function(e,t){var i=this,a=t.find(".alerts__item__collapsable"),n=t.find(".alerts__item__link"),o=t.find(".alerts__item__close");_gpdc.elements.$window.scroll(function(){return i.pinAlertToTop(e)}),r.IS_LAPTOP||a.on("click.dkAlertsExpand",function(e){var t=e.currentTarget,a=$(t),n=a.parent();n.toggleClass("collapsed"),n.hasClass("collapsed")||i.trackAlertEvent(a,"click","expand alert","image")}),o.on("click.dkAlertsClose",function(e){var t=e.currentTarget,a=$(t);i.persistAlertDismissal(a),i.trackAlertEvent(a,"click","close alert","button")}),n.length&&n.on("click.dkAlertsLink",function(e){e.preventDefault();var t=$(e.currentTarget),a=t.attr("href");a&&"javascript:void(0);"!==a&&(i.persistAlertDismissal(t),window.open(a,"_blank")),i.trackAlertEvent(t,"click","select alert link","link")})}},{key:"pinAlertToTop",value:function(e){e[_gpdc.elements.$window.scrollTop()>0?"addClass":"removeClass"](this.ALERT_PINNED_CLASS)}},{key:"persistAlertDismissal",value:function(e){var t=e.closest(".alerts__item"),i=t.data("alert-id")||"",a=t.data("end-time")+this.ALERT_COOKIE_TIMEOUT_OFFSET,n=Math.floor((a-(new Date).getTime())/6e4);t.remove(),i&&c(this.ALERT_COOKIE_PREFIX+i,"dismissed",n)}},{key:"getSonyBarOffset",value:function(){return this.$els.sonyBar.length&&!r.IS_JETSTREAM_MOBILE?this.$els.sonyBar.outerHeight():0}},{key:"trackAlertEvent",value:function(e,t,i,a){_gpdc.analytics.event.addGDLEvent(t,i,{userActionFlag:"click"===t,moduleName:"alert",label:e.data("analytics-label")||l.EMPTY_LABEL,position:e.data("analytics-position"),linkUrl:l.EMPTY_LABEL,assetName:l.EMPTY_LABEL,elementType:a},e)}}]),a}(),ce=function(){function i(){e(this,i),this.activeSlideId=0,this.rotateInterval=null,this.keepRotation=!1,this.$slider=null,this.$controlsWrapper=null,this.$controls=null,this.$slides=null,this.isAutoRotationEnabled=null,this.displayHidden="display--hidden",this.autoRotateEventDataAttr="auto-rotate-event",this.bannersTracked=[]}return t(i,[{key:"init",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.length?(this.$slider=e,this.$controlsWrapper=this.$slider.find(".slider__controls"),this.$controls=this.$slider.find(".slider__control"),this.$slides=this.$slider.find(".slider__slide"),this.componentType=this.$slider.data("component"),this.isAutoRotationEnabled=this.$slider.data("auto-rotate"),this.options=i,this.addEventHandlers(),this.setControlsHeight(),this.isAutoRotationEnabled&&(this.keepRotation=!0,this.configureAutoRotate()),this.options.impressionCallback&&setTimeout(function(){t.options.impressionCallback(t.$slides.eq(0),1)},200),void _gpdc.Logger.log("Slider initialized!!")):void _gpdc.Logger.log("Invalid params, Slider not initialized!")}},{key:"addEventHandlers",value:function(){var e=this;this.$controlsWrapper.on("change.flickity",this.updateSlide.bind(this)),this.$controls.on("click.dkSliderControlClick",function(t){var i=t.currentTarget;return e.updateSlide($(i))}),this.$controls.hover(function(t){var i=t.currentTarget;s.IS_TABLET&&e.$controls.not($(i)).find("figure").addClass("not-hovered")},function(){s.IS_TABLET&&e.$controls.find("figure").removeClass("not-hovered")})}},{key:"setControlsHeight",value:function(){var e=this;s.IS_DESKTOP||(this.$slider.css("--controls-wrapper-height",this.$controlsWrapper.outerHeight()),_gpdc.elements.$window.on("resize.slider",function(){return e.$slider.css("--controls-wrapper-height",e.$controlsWrapper.outerHeight())}))}},{key:"configureAutoRotate",value:function(){var e=this;setTimeout(function(){e.keepRotation&&(e.$slider.data(e.autoRotateEventDataAttr,!0),e.triggerUpdateSlide(),e.rotateInterval=setInterval(function(){e.$slider.data(e.autoRotateEventDataAttr,!0),e.triggerUpdateSlide()},e.$slider.data("other-slides-display-time")||3e3))},this.$slider.data("first-slide-display-time")||6e3)}},{key:"triggerUpdateSlide",value:function(){this.activeSlideId++,this.activeSlideId>this.$controls.length&&(this.activeSlideId=1),this.$controlsWrapper.hasClass("flickity-enabled")?this.$controlsWrapper.flickity("select",this.activeSlideId-1,!0,!1):this.$controls.filter('[data-control-id="'+this.activeSlideId+'"]').click()}},{key:"updateSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.keepRotation=this.clearAutoRotatation();var t=e.length?e:this.$controls.filter(".is-selected"),i=t.data("control-id"),a=this.$slider.find("[data-slide-id='"+i+"']");if(s.IS_MOBILE&&this.$controls.closest(".slider__controls.carousel").flickity("selectCell",i-1),this.activeSlideId=i,this.$controls.removeClass("is-selected"),t.addClass("is-selected"),this.$slides.not("."+this.displayHidden).addClass(this.displayHidden),a.removeClass(this.displayHidden),a.find('[data-carousel="true"]').flickity("resize"),this.$slider.hasClass("product-picker")){var n="div[class*=slider__control--]";this.$controls.find(n).removeClass("is-selected"),t.find(n).addClass("is-selected")}"hp-hero"==this.componentType&&this.options.impressionCallback(a,i,this.bannersTracked,0),"featured-hardware"===this.componentType&&this.options.clickCallback(a,t)}},{key:"clearAutoRotatation",value:function(){var e=this.$slider.data(this.autoRotateEventDataAttr);return e?(this.$slider.data(this.autoRotateEventDataAttr,!1),!0):!(!this.isAutoRotationEnabled||e)&&(clearInterval(this.rotateInterval),!1)}}]),i}(),ue=function(){function i(){e(this,i),_gpdc.Logger.log("Pagination initialized!!")}return t(i,[{key:"api",value:function(e){var t=$(this),i=t.data("pages");if("select"===e){for(var a=arguments.length,n=Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];var s=n[0];if(t[0].$blips.removeClass("pagination__blip--active"),t.find('[data-page="'+s+'"]').addClass("pagination__blip--active"),s>=9&&t[0].pages>9&&s<t[0].pages-1){var r=Math.abs(9-s);t[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(r+1)+") + (var(--blip-gap) * "+(r+1)+")) * -1))")}else s<9?t[0].$slider.css("transform","translateX(0)"):s===i&&t[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(s-10)+") + (var(--blip-gap) * "+(s-10)+")) * -1))")}}},{key:"initPaginator",value:function(e,t){var i=$(t),a=i.data("pages");i[0].pagination=this.api.bind(t),i[0].pages=a,i[0].$blips=i.find(".pagination__blip"),i[0].$slider=i.find(".pagination__slider"),i[0].$blips.on("click.dkPagination",function(e){var t=$(e.currentTarget);if(t.attr("href"));else{e.preventDefault(),i[0].$blips.removeClass("pagination__blip--active"),t.addClass("pagination__blip--active");var n=t.data(),o=n.page;if(i.trigger("change.dkPagination",[o,e]),o>=9&&a>9&&o<a-1){var s=Math.abs(9-o);i[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(s+1)+") + (var(--blip-gap) * "+(s+1)+")) * -1))")}else o<9?i[0].$slider.css("transform","translateX(0)"):o===a&&i[0].$slider.css("transform","translateX(calc(((var(--blip-width) * "+(o-10)+") + (var(--blip-gap) * "+(o-10)+")) * -1))")}}),i[0].$blips.filter(".pagination__blip--active").trigger("click")}},{key:"init",value:function(){var e=$('[data-component="pagination"]');e.length&&e.each(this.initPaginator.bind(this))}}]),i}(),he=function(){function a(){e(this,a),this.hashAnchor=new i}return t(a,[{key:"positionActiveTab",value:function(e,t){var i=parseInt(t.css("width")),a=parseInt(_gpdc.elements.$body.css("width")),n=parseInt(e.css("padding-right")),o=t.offset().left,s=t.position().left,r={left:n,right:a-n};o<r.left?e.animate({scrollLeft:s},100):o+i>r.right&&e.animate({scrollLeft:s+i-(a-n-n)},100)}},{key:"addListeners",value:function(e){var t=this,i=$('div[data-component="pills"]');this.stickyPillsInstance={},i.each(function(i,a){var n=$(a);if(n.find(".pills__item").on("click.dkPillsClik",function(e){var i=$(e.currentTarget);i.hasClass("pills__item--active")||(n.trigger("change.dkPills",[i,e]),i.addClass("pills__item--active").trigger("blur").siblings().removeClass("pills__item--active"),t.positionActiveTab(n,i))}),n.data("sticky")){var o=n.data("sticky-limit-elm"),s=o?$(o):[];t.initSticky(n,s,e,i,!0)}})}},{key:"initSticky",value:function(e,t,i,a,n){var o=this;this.stickyPillsInstance[a]=new Waypoint.Sticky({element:e[0],stuckClass:"isSticky",offset:i,handler:function(){return e.css("--sticky-top",i+"px")}}),n&&t.length&&setTimeout(function(){new Waypoint({element:t[0],offset:e.outerHeight()+i,handler:function(n){"down"===n?o.stickyPillsInstance[a].destroy():setTimeout(function(){o.initSticky(e,t,i,a,!1)},0)}})},500)}},{key:"init",value:function(){var e=this.hashAnchor.calculateNavigationOffset();this.addListeners(e),_gpdc.Logger.log("Pills initialized!!")}}]),a}(),ge=function(){function i(){e(this,i),this.init()}return t(i,[{key:"initModules",value:function(){_gpdc.Logger.groupStart("Components");var e=new Y,t=(new O,new D),i=new ie,a=new j,n=new S,o=new Z,s=(new ee,new ae),r=new ne,l=new oe,d=new se,c=new le,u=new _,h=new re,g=new de,p=new ue,f=new he;p.init(),f.init(),n.init(),i.init(),a.init(),o.init(),s.init(),r.init(),l.init(),d.init(),e.init(),t.init(),c.init(),h.init(),g.init(),u.retrieve(),n.updateSignInLink("body"),_gpdc.Logger.groupEnd()}},{key:"init",value:function(){var e=this,t=new te;t.init(),_gpdc.components.AgeGate=S,_gpdc.components.BGBlock=K,_gpdc.components.InlineVideo=F,_gpdc.components.VideoBlock=U,_gpdc.components.VideoButton=J,_gpdc.components.YTEmbedVideo=M,_gpdc.components.VideoPlayer=P,_gpdc.components.Carousel=D,_gpdc.components.Slider=ce,window._gpdc&&_gpdc.user&&"undefined"!=typeof _gpdc.user.isLoggedIn?this.initModules():_gpdc.elements.$document.one("userInfoSet.dkComponents",function(){return e.initModules()})}}]),i}(),pe=function(){function i(){e(this,i),this.cookie=a,this.init()}return t(i,[{key:"setEvidonCookie",value:function(e){c(this.cookie.LABELS.EU_COOKIE,e,this.cookie.COOKIE_AGE,this.cookie.DOMAIN)}},{key:"setConsent",value:function(e){this.setEvidonCookie(e);var t=new CustomEvent("evidonConsentState",{detail:{consent:e},bubbles:!0,cancelable:!0});document.dispatchEvent(t)}},{key:"init",value:function(){var e=this;window.evidon&&(window.evidon.launchConsentAccepted=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_ACCEPT),_gpdc.Logger.log("Evidon launchConsentAccepted called!!")},window.evidon.launchConsentWithdrawn=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_REJECT),_gpdc.Logger.log("Evidon launchConsentWithdrawn called!!")},window.evidon.launchConsentDeclined=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_REJECT),_gpdc.Logger.log("Evidon launchConsentDeclined called!!")},_gpdc.Logger.log("Evidon initialized!!"))}}]),i}();!function(e){var t=window;t.sharedNav&&sharedNav.setPublicUrl&&t.sharedNav.setPublicUrl("/etc.clientlibs/global_pdc/clientlibs/clientlibs-jetstream/resources"),_gpdc.components={},_gpdc.elements.$document.ready(function(){t._dkDebug=!1,_gpdc.Logger.groupStart("Core");var e=new i;new ge,new pe,new d;e.bind(),e.init(),_gpdc.Logger.groupEnd()})}(jQuery)}();
