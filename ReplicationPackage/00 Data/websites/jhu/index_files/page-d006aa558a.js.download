!function a(s,r,l){function c(n,e){if(!r[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var o=r[n]={exports:{}};s[n][0].call(o.exports,function(e){var t=s[n][1][e];return c(t||e)},o,o.exports,a,s,r,l)}return r[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";function i(){this.focusable=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]","[tabindex]:not([tabindex='-1'])"]}i.prototype.saveFocus=function(e){this.beforeOpenFocus=e},i.prototype.returnFocus=function(){this.beforeOpenFocus&&(this.beforeOpenFocus.focus(),this.beforeOpenFocus=null)},i.prototype.setInitialFocus=function(e){0!==e.length&&setTimeout(function(){e.focus()},1)},i.prototype.getFocusable=function(e){return e.find(this.focusable.join(",")).filter(":visible").filter(function(){return"hidden"!==$(this).css("visibility")&&(void 0===$(this).attr("tabindex")||-1<$(this).attr("tabindex"))})},i.prototype.trapTab=function(e,t){var n,i=this.getFocusable(e),o=i.filter(":focus"),a=i.index(o),s=!1;-1<a&&((n=t.shiftKey?a-1:a+1)>i.length-1?s=0:-1===n&&(s=i.length-1),!1!==s&&(i.get(s).focus(),t.preventDefault()))},t.exports=i},{}],2:[function(e,t,n){"use strict";function i(e){for(var t=e.length,n=0;n<t;++n)if(0<e[n].offsetWidth||0<e[n].offsetHeight)return e[n]}t.exports={getHeight:function(){return i(document.querySelectorAll("#breakpoint .height div")).className},getWidth:function(){return i(document.querySelectorAll("#breakpoint .width div")).className}}},{}],3:[function(e,t,n){(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(a){function r(e,t){for(var n=-1,i=e.length;++n<i;)if(n in e&&e[n]===t)return n;return-1}function e(e,t){if(!e)throw new Error("Not enough arguments");var n;if("createEvent"in document){n=document.createEvent("Event");var i=!(!t||t.bubbles===a)&&t.bubbles,o=!(!t||t.cancelable===a)&&t.cancelable;return n.initEvent(e,i,o),n}return(n=document.createEventObject()).type=e,n.bubbles=!(!t||t.bubbles===a)&&t.bubbles,n.cancelable=!(!t||t.cancelable===a)&&t.cancelable,n}var t,o;o={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1},"undefined"!=typeof document&&"undefined"!=typeof window&&(t=window.Event&&window.Event.prototype||null,e.NONE=0,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,window.Event=Window.prototype.Event=e,t&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:t}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(e,t){var s=this,n=e,i=t;if(s===window&&n in o)throw new Error("In IE8 the event: "+n+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");s._events||(s._events={}),s._events[n]||(s._events[n]=function(e){var t,n=s._events[e.type].list,i=n.slice(),o=-1,a=i.length;for(e.preventDefault=function(){!1!==e.cancelable&&(e.returnValue=!1)},e.stopPropagation=function(){e.cancelBubble=!0},e.stopImmediatePropagation=function(){e.cancelBubble=!0,e.cancelImmediate=!0},e.currentTarget=s,e.relatedTarget=e.fromElement||null,e.target=e.target||e.srcElement||s,e.timeStamp=(new Date).getTime(),e.clientX&&(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop);++o<a&&!e.cancelImmediate;)o in i&&-1!==r(n,t=i[o])&&"function"==typeof t&&t.call(s,e)},s._events[n].list=[],s.attachEvent&&s.attachEvent("on"+n,s._events[n])),s._events[n].list.push(i)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(e,t){var n,i=this,o=e;i._events&&i._events[o]&&i._events[o].list&&-1!==(n=r(i._events[o].list,t))&&(i._events[o].list.splice(n,1),i._events[o].list.length||(i.detachEvent&&i.detachEvent("on"+o,i._events[o]),delete i._events[o]))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(t){if(!arguments.length)throw new Error("Not enough arguments");if(!t||"string"!=typeof t.type)throw new Error("DOM Events Exception 0");var n=this,i=t.type;try{t.bubbles||(t.cancelBubble=!0,this.attachEvent("on"+i,function e(t){t.cancelBubble=!0,(n||window).detachEvent("on"+i,e)})),this.fireEvent("on"+i,t)}catch(e){for(t.target=n;"_events"in(t.currentTarget=n)&&"function"==typeof n._events[i]&&n._events[i].call(n,t),"function"==typeof n["on"+i]&&n["on"+i].call(n,t),(n=9===n.nodeType?n.parentWindow:n.parentNode)&&!t.cancelBubble;);}return!0},document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.dispatchEvent(new e("DOMContentLoaded",{bubbles:!0}))}))),this.CustomEvent=function(t,n){if(!t)throw Error('TypeError: Failed to construct "CustomEvent": An event name must be provided.');var i;if(n=n||{bubbles:!1,cancelable:!1,detail:null},"createEvent"in document)try{(i=document.createEvent("CustomEvent")).initCustomEvent(t,n.bubbles,n.cancelable,n.detail)}catch(e){(i=document.createEvent("Event")).initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail}else(i=new Event(t,n)).detail=n&&n.detail||null;return i},CustomEvent.prototype=Event.prototype}).call("object"===("undefined"==typeof window?"undefined":t(window))&&window||"object"===("undefined"==typeof self?"undefined":t(self))&&self||"object"===(void 0===e?"undefined":t(e))&&e||{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){"use strict";t.exports={class:e("./lib/class")}},{"./lib/class":5}],5:[function(e,t,n){"use strict";function o(e){return(e.match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}function a(e){return e.getAttribute&&e.getAttribute("class")||""}t.exports={hasClass:function(e,t){var n=" "+t+" ";return 1===e.nodeType&&-1<(" "+o(a(e))+" ").indexOf(n)},addClass:function(e,t){var n=o(a(e)).split(" ");-1===n.indexOf(t)&&(n.push(t),e.setAttribute("class",n.join(" ")))},removeClass:function(e,t){var n=o(a(e)).split(" "),i=n.indexOf(t);-1<i&&(n.splice(i,1),e.setAttribute("class",n.join(" ")))}}},{}],6:[function(e,v,t){(function(e){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w="Expected a function",i=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,t="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e,u="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,d=t||u||Function("return this")(),h=Object.prototype.toString,g=Math.max,y=Math.min,_=function(){return d.Date.now()};function p(i,o,e){var a,s,r,l,c,u,d=0,h=!1,p=!1,t=!0;if("function"!=typeof i)throw new TypeError(w);function f(e){var t=a,n=s;return a=s=void 0,d=e,l=i.apply(n,t)}function v(e){var t=e-u;return void 0===u||o<=t||t<0||p&&r<=e-d}function b(){var e,t,n=_();if(v(n))return m(n);c=setTimeout(b,(t=o-((e=n)-u),p?y(t,r-(e-d)):t))}function m(e){return c=void 0,t&&a?f(e):(a=s=void 0,l)}function n(){var e,t=_(),n=v(t);if(a=arguments,s=this,u=t,n){if(void 0===c)return d=e=u,c=setTimeout(b,o),h?f(e):l;if(p)return c=setTimeout(b,o),f(u)}return void 0===c&&(c=setTimeout(b,o)),l}return o=x(o)||0,E(e)&&(h=!!e.leading,p="maxWait"in e,r=p?g(x(e.maxWait)||0,o):r,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==c&&clearTimeout(c),a=u=s=c=void(d=0)},n.flush=function(){return void 0===c?l:m(_())},n}function E(e){var t=n(e);return e&&("object"==t||"function"==t)}function f(e){return"symbol"==n(e)||(t=e)&&"object"==n(t)&&h.call(e)==o;var t}function x(e){if("number"==typeof e)return e;if(f(e))return i;var t;if(E(e)&&(e=E(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=r.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?i:+e}v.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(w);return E(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),p(e,t,{leading:i,maxWait:t,trailing:o})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){"use strict";e("wolfy87-eventemitter");function i(e){this.depth=0,this.direction=null,this.previousDepth=0,this.previousDirection=null,this.directionChangeLocation=null,this.pixelsSinceDirectionChange=null,this.scrollId=null,this.eventEmitter=e}var o=e("lodash.throttle");i.prototype.handleScroll=o(function(e){var t=this;this.scrollId&&clearTimeout(this.scrollId),this.depth=window.scrollY||window.pageYOffset,this.direction=this.previousDepth<this.depth?"down":"up",this.previousDirection!==this.direction?(this.directionChangeLocation=this.depth,this.pixelsSinceDirectionChange=0):this.pixelsSinceDirectionChange=this.depth-this.directionChangeLocation,this.previousDepth=this.depth,this.previousDirection=this.direction;var n={e:e,depth:this.depth,direction:this.direction,sinceDirectionChange:Math.abs(this.pixelsSinceDirectionChange)};this.eventEmitter.emit("winscroll",n),this.scrollId=setTimeout(function(){t.eventEmitter.emit("winscroll:done",n)},300)},10),t.exports=i},{"lodash.throttle":6,"wolfy87-eventemitter":9}],8:[function(e,t,n){"use strict";e("custom-event-polyfill");var i=e("lodash.throttle");t.exports=function(e){var n=e?e+":winresize:done":"winresize:done";window.addEventListener("resize",i(function(e){var t=new CustomEvent(n,e);window.dispatchEvent(t)},300))}},{"custom-event-polyfill":3,"lodash.throttle":6}],9:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){}function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}var s,l,c;s="undefined"!=typeof window?window:{},l=i.prototype,c=s.EventEmitter,l.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},l.flattenListeners=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n].listener);return t},l.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},l.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!==r(t))&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"===r(t);for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},l.on=o("addListener"),l.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},l.once=o("addOnceListener"),l.defineEvent=function(e){return this.getListeners(e),this},l.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},l.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&-1!==(n=a(o[i],t))&&o[i].splice(n,1);return this},l.off=o("removeListener"),l.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},l.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},l.manipulateListeners=function(e,t,n){var i,o,a=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!==r(t)||t instanceof RegExp)for(i=n.length;i--;)a.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?a.call(this,i,o):s.call(this,i,o));return this},l.removeEvent=function(e){var t,n=r(e),i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},l.removeAllListeners=o("removeEvent"),l.emitEvent=function(e,t){var n,i,o,a,s=this.getListenersAsObject(e);for(a in s)if(s.hasOwnProperty(a))for(n=s[a].slice(0),o=0;o<n.length;o++)!0===(i=n[o]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},l.trigger=o("emitEvent"),l.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},l.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},l._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},l._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return s.EventEmitter=c,i},"function"==typeof define&&define.amd?define(function(){return i}):"object"===(void 0===t?"undefined":r(t))&&t.exports?t.exports=i:s.EventEmitter=i},{}],10:[function(e,t,n){"use strict";var i=e("../../lib/date-formatter");t.exports=Backbone.Model.extend({initialize:function(e,t){Backbone.Model.prototype.initialize.call(this,e,t),this.attributes.timeAgo=this.makeNiceDate(this.attributes.publish_date)},makeNiceDate:function(e){return new i(e).timeAgo()}})},{"../../lib/date-formatter":32}],11:[function(e,t,n){"use strict";var r=e("../../lib/date-formatter");t.exports=Backbone.Model.extend({initialize:function(e,t){Backbone.Model.prototype.initialize.call(this,e,t),this.attributes.nice_start=this.makeNiceDate(this.attributes.start_date,this.attributes.end_date)},makeNiceDate:function(e,t){var n,i,o,a=new r(e+" 00:00"),s=a=a.event();return t&&e!==t&&(n=(n=new r(t+" 00:00")).event(),i=a.split(" "),o=n.split(" "),s=i.shift()===o.shift()?s+" - "+o.pop():s+" - "+n),s}})},{"../../lib/date-formatter":32}],12:[function(e,t,n){"use strict";var i={HubArticle:e("../models/HubArticle"),HubEvent:e("../models/HubEvent")};t.exports=Backbone.Model.extend({url:"/wp/wp-admin/admin-ajax.php",parse:function(e){if(e.success){var t=e.response;return t.callout&&(t.callout=new Backbone.Model(t.callout)),t.articles=new Backbone.Collection(t.articles.map(function(e){return new i.HubArticle(e)})),t.events=new Backbone.Collection(t.events.map(function(e){return new i.HubEvent(e)})),t}return null}})},{"../models/HubArticle":10,"../models/HubEvent":11}],13:[function(e,t,n){"use strict";t.exports=Backbone.View.extend({el:".modal-overlay",events:{click:"closeAllModals"},initialize:function(){$("body").on("keydown",this.evaluateKeyDown.bind(this))},evaluateKeyDown:function(e){27===(e.charCode?e.charCode:e.keyCode)&&this.closeAllModals()},closeAllModals:function(){vent.trigger("modal:closeall")}})},{}],14:[function(e,t,n){"use strict";var i=e("accessible-modal"),o=e("breakpoints"),a=e("js-utils").class,s={TabList:e("./TabListView"),MenuDialog:e("./MenuDialogView")};t.exports=Backbone.View.extend({el:"#bbMainNav",menu:"Main",events:{"click .hamburger":"hamburgerClicked"},menuStyle:null,initialize:function(e){this.options=e||{},this.body=document.getElementsByTagName("body")[0],$("body").on("click",".main-nav-overlay",this.close.bind(this)),this.accessibleModal=new i,this.render()},render:function(){var e=new s.MenuDialog({el:this.$el.find(".center")});new s.TabList({el:this.$el.find(".tablist"),panels:this.$el.find(".tabpanel-set"),dialog:e,model:this.model}).on("menu:open",this.open,this),vent.on("menu:close",this.close,this)},open:function(){a.hasClass(this.body,"main-nav-open")||(this.accessibleModal.saveFocus($(":focus")),a.addClass(this.body,"main-nav-open"),$("body").on("keydown.mainmenu",this.evaluateKeyDown.bind(this)),this.setMenuStyle(),window.addEventListener("winresize:done",this.setMenuStyle.bind(this)))},close:function(e){e&&e.preventDefault(),a.removeClass(this.body,"main-nav-open");var t=this;setTimeout(function(){vent.trigger("menu:deactivate"),t.accessibleModal.returnFocus()},150),$("body").off("keydown.mainmenu"),window.removeEventListener("winresize:done",this.setMenuStyle.bind(this))},setMenuStyle:function(){var e="hand"===o.getWidth()||"hand"===o.getHeight()?"mobile":"nonmobile";null!==this.menuStyle&&this.menuStyle===e||(this.menuStyle=e,"mobile"===this.menuStyle?$("#tabpanel-search .close-box-x").focus():$(".tablist a").first().focus())},evaluateKeyDown:function(e){var t=e.charCode?e.charCode:e.keyCode;if(27===t)this.close(e);else{if(9!==t)return;vent.trigger("menu:tabpress",e)}},hamburgerClicked:function(e){e.preventDefault(),vent.trigger("menu:open:menu"),"hand"!==o.getWidth()&&"hand"!==o.getHeight()||$("#tabpanel-search .close-box-x").focus()}})},{"./MenuDialogView":15,"./TabListView":17,"accessible-modal":1,breakpoints:2,"js-utils":4}],15:[function(e,t,n){"use strict";t.exports=Backbone.View.extend({activate:function(e){this.$el.attr("aria-label",e).attr("aria-describedby","aria-description-menu").attr("role","dialog")},deactivate:function(){this.$el.removeAttr("aria-label").removeAttr("aria-describedby").removeAttr("role")}})},{}],16:[function(e,t,n){"use strict";var i={toggle:e("../../../templates/section-nav-toggle.html")};t.exports=Backbone.View.extend({className:"display-nav closed",template:i.toggle,events:{click:"onClick"},initialize:function(){this.render()},onClick:function(){this.$el.find(".display-nav").toggleClass("closed"),this.$el.find("ul").toggleClass("closed")},render:function(){return this.$el.prepend(this.template()),this}})},{"../../../templates/section-nav-toggle.html":37}],17:[function(e,t,n){"use strict";var i={"tabpanel-menu":e("./menu/MenuTabView"),"tabpanel-news-events":e("./news_events/NewsAndEventsTabView"),"tabpanel-search":e("./search/SearchTabView")};t.exports=Backbone.View.extend({active:null,initialize:function(e){this.panels=e.panels,this.dialog=e.dialog,vent.on("menu:deactivate",this.deactivateActive,this),this.render()},render:function(){for(var e=this.el.querySelectorAll("li > a"),t=0;t<e.length;t++)this.createTab($(e[t]))},createTab:function(e){var t=e.attr("aria-controls"),n=this.panels.find("#"+t);new i[t]({el:e,panel:n,dialog:this.dialog,model:this.model}).on("menu:trigger:clicked",this.onTabClicked,this)},onTabClicked:function(e){this.active&&this.deactivateActive(),this.trigger("menu:open"),e.activate(),this.active=e},deactivateActive:function(){this.active&&(this.active.deactivate(),this.active=null)}})},{"./menu/MenuTabView":20,"./news_events/NewsAndEventsTabView":28,"./search/SearchTabView":30}],18:[function(e,t,n){"use strict";t.exports=Backbone.View.extend({menu:"Main",events:{click:"onClick"},initialize:function(e){this.panelEl=e.panel,this.dialog=e.dialog,this.render()},render:function(){return this.panel=new this.panelView({el:this.panelEl,model:this.model}),this},activate:function(){this.$el.attr("aria-selected","true"),this.dialog.activate("Tab panel widget container"),this.panel.activate()},deactivate:function(){this.$el.removeAttr("aria-selected"),this.dialog.deactivate(),this.panel.deactivate()},onClick:function(e){e&&e.preventDefault(),this.trigger("menu:trigger:clicked",this)}})},{}],19:[function(e,t,n){"use strict";var i=e("accessible-modal"),o=e("breakpoints");t.exports=Backbone.View.extend({menu:"Main",initialFocus:".close-box-x",focusable:["button:not([disabled])",".tab a[href]",".parent-level > a[href]",".open a[href]","input:not([disabled])",".ga-suggestion-set a[href]",".newsevents-container a[href]",".social-links a[href]"],events:{"click .close":"close"},initialize:function(){this.accessibleModal=new i(this.focusable),this.render()},render:function(){return this},close:function(){vent.trigger("menu:close")},activate:function(){this.$el.removeAttr("aria-hidden"),this.$el.attr("aria-expanded",!0),vent.on("menu:tabpress",this.trapTab,this),this.accessibleModal.setInitialFocus(this.$el.find(this.initialFocus))},deactivate:function(){this.$el.attr("aria-hidden",!0),this.$el.removeAttr("aria-expanded"),vent.off("menu:tabpress")},trapTab:function(e){var t="hand"===o.getWidth()||"hand"===o.getHeight()?$(".main-nav .tabpanel-set"):$(".main-nav .tablist, .main-nav .actions").add(this.$el);this.accessibleModal.trapTab(t,e)}})},{"accessible-modal":1,breakpoints:2}],20:[function(e,t,n){"use strict";var i={Tab:e("../TabView"),MenuTabpanel:e("./MenuTabpanelView")};t.exports=i.Tab.extend({panelView:i.MenuTabpanel,initialize:function(e){vent.on("menu:open:menu",this.onClick,this),i.Tab.prototype.initialize.call(this,e)}})},{"../TabView":18,"./MenuTabpanelView":21}],21:[function(e,t,n){"use strict";var i={Tabpanel:e("../TabpanelView")};t.exports=i.Tabpanel.extend({panelName:"Menu",events:{"click .close":"close","click .toggle-section":"subnavToggleClicked"},subnavToggleClicked:function(e){e.preventDefault();var t=$(e.target),n=t;t.hasClass("toggle-section")||(n=t.closest(".toggle-section"));var i=n.find("i"),o=n.find(".visuallyhidden");this.toggleSubNav(i,n,o)},toggleSubNav:function(e,t,n){t.closest("li").toggleClass("open"),e.toggleClass("fa-minus-square-o fa-plus-square-o");var i="",i=e.hasClass("fa-minus-square-o")?n.text().replace("Open","Close"):n.text().replace("Close","Open");n.text(i)}})},{"../TabpanelView":19}],22:[function(e,t,n){"use strict";var i={HubContentSet:e("./HubContentSetView"),HubArticle:e("./HubArticleView")};t.exports=i.HubContentSet.extend({view:i.HubArticle,additionalClasses:"hub-articles",collectionName:"articles",data:{title:"Recent News",more:"More news",link:"https://hub.jhu.edu",style:"light"}})},{"./HubArticleView":23,"./HubContentSetView":24}],23:[function(e,t,n){"use strict";var i={HubContent:e("./HubContentView")},o={teaser:e("../../../../templates/newsevents/article-teaser.html")};t.exports=i.HubContent.extend({type:"article",template:o.teaser})},{"../../../../templates/newsevents/article-teaser.html":34,"./HubContentView":25}],24:[function(e,t,n){"use strict";var i={loading:e("../../../../templates/newsevents/loading.html")};t.exports=Backbone.View.extend({className:"collection content-loading",template:i.loading,initialize:function(){this.$el.append(this.template(this.data)),this.loadInto=this.$el.find(".load-into"),this.model.on("newsevents:loaded",this.render,this)},append:function(e){var t=new this.view({model:e});this.loadInto.append(t.render().el)},render:function(){var e=this.model.get(this.collectionName);return e?e.each(this.append.bind(this)):this.loadInto.append("<p>Sorry, we are unable to display this content.</p>"),this.$el.find(".loading").remove(),this.$el.removeClass("content-loading").addClass(this.additionalClasses),this}})},{"../../../../templates/newsevents/loading.html":36}],25:[function(e,t,n){"use strict";var i=e("js-utils").class;t.exports=Backbone.View.extend({className:"item",render:function(){return this.$el.append(this.template(this.model.toJSON())),i.addClass(this.el,"hub-"+this.type),this}})},{"js-utils":4}],26:[function(e,t,n){"use strict";var i={HubContentSet:e("./HubContentSetView"),HubEvent:e("./HubEventView")};t.exports=i.HubContentSet.extend({view:i.HubEvent,additionalClasses:"hub-events",collectionName:"events",data:{title:"Upcoming Events",more:"More events",link:"https://hub.jhu.edu/events",style:"light"}})},{"./HubContentSetView":24,"./HubEventView":27}],27:[function(e,t,n){"use strict";var i={HubContent:e("./HubContentView")},o={teaser:e("../../../../templates/newsevents/event-teaser.html")};t.exports=i.HubContent.extend({type:"event",template:o.teaser})},{"../../../../templates/newsevents/event-teaser.html":35,"./HubContentView":25}],28:[function(e,t,n){"use strict";var i={Tab:e("../TabView"),NewsAndEventsTabpanel:e("./NewsAndEventsTabpanelView")};t.exports=i.Tab.extend({panelView:i.NewsAndEventsTabpanel})},{"../TabView":18,"./NewsAndEventsTabpanelView":29}],29:[function(e,t,n){"use strict";var i={HubArticles:e("./HubArticleSetView"),HubEvents:e("./HubEventSetView"),Tabpanel:e("../TabpanelView")};t.exports=i.Tabpanel.extend({panelName:"News and Events",render:function(){i.Tabpanel.prototype.render.call(this);var e=this.$el.find(".newsevents-container"),t=new i.HubArticles({model:this.model});e.append(t.el);var n=new i.HubEvents({model:this.model});e.append(n.el)}})},{"../TabpanelView":19,"./HubArticleSetView":22,"./HubEventSetView":26}],30:[function(e,t,n){"use strict";var i={Tab:e("../TabView"),SearchTabpanel:e("./SearchTabpanelView")};t.exports=i.Tab.extend({panelView:i.SearchTabpanel})},{"../TabView":18,"./SearchTabpanelView":31}],31:[function(e,t,n){"use strict";var i={Tabpanel:e("../TabpanelView")};t.exports=i.Tabpanel.extend({panelName:"Search",initialFocus:"input[name=q]"})},{"../TabpanelView":19}],32:[function(e,t,n){"use strict";function i(e){var t,n,i,o,a,s,r,l;"number"==typeof e?(t=1e3*e,this.dateObject=new Date(t)):this.dateObject=(n=e.split(" "),i=n[0].split("-"),o=n[1].split(":"),new Date(i[0],i[1]-1,i[2],o[0],o[1])),this.date={timstamp:t,dayOfMonth:this.dateObject.getDate(),monthName:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}[this.dateObject.getMonth()+1],year:this.dateObject.getFullYear(),hour:(r=this.dateObject,12<(l=r.getHours())?l-12:0===l?12:l),minutes:(a=this.dateObject,(s=a.getMinutes())<10?"0"+s.toString():s.toString()),ampm:this.dateObject.getHours()<12?"am":"pm"}}i.prototype.event=function(){return this.date.monthName+" "+this.date.dayOfMonth},i.prototype.timeAgo=function(e){return e=e||new Date,function(e,t){t=t||new Date;var n,i=Math.floor((t-e)/1e3);return 1<=(n=Math.floor(i/31536e3))?1===n?"a year":n+" years":1<=(n=Math.floor(i/2592e3))?1===n?"a month":n+" months":1<=(n=Math.floor(i/86400))?1===n?"a day":n+" days":1<=(n=Math.floor(i/3600))?1===n?"an hour":n+" hours":1<=(n=Math.floor(i/60))?1===n?"a minute":n+" minutes":1===(n=Math.floor(i))?"a second":n+" seconds"}(this.dateObject,e)+" ago"},t.exports=i},{}],33:[function(e,t,n){"use strict";var i,o,a,s;e("../../../../shared/src/assets/js/lib/dependency-check")("backbone","jquery","underscore","lodash")&&(new(e("../../../../shared/src/assets/js/lib/scroll-watcher"))(window.eventEmitter),i=e("window-resize-watcher"),o=e("./app/views/navigation/SectionNavToggle"),a={NewEvents:e("./app/models/NewsEvents")},s={MainNavigation:e("./app/views/navigation/MainNavigationView"),ModalOverlay:e("./app/views/ModalOverlay"),SectionNavToggle:e("./app/views/navigation/SectionNavToggle")},$(function(){new i;var e=$(".section-nav").get(0);void 0!==e&&new o({el:e});var t=new a.NewEvents;new s.MainNavigation({model:t}),new s.ModalOverlay,t.fetch({data:{action:"news_events"}}).done(function(){t.trigger("newsevents:loaded")}).fail(function(e,t,n){0!==e.status&&e.status})}))},{"../../../../shared/src/assets/js/lib/dependency-check":38,"../../../../shared/src/assets/js/lib/scroll-watcher":39,"./app/models/NewsEvents":12,"./app/views/ModalOverlay":13,"./app/views/navigation/MainNavigationView":14,"./app/views/navigation/SectionNavToggle":16,"window-resize-watcher":8}],34:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<a href="'+(null==(__t=url)?"":__t)+'" class="media force" title="'+(null==(__t=headline)?"":__t)+'">\n\n  ';var thumbnail=_embedded.image_thumbnail?_embedded.image_thumbnail[0]:null,thumbnailImage,thumbnailAlt;thumbnail&&(thumbnailImage=thumbnail.sizes.square_thumbnail,thumbnailAlt=thumbnail.title,__p+='\n\n  <img class="media-object pull-left" src="'+(null==(__t=thumbnailImage)?"":__t)+'" alt="'+(null==(__t=thumbnailAlt)?"":__t)+'" />\n\n  '),__p+='\n\n  <div class="media-body">\n    <p class="media-heading">'+(null==(__t=headline)?"":__t)+'</p>\n    <p class="date"><i class="fa fa-clock-o" aria-hidden="true"></i><span class="visuallyhidden">Published</span> '+(null==(__t=timeAgo)?"":__t)+"</p>\n  </div>\n\n</a>\n"}return __p}},{}],35:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='<a href="'+(null==(__t=url)?"":__t)+'" class="media force" title="'+(null==(__t=name)?"":__t)+'">\n\n  ';var thumbnail=_embedded.image_thumbnail?_embedded.image_thumbnail[0]:null,thumbnailImage,thumbnailAlt;thumbnail&&(thumbnailImage=thumbnail.sizes.square_thumbnail,thumbnailAlt=thumbnail.title,__p+='\n\n  <img class="media-object pull-left" src="'+(null==(__t=thumbnailImage)?"":__t)+'" alt="'+(null==(__t=thumbnailAlt)?"":__t)+'" />\n\n  '),__p+='\n\n  <div class="media-body">\n    <p class="media-heading">'+(null==(__t=name)?"":__t)+'</p>\n    <p class="date"><i class="fa fa-calendar" aria-hidden="true"></i> '+(null==(__t=nice_start)?"":__t)+"</p>\n  </div>\n\n</a>\n"}return __p}},{}],36:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="","undefined"==typeof style&&(style="dark"),__p+='\n\n<h4><a href="'+(null==(__t=link)?"":__t)+'">'+(null==(__t=title)?"":__t)+'</a></h4>\n\n<div class="load-into"></div>\n\n<div class="loading '+(null==(__t=style)?"":__t)+'">\n  <i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"></i><span class="visuallyhidden">Loading</span>\n</div>\n\n<div class="more"><a href="'+(null==(__t=link)?"":__t)+'">'+(null==(__t=more)?"":__t)+"</a></div>\n";return __p}},{}],37:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="display-nav closed">\n\n  <span>Section Menu</span>\n  \n  <button class="open" aria-label="Open section menu">\n    <i class="fa fa-fw fa-chevron-down" aria-hidden="true"></i>\n  </button>\n  \n  <button class="close" aria-label="Close section menu">\n    <i class="fa fa-fw fa-times" aria-hidden="true"></i>\n  </button>\n\n</div>\n\n';return __p}},{}],38:[function(e,t,n){"use strict";t.exports=function(){for(var e,t=!0,n=arguments.length,i=0;i<n;i++)("backbone"===(e=arguments[i])?"undefined"!=typeof Backbone:"jquery"===e?"undefined"!=typeof $:"lodash"===e?"undefined"!=typeof lodash:"underscore"!==e||"undefined"!=typeof _)||(t=!1);return t}},{}],39:[function(e,t,n){"use strict";function a(e){0<e?(s.addClass(document.body,"scrolled"),s.removeClass(document.body,"unscrolled")):(s.addClass(document.body,"unscrolled"),s.removeClass(document.body,"scrolled"))}var s=e("js-utils").class,r=e("scroll-watcher"),l="hide-extras",c="show-extras";t.exports=function(e){var t,n;t=new r(e),n=t.handleScroll.bind(t),window.addEventListener("scroll",n),window.addEventListener("touchmove",n);var i=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;a(i);var o=s.hasClass(document.body,"scrolled");!o||o&&i<200?s.addClass(document.body,c):s.addClass(document.body,l),e.addListener("winscroll",function(e){a(e.depth)}),window.eventEmitter.addListener("winscroll",function(e){var t=e.depth,n=e.direction;e.sinceDirectionChange;s.hasClass(document.body,c)?200<t&&"down"===n&&(s.addClass(document.body,l),s.removeClass(document.body,c)):t<200&&(s.addClass(document.body,c),s.removeClass(document.body,l))})}},{"js-utils":4,"scroll-watcher":7}]},{},[33]);