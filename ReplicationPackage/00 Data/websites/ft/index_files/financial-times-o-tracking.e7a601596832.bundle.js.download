(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-o-tracking"],{"00714c93":function(e,t,n){"use strict";function r(){var e=new window.XMLHttpRequest;return{name:"xhr",send:function(t,n){e.open("POST",t,!0),e.withCredentials=!0,e.setRequestHeader("Content-type","application/json"),e.send(n)},complete:function(t){e.onerror=function(){t(this)},e.onload=function(){e.status>=200&&e.status<300?t():t("Incorrect response: "+e.status)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.xhr=r,t.default=void 0;var o=r;t.default=o},"0887d82c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateConfig=t.event=t.page=t.init=t.link=t.tracking=t.default=void 0;var r=g(n("4f317c41")),o=g(n("1cfe9588")),a=g(n("6be2d8c7")),i=g(n("f1b1acb7")),u=g(n("517634a8")),c=g(n("0cbc56d8")),s=g(n("b4bf6f47")),f=g(n("a09a7426")),l=g(n("9caaec1a")),d=g(n("3e12a51d"));function g(e){return e&&e.__esModule?e:{default:e}}function v(){this.version="2.0.0",this.source="o-tracking",this.api_key="qUb9maKfKbtpRsdp0p2J7uWxRPGJEP",this.initialised=!1}v.prototype.developer=function(e){e?r.default.set("developer",!0):(r.default.destroy("developer",null),r.default.destroy("no_send",null))},v.prototype.destroy=function(){this.developer(!1),this.initialised=!1,r.default.destroy("config"),r.default.destroy("page_sent")},v.prototype.toString=function(){return"oTracking version 2.0.0"},v.prototype.event=u.default,v.prototype.page=c.default,v.prototype.view=d.default,v.prototype.click=s.default,v.prototype.link={init:function(e){return v.prototype.click.init("link")}},v.prototype.utils=f.default,v.prototype.getRootID=l.default.getRootID,v.prototype.init=function(e){if(this.initialised)return this;if(e=e||{},Boolean(this._getDeclarativeConfigElement())&&(e=this._getDeclarativeConfig(e)),0===Object.keys(e).length&&e.constructor===Object)return null;r.default.set("version",this.version),r.default.set("source",this.source),r.default.set("api_key",this.api_key),r.default.set("page_sent",!1);var t=!!e&&e.cookieDomain;return o.default.init(!1,t),this.updateConfig(e),a.default.init(e.session),i.default.init(),this.event.init(),this.page.init(),this.initialised=!0,this},v.prototype.updateConfig=function(e){var t=r.default.get("config")||{};t=this.utils.merge(t,e),r.default.set("config",t),t.developer&&(this.developer(t.developer),t.noSend&&r.default.set("no_send",!0)),t.user&&t.user.user_id&&o.default.setUser(t.user.user_id),i.default.setDomain()},v.prototype._getDeclarativeConfigElement=function(){return document.querySelector("script[data-o-tracking-config]")},v.prototype._getDeclarativeConfig=function(e){var t,n,r=this._getDeclarativeConfigElement();if(!r)return!1;t=r.textContent||r.innerText||r.innerHTML;try{n=JSON.parse(t)}catch(e){var o=new Error('Invalid JSON configuration syntax, check validity for o-tracking configuration: "'+e.message+'"');throw this.utils.broadcast("oErrors","log",{error:o.message,info:{module:"o-tracking"}}),o}for(var a in n)n.hasOwnProperty(a)&&(e[a]=e[a]||n[a]);return e};var h=new v;t.tracking=h;var p=h.link;t.link=p;var m=h.init.bind(h);t.init=m;var y=h.page.bind(h);t.page=y;var b=h.event.bind(h);t.event=b;var w=h.updateConfig.bind(h);t.updateConfig=w,document.addEventListener("o.DOMContentLoaded",(function e(){h.init(),document.removeEventListener("o.DOMContentLoaded",e)}));var k=h;t.default=k},"0cbc56d8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.page=u,t.default=void 0;var r=i(n("9caaec1a")),o=i(n("a09a7426")),a=i(n("4f317c41"));function i(e){return e&&e.__esModule?e:{default:e}}a.default.set("page_viewed",!1);function u(e,t){e=o.default.merge({category:"page",action:"view",context:{url:document.URL,referrer:document.referrer},async:!0},{context:e}),a.default.get("page_viewed")&&r.default.setRootID(),r.default.track(e,t),a.default.set("page_viewed",!0),o.default.triggerPage()}function c(e){u(e.detail)}u.init=function(){o.default.addEvent(window,"oTracking.page",c)};var s=u;t.default=s},"10e45b30":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Store=t.default=void 0;var r,o=(r=n("a09a7426"))&&r.__esModule?r:{default:r};var a=function(e,t){var n,r="o-tracking";if(o.default.isUndefined(e)){var a=new Error("You must specify a name for the store.");throw o.default.broadcast("oErrors","log",{error:a.message,info:{module:"o-tracking"}}),a}if(this.config=o.default.merge({storage:"best",expires:31536e7},t),this.data=null,this.storageKey=this.config.hasOwnProperty("nameOverride")?this.config.nameOverride:[r,e].join("_"),this.storage=function(e,t){var n=r+"_InternalTest";if("cookie"!==e.storage)try{if(t.localStorage&&(t.localStorage.setItem(n,"TEST"),"TEST"===t.localStorage.getItem(n)))return t.localStorage.removeItem(n),{_type:"localStorage",load:function(e){return t.localStorage.getItem(e)},save:function(e,n){return t.localStorage.setItem(e,n)},remove:function(e){return t.localStorage.removeItem(e)}}}catch(e){o.default.broadcast("oErrors","log",{error:e.message,info:{module:"o-tracking"}})}function a(e){e+="=";var n,r,a=t.document.cookie.split(";");for(n=0;n<a.length;n+=1)if(0===(r=a[n].replace(/^\s+|\s+$/g,"")).indexOf(e))return o.default.decode(r.substring(e.length,r.length));return null}function i(n,r,a){var i,u,c="";o.default.is(a,"number")&&((i=new Date).setTime(i.getTime()+a),c="expires="+i.toGMTString()+";"),u=o.default.encode(n)+"="+o.default.encode(r)+";"+c+"path=/;"+(e.domain?"domain=."+e.domain+";":""),t.document.cookie=u}function u(e){i(e,"",-1)}return i(n,"TEST"),"TEST"===a(n)?(u(n),{_type:"cookie",load:a,save:i,remove:u}):{_type:"none",load:function(){},save:function(){},remove:function(){}}}(this.config,window),n=this.storage.load(this.storageKey))try{this.data=JSON.parse(n)}catch(e){o.default.broadcast("oErrors","log",{error:e.message,module:"o-tracking"}),this.data=n}return this};t.Store=a,a.prototype.read=function(){return this.data},a.prototype.write=function(e){return this.data=e,this.storage.save(this.storageKey,"string"==typeof this.data?this.data:JSON.stringify(this.data),this.config.expires),this},a.prototype.destroy=function(){return this.data=null,this.storage.remove(this.storageKey),this};var i=a;t.default=i},"1cc17586":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=t.default=void 0;var r=a(n("a09a7426")),o=a(n("10e45b30"));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){if(r.default.isUndefined(e)){var t=new Error("You must specify a name for the queue.");throw r.default.broadcast("oErrors","log",{error:t.message,info:{module:"o-tracking"}}),t}return this.queue=[],this.storage=new o.default(e),this.storage.read()&&(this.queue=this.storage.read()),this};t.Queue=i,i.prototype.all=function(){if(0===this.queue.length)return[];for(var e=[],t=0;t<this.queue.length;t+=1)e.push(this.queue[t].item);return e},i.prototype.first=function(){return 0===this.queue.length?null:this.queue[0].item},i.prototype.last=function(){return 0===this.queue.length?null:this.queue.slice(-1)[0].item},i.prototype.add=function(e){var t,n=this;function o(e){n.queue.push({created_at:(new Date).valueOf(),item:e})}if(r.default.is(e,"object")&&e.constructor.toString().match(/array/i))for(t=0;t<e.length;t+=1)o(e[t]);else o(e);return n},i.prototype.replace=function(e){if(r.default.is(e,"object")&&e.constructor.toString().match(/array/i))return this.queue=[],this.add(e).save(),this;var t=new Error("Argument invalid, must be an array.");throw r.default.broadcast("oErrors","log",{error:t.message,info:{module:"o-tracking"}}),t},i.prototype.shift=function(){if(0===this.queue.length)return null;var e=this.queue.shift().item;return this.save(),e},i.prototype.save=function(){return this.storage.write(this.queue),this};var u=i;t.default=u},"1cfe9588":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=c,t.setUser=s,t.userID=l,t.destroy=f,t.default=void 0;var r,o,a=u(n("a09a7426")),i=u(n("10e45b30"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n={storage:"cookie",name:"spoor-id",nameOverride:"spoor-id",value:null,domain:location.hostname.match(/^(?:.+\.)?ft\.com$/)?"ft.com":null};t&&(n.domain=t);var r=(o=new i.default(n.name,n)).read();return r||(r=e),s(r)}function s(e){return(r=e)||(r=a.default.guid()),o.write(r),r}function f(){o.destroy()}function l(){return r}var d={init:c,setUser:s,userID:l,destroy:f};t.default=d},"3e12a51d":function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.default=void 0;var a=c(n("9caaec1a")),i=c(n("e3731389")),u=c(n("a09a7426"));function c(e){return e&&e.__esModule?e:{default:e}}var s=["componentContentId","type","subtype","component"],f=function(e,t,n){var r,o=(0,i.default)(t),a=o.trace,c=o.customContext;if(n.getContextData){if("function"!=typeof n.getContextData)throw new Error("opts.getContextData is not a function");var f=n.getContextData(t);if("object"!=typeof f)throw new Error("opts.getContextData function should return {Object}");r=u.default.whitelistProps(f,s)}else r={};r.domPathTokens=a,r.url=window.document.location.href||null,u.default.assignIfUndefined(c,r),e.context=r},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.IntersectionObserver){var t=e.selector||"[data-o-tracking-view]",n=r(document.querySelectorAll(t));if(n.length){var o=new IntersectionObserver(i,{threshold:[1]});n.forEach((function(e){return o.observe(e)}))}}else console.warn('o-tracking: Unable to track component view events as "window.IntersectionObserver" is not supported.');function i(t){t.forEach((function(t){if(t.isIntersecting||t.intersectionRatio>0){var n={action:e.action||"view",category:e.category||"component"},r=t.target;f(n,r,e),a.default.track(n),o.unobserve(r)}}))}};t.init=l;var d={init:l};t.default=d},"4f317c41":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.destroy=a,t.get=t.set=t.default=void 0;var r={};function o(e){if(void 0===e)return e;switch(Object.prototype.toString.call(e)){case"[object Object]":return JSON.parse(JSON.stringify(e));case"[object Array]":return[].slice.call(e);default:return e}}function a(e){delete r[e]}var i=function(e,t){r[e]=o(t)};t.set=i;var u=function(e){return o(r[e])};t.get=u;var c={set:i,get:u,destroy:a};t.default=c},"517634a8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.event=i,t.default=void 0;var r=a(n("9caaec1a")),o=a(n("a09a7426"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(o.default.is(e.detail.category)||o.default.is(e.detail.action)){throw o.default.broadcast("oErrors","log",{error:"Missing category or action values",info:{module:"o-tracking"}}),"Missing category or action values"}var n=o.default.merge({category:"event",action:"generic",context:{}},{category:e.detail.category,action:e.detail.action,context:e.detail});delete n.context.category,delete n.context.action;var a=function(e){var t=e.target||e.srcElement;if(t&&t.getAttribute("data-o-component"))return t}(e);a&&(n.context.component_name=a.getAttribute("data-o-component"),n.context.component_id=n.context.component_id||function(e){var t=function(e){var t=[];for(;e;)t.push(e),e=e.parentElement;return t}(e);if(void 0===t)return;var n=t[0],r=function(e){var t=e.parentElement;if(t){for(var r=0;r<t.childNodes.length;r++)if(t.childNodes[r]===n)return r;return-1}return 0}(n);return function(e){var t,n=e.length,r=1^n,o=0;for(;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;break;case 2:r^=(255&e.charCodeAt(o+1))<<8;break;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}(t.reduceRight((function(e,t){if(!t.nodeName)return e+" - "+t.constructor.name+"\n";var n=t.nodeName.toLowerCase();return 0===n.indexOf("#")?e+"<"+n+">":e+"<"+n+' id="'+(t.id||"")+'">'}),"")+"_siblingIndex="+r)}(a)),r.default.track(n,t)}i.init=function(){o.default.addEvent(window,"oTracking.event",i)};var u=i;t.default=u},"6be2d8c7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.session=c,t.init=s,t.default=void 0;var r,o=i(n("a09a7426")),a=i(n("10e45b30"));function i(e){return e&&e.__esModule?e:{default:e}}var u={storage:"best",name:"session",expires:18e5};function c(){var e,t=r.read(),n=!1;if(t){var a=(new Date).valueOf();parseInt(t.expiry,10)>=a&&(e=t.value)}return e||(e=o.default.guid(),n=!0),function(e){var t=new Date;t.setTime(t.getTime()+r.config.expires),r.write({value:e,expiry:t.valueOf()})}(e),{id:e,isNew:n}}function s(e){o.default.is(e,"string")&&(e={name:e}),o.default.isUndefined(e)&&(e={});var t=o.default.merge(u,e);return"cookie"===t.storage&&e.name&&(t.nameOverride=t.name),r=new a.default(t.name,t),c()}var f={init:s,session:c};t.default=f},"6d73a2e3":function(e,t,n){"use strict";n.r(t);var r={config:{}};function o(e){if(void 0===e)return e;switch(Object.prototype.toString.call(e)){case"[object Object]":return JSON.parse(JSON.stringify(e));case"[object Array]":return[].slice.call(e);default:return e}}function a(e){delete r[e]}var i=function(e,t){r[e]=o(t)},u=function(e){return o(r[e])},c=0,s=Math.pow(36,4),f=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},l=function(){return f((Math.random()*s<<0).toString(36),4)},d=function(){return c=c<s?c:0,++c-1},g=function(){var e=(new Date).getTime().toString(36),t=g.fingerprint(),n=l()+l();return"c"+e+f(d().toString(36),4)+t+n};function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}g.slug=function(){var e=(new Date).getTime().toString(36),t=g.fingerprint().slice(0,1)+g.fingerprint().slice(-1),n=l().slice(-2),r=d().toString(36).slice(-4);return e.slice(-2)+r+t+n},g.globalCount=function(){var e=function(){var e=0;for(var t in window)e++;return e}();return g.globalCount=function(){return e},e},g.fingerprint=function(){return f((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+g.globalCount().toString(36),4)};var m=[];function y(){if(u("config").test&&window.console){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var a=o[r];window.console.log(a)}}}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined";return typeof e===t}function w(e,t){var n,r,o;for(n in t||(t=e,e={}),t)r=e[n],e!==(o=t[n])&&null!=o&&(e[n]=r!==Object(r)||b(r,"function")?o:w(r,o));return e}function k(e){return window.encodeURIComponent?window.encodeURIComponent(e):window.escape(e)}function _(e){return window.decodeURIComponent?window.decodeURIComponent(e):window.unescape(e)}function O(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function S(e,t,n){n=n||{};try{window.dispatchEvent(new CustomEvent(e+"."+t,{detail:n,bubbles:!0}))}catch(e){}}function x(e){return document.cookie.match(e)&&""!==RegExp.$1&&"null"!==RegExp.$1?RegExp.$1:null}function E(e,t){var n,r={},o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;e[a]&&(r[a]=e[a])}}catch(e){o.e(e)}finally{o.f()}return r}function A(e){return"string"==typeof e?e.trim():e}function j(e,t){for(var n in e)t[n]?console.warn("You can't set a custom property called ".concat(n)):t[n]=e[n]}function C(e){var t=new WeakSet,n=[];return function e(r,o){if(t.has(r))n.push(o);else if(r instanceof Object){t.add(r);for(var a=0,i=Object.entries(r);a<i.length;a++){var u=v(i[a],2),c=u[0],s=u[1];if(s instanceof Object)e(s,Array.isArray(r)?"".concat(o,"[").concat(c,"]"):"".concat(o,".").concat(c))}}}(e,""),n}function I(e){var t=new WeakSet;return Boolean(function e(n){if(t.has(n))return!0;if(n instanceof Object){t.add(n);for(var r=0,o=Object.values(n);r<o.length;r++){var a=o[r];if(a instanceof Object&&e(a))return!0}}}(e))}var T,q,D,M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="o-tracking";if("string"!=typeof e||""===e){var r=new Error("You must specify a name for the store.");throw S("oErrors","log",{error:r.message,info:{module:"o-tracking"}}),r}function o(e){e+="=";var t,n,r=window.document.cookie.split(";");for(t=0;t<r.length;t+=1)if(0===(n=r[t].replace(/^\s+|\s+$/g,"")).indexOf(e))return _(n.substring(e.length,n.length));return null}function a(e,n,r){var o,a="";b(r,"number")&&((o=new Date).setTime(o.getTime()+r),a="expires="+o.toUTCString()+";");var i=k(e)+"="+k(n)+";"+a+"path=/;"+(t.domain?"domain=."+t.domain+";":"");window.document.cookie=i}function i(e){a(e,"",-1)}this.config=Object.assign({},t),this.data=null,this.storageKey=this.config.nameOverride?this.config.nameOverride:[n,e].join("_"),this.storage={_type:"localStorage",load:function(e){return window.localStorage.getItem(e)},save:function(e,t){return window.localStorage.setItem(e,t)},remove:function(e){return i(e),window.localStorage.removeItem(e)}};var u=this.storage.load(this.storageKey);if(u)try{this.data=JSON.parse(u)}catch(e){S("oErrors","log",{error:e.message,module:"o-tracking"}),this.data=u}var c=o(this.storageKey);if(c)try{if("spoor-id"===this.storageKey)this.data=c;else{var s=JSON.parse(c);this.data?Object.assign(this.data,s):this.data=s;for(var f=0,l=Object.keys(s);f<l.length;f++){var d=l[f];"spoor-id"!==d&&i(d)}}}catch(e){S("oErrors","log",{error:e.message,module:"o-tracking"}),this.data=u}return this};function R(e,t){var n={storage:"cookie",name:"spoor-id",nameOverride:"spoor-id",value:null,domain:location.hostname.match(/^(?:.+\.)?ft\.com$/)?"ft.com":null};t&&(n.domain=t);var r=(q=new M(n.name,n)).read();return r||(r=e),P(r)}function P(e){return(T=e)||(T=g()),q.write(T),T}function N(){return T}M.prototype.read=function(){return this.data},M.prototype.write=function(e){var t;if(this.data=e,"string"==typeof this.data)t=this.data;else{if(I(this.data)){var n="o-tracking does not support circular references in the analytics data.\nPlease remove the circular references in the data.\nHere are the paths in the data which are circular:\n"+JSON.stringify(C(this.data),void 0,4);throw new Error(n)}t=JSON.stringify(this.data)}return this.storage.save(this.storageKey,t),this},M.prototype.destroy=function(){return this.data=null,this.storage.remove(this.storageKey),this};var U={storage:"best",name:"session",expires:18e5};function L(){var e,t=D.read(),n=!1;if(t){var r=(new Date).valueOf();parseInt(t.expiry,10)>=r&&(e=t.value)}return e||(e=g(),n=!0),function(e){var t=new Date;t.setTime(t.getTime()+D.config.expires),D.write({value:e,expiry:t.valueOf()})}(e),{id:e,isNew:n}}function J(e){b(e,"string")&&(e={name:e}),b(e)&&(e={});var t=w(U,e);return"cookie"===t.storage&&e.name&&(t.nameOverride=t.name),D=new M(t.name,t),L()}function K(e){if(b(e)){var t=new Error("You must specify a name for the queue.");throw S("oErrors","log",{error:t.message,info:{module:"o-tracking"}}),t}return this.queue=[],this.storage=new M(e),this.storage.read()&&(this.queue=this.storage.read()),this}function B(){var e=new window.XMLHttpRequest;return{name:"xhr",send:function(t,n){e.open("POST",t,!0),e.withCredentials=!0,e.setRequestHeader("Content-type","application/json"),e.send(n)},complete:function(t){e.onerror=function(){t(this)},e.onload=function(){e.status>=200&&e.status<300?t():t("Incorrect response: "+e.status)}}}}function $(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return{name:"sendBeacon",send:function(n,r){navigator.sendBeacon(n,r)?e():t(new Error("Failed to send beacon event: "+r.toString()))},complete:function(e){e&&n.then(e,e)}}}function F(){var e=new Image(1,1);return{name:"image",send:function(t,n){t=t.replace("https://spoor-api.ft.com/ingest","https://spoor-api.ft.com/px.gif"),e.src=t+(t.indexOf("?")>-1?"&":"?")+"data="+k(n)},complete:function(t){e.addEventListener?(e.addEventListener("error",t),e.addEventListener("load",(function(){return t()}))):(e.attachEvent("onerror",t),e.attachEvent("onload",(function(){return t()})))}}}K.prototype.all=function(){if(0===this.queue.length)return[];for(var e=[],t=0;t<this.queue.length;t+=1)e.push(this.queue[t].item);return e},K.prototype.first=function(){return 0===this.queue.length?null:this.queue[0].item},K.prototype.last=function(){return 0===this.queue.length?null:this.queue.slice(-1)[0].item},K.prototype.add=function(e){var t,n=this;function r(e){n.queue.push({created_at:(new Date).valueOf(),item:e})}if(b(e,"object")&&e.constructor.toString().match(/array/i))for(t=0;t<e.length;t+=1)r(e[t]);else r(e);return n},K.prototype.replace=function(e){if(Array.isArray(e))return this.queue=[],this.add(e).save(),this;var t=new Error("Argument invalid, must be an array.");throw S("oErrors","log",{error:t.message,info:{module:"o-tracking"}}),t},K.prototype.shift=function(){if(0===this.queue.length)return null;var e=this.queue.shift().item;return this.save(),e},K.prototype.save=function(){return this.storage.write(this.queue),this};var H,V,X={};function Y(e){if(X.transport)return X.transport;switch(e){case"xhr":return B;case"sendBeacon":return $;case"image":return F;default:return}}function Q(){return Boolean(navigator.sendBeacon)}function W(e,t){var n=e.queueTime,r=(new Date).getTime()-n,o=Q()?Y("sendBeacon")():window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest?Y("xhr")():Y("image")(),a=e.callback,i=w(u("config")&&u("config").system||{},{version:u("version"),source:u("source"),transport:o.name});if(u("config").test?i.is_live=!1:i.is_live=!0,e=w({system:i},e),r>1e3&&r<31104e6&&(e.time=e.time||{},e.time.offset=r),delete e.callback,delete e.type,delete e.queueTime,y("user_callback",a),y("PreSend",e),I(e)){var c="o-tracking does not support circular references in the analytics data.\nPlease remove the circular references in the data.\nHere are the paths in the data which are circular:\n"+JSON.stringify(C(e),void 0,4);throw new Error(c)}var s=JSON.stringify(e);o.complete((function(r){b(a,"function")&&(a.call(e),y("calling user_callback")),r?(e.queueTime=n,H.add(e).save(),S("oErrors","log",{error:r.message,info:{module:"o-tracking"}})):t&&t()}));var f="https://spoor-api.ft.com/ingest";e&&e.category&&e.action&&(f+="?type=".concat(e.category,":").concat(e.action)),o.send(f,s)}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=H.all();if(t.length>200){var n={};t.forEach((function(e){var t=[e.category,e.action].join(":");Object.prototype.hasOwnProperty.call(n,t)||(n[t]=0),n[t]+=1})),H.replace([]),H.add({category:"o-tracking",action:"queue-bug",context:{url:document.URL,queue_length:t.length,counts:n,storage:H.storage.storage._type}})}var r=function(){G(),e()},o=H.shift();return o?W(o,r):e()}function z(e){!function(e){e.queueTime=(new Date).getTime(),Q()?W(e):H.add(e).save(),y("AddedToQueue",H)}(e),G()}function Z(){return H=new K("requests"),O(window,"online",(function(){G()})),G(),H}function ee(){return V=g()}function te(){return V||ee(),V}var ne={setRootID:ee,getRootID:te,track:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=L(),r={callback:t,context:{id:e.id||g(),root_id:te()},user:{ft_session:x(/FTSession=([^;]+)/),ft_session_s:x(/FTSession_s=([^;]+)/)},device:{spoor_session:n.id,spoor_session_is_new:n.isNew,spoor_id:N()}},o=u("config")||{};return o.context&&w(r.context,o.context),o.user&&w(r.user,o.user),o.device&&w(r.device,o.device),w(r,e),y("Core.Track",r),z(r),r}};function re(e,t){if(b(e.detail.category)||b(e.detail.action)){throw S("oErrors","log",{error:"Missing category or action values",info:{module:"o-tracking"}}),"Missing category or action values"}var n=w({category:"event",action:"generic",context:{}},{category:e.detail.category,action:e.detail.action,context:e.detail});delete n.context.category,delete n.context.action;var r=function(e){var t=e.target||e.srcElement;if(t&&t.getAttribute("data-o-component"))return t}(e);r&&(n.context.component_name=r.getAttribute("data-o-component"),n.context.component_id=n.context.component_id||function(e){var t=function(e){var t=[];for(;e;)t.push(e),e=e.parentElement;return t}(e);if(void 0===t)return;var n=t[0],r=function(e){var t=e.parentElement;if(t){for(var r=0;r<t.childNodes.length;r++)if(t.childNodes[r]===n)return r;return-1}return 0}(n);return function(e){var t,n=e.length,r=1^n,o=0;for(;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;break;case 2:r^=(255&e.charCodeAt(o+1))<<8;break;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}(t.reduceRight((function(e,t){if(!t.nodeName)return e+" - "+t.constructor.name+"\n";var n=t.nodeName.toLowerCase();return 0===n.indexOf("#")?e+"<"+n+">":e+"<"+n+' id="'+(t.id||"")+'">'}),"")+"_siblingIndex="+r)}(r)),ne.track(n,t)}re.init=function(){O(window,"oTracking.event",re)},i("page_has_already_been_viewed",!1);function oe(e,t){e=w({category:"page",action:"view",context:{url:document.URL,referrer:document.referrer}},{context:e}),u("page_has_already_been_viewed")&&ne.setRootID(),i("page_has_already_been_viewed",!0),function(e){var t=JSON.parse(JSON.stringify(e));return delete t.context.id,delete t.context.root_id,!!function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){var r=t.length;if(r!==n.length)return!1;for(var o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();var a=Object.keys(t),i=a.length;if(i!==Object.keys(n).length)return!1;for(var u=i;0!=u--;)if(!Object.prototype.hasOwnProperty.call(n,a[u]))return!1;for(var c=i;0!=c--;){var s=a[c];if(!e(t[s],n[s]))return!1}return!0}}(ae,t)||(ae=t,!1)}(e)?u("config").test&&console.warn("A page event has already been sent for this page, refusing to send a duplicate page event."):(ne.track(e,t),function(){for(var e=0;e<m.length;e++)m[e]()}())}var ae={};function ie(e){oe(e.detail)}oe.init=function(){O(window,"oTracking.page",ie)};var ue=n("e6b19cd3");function ce(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fe,le=function(e,t,n){var r=Array.from(e.querySelectorAll(n)),o=r.findIndex((function(e){return e===t}));if(-1!==o)return{siblings:r.length,position:o}},de=["nodeName","className","id","href","text","role"],ge=function(e){var t,n={},r=ce(de);try{for(r.s();!(t=r.n()).done;){var o=t.value,a=e[o]||e.getAttribute(o)||e.hasAttribute(o);void 0!==a&&(n[o]="boolean"==typeof a?a:A(a))}}catch(e){r.e(e)}finally{r.f()}return n},ve=function(e,t){return e.filter((function(e){return e.name.match(/^data-trackable|^data-o-|^aria-/i)})).forEach((function(e){t[e.name]=e.value})),t},he=function(e,t,n){var r={};return n&&de.forEach((function(e){void 0!==t[e]&&"id"!==e&&(r[e]=t[e])})),e.filter((function(e){return e.name.match(/^data-trackable-context-/i)})).forEach((function(e){r[e.name.replace("data-trackable-context-","")]=e.value})),r};function pe(e){for(var t=document,n=e,r=n.getAttribute("data-trackable")?'[data-trackable="'.concat(n.getAttribute("data-trackable"),'"]'):n.nodeName,o=[],a={};e&&e!==t;){var i=ge(e),u=Array.from(e.attributes),c=ve(u,i);c["data-trackable"]&&(c=Object.assign(c,le(e,n,r))),o.push(c),j(he(u,i,e===n),a),e=e.parentNode}return{trace:o,customContext:a}}function me(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be=["ctrlKey","altKey","shiftKey","metaKey"],we=function(e){return function(t,n){if("true"!==n.getAttribute("data-o-tracking-do-not-track")){var r=function(e){var t,n={},r=me(be);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(e[o])try{n[o]=A(e[o])}catch(e){console.log(e)}}}catch(e){r.e(e)}finally{r.f()}return n}(t),o=pe(n),a=o.trace,i=o.customContext;r.domPathTokens=a,r.url=window.document.location.href||null,r.source_id=ne.getRootID(),j(i,r),e.context=r;var c=w(u("config"),e);ne.track(c)}}};var ke={init:function(e,t){t=t||'a, button, input, [role="button"]';var n={action:"click",category:e||"o-tracking"};(fe=fe||new ue.default(document.body)).on("click",t,we(n),!0),function e(t){var n=t.shift();n&&ne.track(n,(function(){return e(t)}))}(new K("clicks"))}};function _e(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se=["componentContentId","type","subtype","component"],xe=function(e,t,n){var r,o=pe(t),a=o.trace,i=o.customContext;if(n.getContextData){if("function"!=typeof n.getContextData)throw new Error("opts.getContextData is not a function");var u=n.getContextData(t);if("object"!=typeof u)throw new Error("opts.getContextData function should return {object}");r=E(u,Se)}else r={};r.domPathTokens=a,r.url=window.document.location.href||null,j(i,r),e.context=r},Ee={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.IntersectionObserver){var t=e.selector||"[data-o-tracking-view]",n=_e(document.querySelectorAll(t));if(n.length){var r=new IntersectionObserver(o,{threshold:[1]});n.forEach((function(e){return r.observe(e)}))}}else console.warn('o-tracking: Unable to track component view events as "window.IntersectionObserver" is not supported.');function o(t){t.forEach((function(t){if(t.isIntersecting||t.intersectionRatio>0){var n={action:e.action||"view",category:e.category||"component"},o=t.target;xe(n,o,e),ne.track(n),r.unobserve(o)}}))}}},Ae=re.init,je=oe.init;function Ce(e){var t=u("config")||{};t=w(t,e),i("config",t),t.user&&t.user.user_id&&P(t.user.user_id)}function Ie(){return document.querySelector("script[data-o-tracking-config]")}function Te(e){var t,n=Ie();if(!n)return!1;t=n.textContent||n.innerText||n.innerHTML;try{var r=JSON.parse(t);Object.assign(e,r)}catch(e){var o=new Error('Invalid JSON configuration syntax, check validity for o-tracking configuration: "'+e.message+'"');throw S("oErrors","log",{error:o.message,info:{module:"o-tracking"}}),o}return e}var qe={initialised:!1,version:"4.0.1",updateConfig:Ce,source:"o-tracking",destroy:function(){qe.initialised=!1,a("config"),a("page_sent")},toString:function(){return"oTracking version 4.0.1"},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(qe.initialised)return qe;var t=Boolean(Ie());if(t&&(e=Te(e)),0===Object.keys(e).length&&e.constructor===Object)return null;i("version","4.0.1"),i("source","o-tracking"),i("page_sent",!1);var n=e?e.cookieDomain:"";return R("",n),Ce(e),J(e.session),Z(),Ae(),je(),qe.initialised=!0,qe},click:ke,event:re,page:oe,view:Ee,getRootID:ne.getRootID},De=qe;document.addEventListener("o.DOMContentLoaded",(function e(){De.init(),document.removeEventListener("o.DOMContentLoaded",e)}));t.default=De},"6d73a2e3":function(e,t,n){"use strict";n.r(t);var r={config:{}};function o(e){if(void 0===e)return e;switch(Object.prototype.toString.call(e)){case"[object Object]":return JSON.parse(JSON.stringify(e));case"[object Array]":return[].slice.call(e);default:return e}}function a(e){delete r[e]}var i=function(e,t){r[e]=o(t)},u=function(e){return o(r[e])},c=0,s=Math.pow(36,4),f=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},l=function(){return f((Math.random()*s<<0).toString(36),4)},d=function(){return c=c<s?c:0,++c-1},g=function(){var e=(new Date).getTime().toString(36),t=g.fingerprint(),n=l()+l();return"c"+e+f(d().toString(36),4)+t+n};function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}g.slug=function(){var e=(new Date).getTime().toString(36),t=g.fingerprint().slice(0,1)+g.fingerprint().slice(-1),n=l().slice(-2),r=d().toString(36).slice(-4);return e.slice(-2)+r+t+n},g.globalCount=function(){var e=function(){var e=0;for(var t in window)e++;return e}();return g.globalCount=function(){return e},e},g.fingerprint=function(){return f((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+g.globalCount().toString(36),4)};var m=[];function y(){if(u("config").test&&window.console){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var a=o[r];window.console.log(a)}}}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined";return typeof e===t}function w(e,t){var n,r,o;for(n in t||(t=e,e={}),t)r=e[n],e!==(o=t[n])&&null!=o&&(e[n]=r!==Object(r)||b(r,"function")?o:w(r,o));return e}function k(e){return window.encodeURIComponent?window.encodeURIComponent(e):window.escape(e)}function _(e){return window.decodeURIComponent?window.decodeURIComponent(e):window.unescape(e)}function O(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function S(e,t,n){n=n||{};try{window.dispatchEvent(new CustomEvent(e+"."+t,{detail:n,bubbles:!0}))}catch(e){}}function x(e){return document.cookie.match(e)&&""!==RegExp.$1&&"null"!==RegExp.$1?RegExp.$1:null}function E(e,t){var n,r={},o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;e[a]&&(r[a]=e[a])}}catch(e){o.e(e)}finally{o.f()}return r}function A(e){return"string"==typeof e?e.trim():e}function j(e,t){for(var n in e)t[n]?console.warn("You can't set a custom property called ".concat(n)):t[n]=e[n]}function C(e){var t=new WeakSet,n=[];return function e(r,o){if(t.has(r))n.push(o);else if(r instanceof Object){t.add(r);for(var a=0,i=Object.entries(r);a<i.length;a++){var u=v(i[a],2),c=u[0],s=u[1];if(s instanceof Object)e(s,Array.isArray(r)?"".concat(o,"[").concat(c,"]"):"".concat(o,".").concat(c))}}}(e,""),n}function I(e){var t=new WeakSet;return Boolean(function e(n){if(t.has(n))return!0;if(n instanceof Object){t.add(n);for(var r=0,o=Object.values(n);r<o.length;r++){var a=o[r];if(a instanceof Object&&e(a))return!0}}}(e))}var T,q,D,M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="o-tracking";if("string"!=typeof e||""===e){var r=new Error("You must specify a name for the store.");throw S("oErrors","log",{error:r.message,info:{module:"o-tracking"}}),r}function o(e){e+="=";var t,n,r=window.document.cookie.split(";");for(t=0;t<r.length;t+=1)if(0===(n=r[t].replace(/^\s+|\s+$/g,"")).indexOf(e))return _(n.substring(e.length,n.length));return null}function a(e,n,r){var o,a="";b(r,"number")&&((o=new Date).setTime(o.getTime()+r),a="expires="+o.toUTCString()+";");var i=k(e)+"="+k(n)+";"+a+"path=/;"+(t.domain?"domain=."+t.domain+";":"");window.document.cookie=i}function i(e){a(e,"",-1)}this.config=Object.assign({},t),this.data=null,this.storageKey=this.config.nameOverride?this.config.nameOverride:[n,e].join("_"),this.storage={_type:"localStorage",load:function(e){return window.localStorage.getItem(e)},save:function(e,t){return window.localStorage.setItem(e,t)},remove:function(e){return i(e),window.localStorage.removeItem(e)}};var u=this.storage.load(this.storageKey);if(u)try{this.data=JSON.parse(u)}catch(e){S("oErrors","log",{error:e.message,module:"o-tracking"}),this.data=u}var c=o(this.storageKey);if(c)try{if("spoor-id"===this.storageKey)this.data=c;else{var s=JSON.parse(c);this.data?Object.assign(this.data,s):this.data=s;for(var f=0,l=Object.keys(s);f<l.length;f++){var d=l[f];"spoor-id"!==d&&i(d)}}}catch(e){S("oErrors","log",{error:e.message,module:"o-tracking"}),this.data=u}return this};function R(e,t){var n={storage:"cookie",name:"spoor-id",nameOverride:"spoor-id",value:null,domain:location.hostname.match(/^(?:.+\.)?ft\.com$/)?"ft.com":null};t&&(n.domain=t);var r=(q=new M(n.name,n)).read();return r||(r=e),P(r)}function P(e){return(T=e)||(T=g()),q.write(T),T}function N(){return T}M.prototype.read=function(){return this.data},M.prototype.write=function(e){var t;if(this.data=e,"string"==typeof this.data)t=this.data;else{if(I(this.data)){var n="o-tracking does not support circular references in the analytics data.\nPlease remove the circular references in the data.\nHere are the paths in the data which are circular:\n"+JSON.stringify(C(this.data),void 0,4);throw new Error(n)}t=JSON.stringify(this.data)}return this.storage.save(this.storageKey,t),this},M.prototype.destroy=function(){return this.data=null,this.storage.remove(this.storageKey),this};var U={storage:"best",name:"session",expires:18e5};function L(){var e,t=D.read(),n=!1;if(t){var r=(new Date).valueOf();parseInt(t.expiry,10)>=r&&(e=t.value)}return e||(e=g(),n=!0),function(e){var t=new Date;t.setTime(t.getTime()+D.config.expires),D.write({value:e,expiry:t.valueOf()})}(e),{id:e,isNew:n}}function J(e){b(e,"string")&&(e={name:e}),b(e)&&(e={});var t=w(U,e);return"cookie"===t.storage&&e.name&&(t.nameOverride=t.name),D=new M(t.name,t),L()}function K(e){if(b(e)){var t=new Error("You must specify a name for the queue.");throw S("oErrors","log",{error:t.message,info:{module:"o-tracking"}}),t}return this.queue=[],this.storage=new M(e),this.storage.read()&&(this.queue=this.storage.read()),this}function B(){var e=new window.XMLHttpRequest;return{name:"xhr",send:function(t,n){e.open("POST",t,!0),e.withCredentials=!0,e.setRequestHeader("Content-type","application/json"),e.send(n)},complete:function(t){e.onerror=function(){t(this)},e.onload=function(){e.status>=200&&e.status<300?t():t("Incorrect response: "+e.status)}}}}function $(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return{name:"sendBeacon",send:function(n,r){navigator.sendBeacon(n,r)?e():t(new Error("Failed to send beacon event: "+r.toString()))},complete:function(e){e&&n.then(e,e)}}}function F(){var e=new Image(1,1);return{name:"image",send:function(t,n){t=t.replace("https://spoor-api.ft.com/ingest","https://spoor-api.ft.com/px.gif"),e.src=t+(t.indexOf("?")>-1?"&":"?")+"data="+k(n)},complete:function(t){e.addEventListener?(e.addEventListener("error",t),e.addEventListener("load",(function(){return t()}))):(e.attachEvent("onerror",t),e.attachEvent("onload",(function(){return t()})))}}}K.prototype.all=function(){if(0===this.queue.length)return[];for(var e=[],t=0;t<this.queue.length;t+=1)e.push(this.queue[t].item);return e},K.prototype.first=function(){return 0===this.queue.length?null:this.queue[0].item},K.prototype.last=function(){return 0===this.queue.length?null:this.queue.slice(-1)[0].item},K.prototype.add=function(e){var t,n=this;function r(e){n.queue.push({created_at:(new Date).valueOf(),item:e})}if(b(e,"object")&&e.constructor.toString().match(/array/i))for(t=0;t<e.length;t+=1)r(e[t]);else r(e);return n},K.prototype.replace=function(e){if(Array.isArray(e))return this.queue=[],this.add(e).save(),this;var t=new Error("Argument invalid, must be an array.");throw S("oErrors","log",{error:t.message,info:{module:"o-tracking"}}),t},K.prototype.shift=function(){if(0===this.queue.length)return null;var e=this.queue.shift().item;return this.save(),e},K.prototype.save=function(){return this.storage.write(this.queue),this};var H,V,X={};function Y(e){if(X.transport)return X.transport;switch(e){case"xhr":return B;case"sendBeacon":return $;case"image":return F;default:return}}function Q(){return Boolean(navigator.sendBeacon)}function W(e,t){var n=e.queueTime,r=(new Date).getTime()-n,o=Q()?Y("sendBeacon")():window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest?Y("xhr")():Y("image")(),a=e.callback,i=w(u("config")&&u("config").system||{},{version:u("version"),source:u("source"),transport:o.name});if(u("config").test?i.is_live=!1:i.is_live=!0,e=w({system:i},e),r>1e3&&r<31104e6&&(e.time=e.time||{},e.time.offset=r),delete e.callback,delete e.type,delete e.queueTime,y("user_callback",a),y("PreSend",e),I(e)){var c="o-tracking does not support circular references in the analytics data.\nPlease remove the circular references in the data.\nHere are the paths in the data which are circular:\n"+JSON.stringify(C(e),void 0,4);throw new Error(c)}var s=JSON.stringify(e);o.complete((function(r){b(a,"function")&&(a.call(e),y("calling user_callback")),r?(e.queueTime=n,H.add(e).save(),S("oErrors","log",{error:r.message,info:{module:"o-tracking"}})):t&&t()}));var f="https://spoor-api.ft.com/ingest";e&&e.category&&e.action&&(f+="?type=".concat(e.category,":").concat(e.action)),o.send(f,s)}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=H.all();if(t.length>200){var n={};t.forEach((function(e){var t=[e.category,e.action].join(":");Object.prototype.hasOwnProperty.call(n,t)||(n[t]=0),n[t]+=1})),H.replace([]),H.add({category:"o-tracking",action:"queue-bug",context:{url:document.URL,queue_length:t.length,counts:n,storage:H.storage.storage._type}})}var r=function(){G(),e()},o=H.shift();return o?W(o,r):e()}function z(e){!function(e){e.queueTime=(new Date).getTime(),Q()?W(e):H.add(e).save(),y("AddedToQueue",H)}(e),G()}function Z(){return H=new K("requests"),O(window,"online",(function(){G()})),G(),H}function ee(){return V=g()}function te(){return V||ee(),V}var ne={setRootID:ee,getRootID:te,track:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=L(),r={callback:t,context:{id:e.id||g(),root_id:te()},user:{ft_session:x(/FTSession=([^;]+)/),ft_session_s:x(/FTSession_s=([^;]+)/)},device:{spoor_session:n.id,spoor_session_is_new:n.isNew,spoor_id:N()}},o=u("config")||{};return o.context&&w(r.context,o.context),o.user&&w(r.user,o.user),o.device&&w(r.device,o.device),w(r,e),y("Core.Track",r),z(r),r}};function re(e,t){if(b(e.detail.category)||b(e.detail.action)){throw S("oErrors","log",{error:"Missing category or action values",info:{module:"o-tracking"}}),"Missing category or action values"}var n=w({category:"event",action:"generic",context:{}},{category:e.detail.category,action:e.detail.action,context:e.detail});delete n.context.category,delete n.context.action;var r=function(e){var t=e.target||e.srcElement;if(t&&t.getAttribute("data-o-component"))return t}(e);r&&(n.context.component_name=r.getAttribute("data-o-component"),n.context.component_id=n.context.component_id||function(e){var t=function(e){var t=[];for(;e;)t.push(e),e=e.parentElement;return t}(e);if(void 0===t)return;var n=t[0],r=function(e){var t=e.parentElement;if(t){for(var r=0;r<t.childNodes.length;r++)if(t.childNodes[r]===n)return r;return-1}return 0}(n);return function(e){var t,n=e.length,r=1^n,o=0;for(;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;break;case 2:r^=(255&e.charCodeAt(o+1))<<8;break;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}(t.reduceRight((function(e,t){if(!t.nodeName)return e+" - "+t.constructor.name+"\n";var n=t.nodeName.toLowerCase();return 0===n.indexOf("#")?e+"<"+n+">":e+"<"+n+' id="'+(t.id||"")+'">'}),"")+"_siblingIndex="+r)}(r)),ne.track(n,t)}re.init=function(){O(window,"oTracking.event",re)},i("page_has_already_been_viewed",!1);function oe(e,t){e=w({category:"page",action:"view",context:{url:document.URL,referrer:document.referrer}},{context:e}),u("page_has_already_been_viewed")&&ne.setRootID(),i("page_has_already_been_viewed",!0),function(e){var t=JSON.parse(JSON.stringify(e));return delete t.context.id,delete t.context.root_id,!!function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){var r=t.length;if(r!==n.length)return!1;for(var o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();var a=Object.keys(t),i=a.length;if(i!==Object.keys(n).length)return!1;for(var u=i;0!=u--;)if(!Object.prototype.hasOwnProperty.call(n,a[u]))return!1;for(var c=i;0!=c--;){var s=a[c];if(!e(t[s],n[s]))return!1}return!0}}(ae,t)||(ae=t,!1)}(e)?u("config").test&&console.warn("A page event has already been sent for this page, refusing to send a duplicate page event."):(ne.track(e,t),function(){for(var e=0;e<m.length;e++)m[e]()}())}var ae={};function ie(e){oe(e.detail)}oe.init=function(){O(window,"oTracking.page",ie)};var ue=n("1063c397");function ce(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fe,le=function(e,t,n){var r=Array.from(e.querySelectorAll(n)),o=r.findIndex((function(e){return e===t}));if(-1!==o)return{siblings:r.length,position:o}},de=["nodeName","className","id","href","text","role"],ge=function(e){var t,n={},r=ce(de);try{for(r.s();!(t=r.n()).done;){var o=t.value,a=e[o]||e.getAttribute(o)||e.hasAttribute(o);void 0!==a&&(n[o]="boolean"==typeof a?a:A(a))}}catch(e){r.e(e)}finally{r.f()}return n},ve=function(e,t){return e.filter((function(e){return e.name.match(/^data-trackable|^data-o-|^aria-/i)})).forEach((function(e){t[e.name]=e.value})),t},he=function(e,t,n){var r={};return n&&de.forEach((function(e){void 0!==t[e]&&"id"!==e&&(r[e]=t[e])})),e.filter((function(e){return e.name.match(/^data-trackable-context-/i)})).forEach((function(e){r[e.name.replace("data-trackable-context-","")]=e.value})),r};function pe(e){for(var t=document,n=e,r=n.getAttribute("data-trackable")?'[data-trackable="'.concat(n.getAttribute("data-trackable"),'"]'):n.nodeName,o=[],a={};e&&e!==t;){var i=ge(e),u=Array.from(e.attributes),c=ve(u,i);c["data-trackable"]&&(c=Object.assign(c,le(e,n,r))),o.push(c),j(he(u,i,e===n),a),e=e.parentNode}return{trace:o,customContext:a}}function me(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be=["ctrlKey","altKey","shiftKey","metaKey"],we=function(e){return function(t,n){if("true"!==n.getAttribute("data-o-tracking-do-not-track")){var r=function(e){var t,n={},r=me(be);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(e[o])try{n[o]=A(e[o])}catch(e){console.log(e)}}}catch(e){r.e(e)}finally{r.f()}return n}(t),o=pe(n),a=o.trace,i=o.customContext;r.domPathTokens=a,r.url=window.document.location.href||null,r.source_id=ne.getRootID(),j(i,r),e.context=r;var c=w(u("config"),e);ne.track(c)}}};var ke={init:function(e,t){t=t||'a, button, input, [role="button"]';var n={action:"click",category:e||"o-tracking"};(fe=fe||new ue.default(document.body)).on("click",t,we(n),!0),function e(t){var n=t.shift();n&&ne.track(n,(function(){return e(t)}))}(new K("clicks"))}};function _e(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se=["componentContentId","type","subtype","component"],xe=function(e,t,n){var r,o=pe(t),a=o.trace,i=o.customContext;if(n.getContextData){if("function"!=typeof n.getContextData)throw new Error("opts.getContextData is not a function");var u=n.getContextData(t);if("object"!=typeof u)throw new Error("opts.getContextData function should return {object}");r=E(u,Se)}else r={};r.domPathTokens=a,r.url=window.document.location.href||null,j(i,r),e.context=r},Ee={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.IntersectionObserver){var t=e.selector||"[data-o-tracking-view]",n=_e(document.querySelectorAll(t));if(n.length){var r=new IntersectionObserver(o,{threshold:[1]});n.forEach((function(e){return r.observe(e)}))}}else console.warn('o-tracking: Unable to track component view events as "window.IntersectionObserver" is not supported.');function o(t){t.forEach((function(t){if(t.isIntersecting||t.intersectionRatio>0){var n={action:e.action||"view",category:e.category||"component"},o=t.target;xe(n,o,e),ne.track(n),r.unobserve(o)}}))}}},Ae=re.init,je=oe.init;function Ce(e){var t=u("config")||{};t=w(t,e),i("config",t),t.user&&t.user.user_id&&P(t.user.user_id)}function Ie(){return document.querySelector("script[data-o-tracking-config]")}function Te(e){var t,n=Ie();if(!n)return!1;t=n.textContent||n.innerText||n.innerHTML;try{var r=JSON.parse(t);Object.assign(e,r)}catch(e){var o=new Error('Invalid JSON configuration syntax, check validity for o-tracking configuration: "'+e.message+'"');throw S("oErrors","log",{error:o.message,info:{module:"o-tracking"}}),o}return e}var qe={initialised:!1,version:"3.1.3",updateConfig:Ce,source:"o-tracking",destroy:function(){qe.initialised=!1,a("config"),a("page_sent")},toString:function(){return"oTracking version 3.1.3"},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(qe.initialised)return qe;var t=Boolean(Ie());if(t&&(e=Te(e)),0===Object.keys(e).length&&e.constructor===Object)return null;i("version","3.1.3"),i("source","o-tracking"),i("page_sent",!1);var n=e?e.cookieDomain:"";return R("",n),Ce(e),J(e.session),Z(),Ae(),je(),qe.initialised=!0,qe},click:ke,event:re,page:oe,view:Ee,getRootID:ne.getRootID},De=qe;document.addEventListener("o.DOMContentLoaded",(function e(){De.init(),document.removeEventListener("o.DOMContentLoaded",e)}));t.default=De},"9caaec1a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRootID=f,t.getRootID=l,t.track=d,t.default=void 0;var r,o=s(n("f1b1acb7")),a=s(n("1cfe9588")),i=s(n("6be2d8c7")),u=s(n("4f317c41")),c=s(n("a09a7426"));function s(e){return e&&e.__esModule?e:{default:e}}function f(){return r=c.default.guid()}function l(){return r||f(),r}function d(e,t){c.default.isUndefined(t)&&(t=function(){});var n=i.default.session(),r={async:!0,callback:t||function(){},context:{id:e.id||c.default.guid(),root_id:l()},user:{passport_id:c.default.getValueFromCookie(/USERID=([0-9]+):/)||c.default.getValueFromCookie(/PID=([0-9]+)\_/),ft_session:c.default.getValueFromCookie(/FTSession=([^;]+)/),ft_session_s:c.default.getValueFromCookie(/FTSession_s=([^;]+)/)},device:{spoor_session:n.id,spoor_session_is_new:n.isNew,spoor_id:a.default.userID()}},s=u.default.get("config")||{};return s.context&&c.default.merge(r.context,s.context),s.user&&c.default.merge(r.user,s.user),s.device&&c.default.merge(r.device,s.device),c.default.merge(r,e),c.default.log("Core.Track",r),o.default.addAndRun(r),r}var g={setRootID:f,getRootID:l,track:d};t.default=g},a09a7426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=u,t.isUndefined=t.is=c,t.merge=s,t.encode=f,t.decode=l,t.addEvent=d,t.broadcast=g,t.onPage=v,t.triggerPage=h,t.getValueFromCookie=p,t.getValueFromUrl=m,t.getValueFromJsVariable=y,t.sanitise=w,t.assignIfUndefined=k,t.whitelistProps=b,Object.defineProperty(t,"guid",{enumerable:!0,get:function(){return o.default}}),t.default=void 0;var r=a(n("4f317c41")),o=a(n("be2f1d10"));function a(e){return e&&e.__esModule?e:{default:e}}var i=[];function u(){if(r.default.get("developer")&&window.console)for(var e=0;e<arguments.length;e++)window.console.log(arguments[e])}function c(e,t){return t||(t="undefined"),typeof e===t}function s(e,t){var n,r,o;for(n in t||(t=e,e={}),t)r=e[n],e!==(o=t[n])&&null!=o&&(e[n]=r!==Object(r)||c(r,"function")?o:s(r,o));return e}function f(e){return window.encodeURIComponent?window.encodeURIComponent(e):window.escape(e)}function l(e){return window.decodeURIComponent?window.decodeURIComponent(e):window.unescape(e)}function d(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function g(e,t,n){n=n||{};try{window.dispatchEvent(new CustomEvent(e+"."+t,{detail:n,bubbles:!0}))}catch(e){}}function v(e){c(e,"function")&&i.push(e)}function h(){for(var e=0;e<i.length;e++)i[e]()}function p(e){return document.cookie.match(e)&&""!==RegExp.$1&&"null"!==RegExp.$1?RegExp.$1:null}function m(e){return document.location.href.match(e)&&""!==RegExp.$1?RegExp.$1:null}function y(e){if("string"!=typeof e)return null;var t,n=e.split("."),r=window;for(t=0;t<n.length;t+=1){if(void 0===r[n[t]])return null;r=r[n[t]]}return""!==r?r:null}function b(e,t){return t.reduce((function(t,n){return Object.assign({},t,e[n]?(r={},o=n,a=e[n],o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r):void 0);var r,o,a}),{})}function w(e){return"string"==typeof e?e.trim():e}function k(e,t){for(var n in e)t[n]?console.warn("You can't set a custom property called ".concat(n)):t[n]=e[n]}var _={log:u,is:c,isUndefined:c,merge:s,encode:f,decode:l,guid:o.default,addEvent:d,broadcast:g,onPage:v,triggerPage:h,getValueFromCookie:p,getValueFromUrl:m,getValueFromJsVariable:y,sanitise:w,assignIfUndefined:k,whitelistProps:b};t.default=_},aaff5802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=u,Object.defineProperty(t,"xhr",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"sendBeacon",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return a.default}}),t.default=void 0;var r=i(n("00714c93")),o=i(n("f9f08965")),a=i(n("d7ae147b"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return this.mock||this[e]}var c={xhr:r.default,sendBeacon:o.default,image:a.default,get:u};t.default=c},b4bf6f47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.default=void 0;var r,o=f(n("1063c397")),a=f(n("1cc17586")),i=f(n("9caaec1a")),u=f(n("a09a7426")),c=f(n("4f317c41")),s=f(n("e3731389"));function f(e){return e&&e.__esModule?e:{default:e}}var l=["ctrlKey","altKey","shiftKey","metaKey"],d=function(e){return function(t,n){if("true"!==n.getAttribute("data-o-tracking-do-not-track")){var o,a=(o=t,l.reduce((function(e,t){try{o[t]&&(e[t]=u.default.sanitise(o[t]))}catch(e){console.log(e)}return e}),{})),f=(0,s.default)(n),d=f.trace,g=f.customContext;a.domPathTokens=d,a.url=window.document.location.href||null,u.default.assignIfUndefined(g,a),e.context=a,function(e){var t=e.context.domPathTokens[0],n=t.href||null,o=t["data-o-tracking-skip-queue"],a=o&&"true"===o.toLowerCase()||!1;n&&n.indexOf(window.document.location.hostname)>-1&&!a?(e.context.source_id=i.default.getRootID(),r.add(e).save()):(e.async=!1,i.default.track(e))}(u.default.merge(c.default.get("config"),e))}}},g=function e(t){var n=r.shift();n&&i.default.track(n,(function(t){e()}))},v=function(e,t){t=t||'a, button, input, [role="button"]';var n={action:"click",category:e||"o-tracking"};new o.default(document.body).on("click",t,d(n),!0),r=new a.default("clicks"),g(),u.default.onPage(g)};t.init=v;var h={init:v};t.default=h},be2f1d10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.api=t.default=void 0;var r=0,o=Math.pow(36,4),a=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},i=function(){return a((Math.random()*o<<0).toString(36),4)},u=function(){return r=r<o?r:0,++r-1},c=function(){var e=(new Date).getTime().toString(36),t=c.fingerprint(),n=i()+i();return"c"+e+a(u().toString(36),4)+t+n};t.api=c,c.slug=function(){var e,t=(new Date).getTime().toString(36),n=c.fingerprint().slice(0,1)+c.fingerprint().slice(-1),r=i().slice(-2);return e=u().toString(36).slice(-4),t.slice(-2)+e+n+r},c.globalCount=function(){var e=function(){var e=0;for(var t in window)e++;return e}();return c.globalCount=function(){return e},e},c.fingerprint=function(){return a((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+c.globalCount().toString(36),4)};var s=c;t.default=s},d7ae147b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.image=a,t.default=void 0;var r,o=(r=n("a09a7426"))&&r.__esModule?r:{default:r};function a(){var e=new Image(1,1);return{name:"image",send:function(t,n){t=t.replace("https://spoor-api.ft.com/ingest","https://spoor-api.ft.com/px.gif"),e.src=t+(t.indexOf("?")>-1?"&":"?")+"data="+o.default.encode(n)},complete:function(t){e.addEventListener?(e.addEventListener("error",t),e.addEventListener("load",(function(){return t()}))):(e.attachEvent("onerror",t),e.attachEvent("onload",(function(){return t()})))}}}var i=a;t.default=i},e3731389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n("a09a7426"))&&r.__esModule?r:{default:r};var a=["nodeName","className","id","href","text","role"],i=function(e,t,n){var r=Array.from(e.querySelectorAll(n)),o=r.findIndex((function(e){return e===t}));if(-1!==o)return{siblings:r.length,position:o}},u=function(e){return a.reduce((function(t,n){return e[n]?t[n]=o.default.sanitise(e[n]):e.getAttribute(n)?t[n]=o.default.sanitise(e.getAttribute(n)):e.hasAttribute(n)&&(t[n]=e.hasAttribute(n)),t}),{})},c=function(e,t){return e.filter((function(e){return e.name.match(/^data-trackable|^data-o-|^aria-/i)})).forEach((function(e){t[e.name]=e.value})),t},s=function(e,t,n){var r={};return n&&a.forEach((function(e){void 0!==t[e]&&"id"!==e&&(r[e]=t[e])})),e.filter((function(e){return e.name.match(/^data-trackable-context-/i)})).forEach((function(e){r[e.name.replace("data-trackable-context-","")]=e.value})),r};var f=function(e){for(var t=document,n=e,r=n.getAttribute("data-trackable")?'[data-trackable="'.concat(n.getAttribute("data-trackable"),'"]'):n.nodeName,a=[],f={};e&&e!==t;){var l=u(e),d=Array.from(e.attributes),g=c(d,l);g["data-trackable"]&&(g=Object.assign(g,i(e,n,r))),a.push(g);var v=s(d,l,e===n);o.default.assignIfUndefined(v,f),e=e.parentNode}return{trace:a,customContext:f}};t.default=f,e.exports=t.default},f1b1acb7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=p,t.setDomain=h,t.getDomain=m,t.add=d,t.run=g,t.addAndRun=v,t.default=void 0;var r=u(n("4f317c41")),o=u(n("a09a7426")),a=u(n("1cc17586")),i=u(n("aaff5802"));function u(e){return e&&e.__esModule?e:{default:e}}var c,s="https://spoor-api.ft.com/px.gif";function f(){return navigator.sendBeacon&&Promise&&(r.default.get("config")||{}).useSendBeacon}function l(e,t){var n=e.queueTime,a=(new Date).getTime()-n,u=f()?i.default.get("sendBeacon")():window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest?i.default.get("xhr")():i.default.get("image")(),l=e.callback,d=r.default.get("config")&&r.default.get("config").system||{},g=o.default.merge(d,{api_key:r.default.get("api_key"),version:r.default.get("version"),source:r.default.get("source"),transport:u.name});e=o.default.merge({system:g},e),a>1e3&&a<31104e6&&(e.time=e.time||{},e.time.offset=a),delete e.callback,delete e.async,delete e.type,delete e.queueTime,o.default.log("user_callback",l),o.default.log("PreSend",e);var v=JSON.stringify(e);u.complete((function(r){if(o.default.is(l,"function")&&(l.call(e),o.default.log("calling user_callback")),r)if(Boolean(window.MSInputMethodContext)&&Boolean(document.documentMode)&&"xhr"===u.name){var a=i.default.get("image")();e.system.transport=[e.system.transport,a.name].join("-"),a.send(h,JSON.stringify(e)),a.complete((function(){t&&t()}))}else e.queueTime=n,c.add(e).save(),o.default.broadcast("oErrors","log",{error:r.message,info:{module:"o-tracking"}});else t&&t()}));var h=s;if(e&&e.category&&e.action){var p="type=".concat(e.category,":").concat(e.action);h=h.indexOf("?")>-1?"".concat(h,"&").concat(p):"".concat(h,"?").concat(p)}r.default.get("developer")&&r.default.get("no_send")||u.send(h,v)}function d(e){e.queueTime=(new Date).getTime(),f()?l(e):c.add(e).save(),o.default.log("AddedToQueue",c)}function g(e){o.default.isUndefined(e)&&(e=function(){});var t=c.all();if(t.length>200){var n={};t.forEach((function(e){var t=[e.category,e.action].join(":");n.hasOwnProperty(t)||(n[t]=0),n[t]+=1})),c.replace([]),c.add({category:"o-tracking",action:"queue-bug",context:{url:document.url,queue_length:t.length,counts:n,storage:c.storage.storage._type}})}var r=c.shift();return r?l(r,(function(){g(),e()})):e()}function v(e){d(e),g()}function h(){r.default.get("config")&&r.default.get("config").server&&(s=r.default.get("config").server)}function p(){return c=new a.default("requests"),h(),o.default.addEvent(window,"online",(function(){g()})),g(),c}function m(){return s}var y={init:p,setDomain:h,getDomain:m,add:d,run:g,addAndRun:v};t.default=y},f9f08965:function(e,t,n){"use strict";function r(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return{name:"sendBeacon",send:function(n,r){navigator.sendBeacon(n,r)?e():t(new Error("Failed to send beacon event: "+r.toString()))},complete:function(e){e&&n.then(e,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.sendBeacon=r,t.default=void 0;var o=r;t.default=o}}]);
//# sourceMappingURL=financial-times-o-tracking.e7a601596832.bundle.js.map