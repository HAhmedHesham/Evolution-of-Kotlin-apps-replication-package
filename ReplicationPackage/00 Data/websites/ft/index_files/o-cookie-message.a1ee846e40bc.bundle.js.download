(window.webpackJsonp=window.webpackJsonp||[]).push([["o-cookie-message"],{"81804e5c":function(e,o,t){"use strict";function n(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.r(o);var s=function(){function e(o,t){var n=this;!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e),null==o&&(o=document.createElement("div"),document.body.append(o)),this.cookieMessageElement=o,t=t||e.getOptionsFromDom(o);for(var s=["acceptUrl","acceptUrlFallback","manageCookiesUrl","consentCookieName"],i=0,a=Object.keys(t);i<a.length;i++){var c=a[i];s.includes(c)&&console.warn("The following o-cookie-message options are deprecated: ".concat(s.join(", "),". ")+"Please speak to the Origami team if you would like to use these options within your project.")}this.options=Object.assign({},e.defaultOptions,t),this.options.theme=this.options.theme?"alternative":null,this.shouldShowCookieMessage()?(this.createCookieMessage(),this.showCookieMessage()):this.removeCookieMessage(),window.addEventListener("pageshow",(function(e){if(!0===e.persisted&&!1===n.shouldShowCookieMessage())return n.removeCookieMessage()}))}var o,t,s;return o=e,s=[{key:"defaultOptions",get:function(){var e="ft.com",o="manage-cookies";/\.ft\.com$/i.test(window.location.hostname)||(e=window.location.hostname.replace(/^(.*?)\./,""),o="cookies");var t=window.location.href;return{theme:null,acceptUrl:"https://consent.".concat(e,"/__consent/consent-record-cookie?cookieDomain=.").concat(e),acceptUrlFallback:"https://consent.".concat(e,"/__consent/consent-record-cookie?redirect=").concat(t,"&cookieDomain=.").concat(e),manageCookiesUrl:"https://cookies.".concat(e,"/preferences/").concat(o,"?redirect=").concat(t,"&cookieDomain=.").concat(e),consentCookieName:"FTCookieConsentGDPR"}}},{key:"getOptionsFromDom",value:function(e){return e instanceof HTMLElement?Object.keys(e.dataset).reduce((function(o,t){if("oComponent"===t)return o;var n=t.replace(/^oCookieMessage(\w)(\w+)$/,(function(e,o,t){return o.toLowerCase()+t})),s=e.dataset[t];try{o[n]=JSON.parse(s.replace(/\'/g,'"'))}catch(e){o[n]=s}return o}),{}):{}}},{key:"init",value:function(o,t){return o||(o=document.body),o instanceof HTMLElement||(o=document.querySelector(o)),o instanceof HTMLElement&&/\bo-cookie-message\b/.test(o.getAttribute("data-o-component"))?new e(o,t):new e(o.querySelector('[data-o-component="o-cookie-message"]'),t)}}],(t=[{key:"createCookieMessage",value:function(){var e=this,o=function(o){return'\n<div class="o-cookie-message__outer">\n\t<div class="o-cookie-message__inner">\n\t\t<div class="o-cookie-message__content">\n\t\t\t\t'.concat(o,'\n\t\t</div>\n\t\t<div class="o-cookie-message__actions">\n\n\t\t\t<div class="o-cookie-message__action">\n\t\t\t\t<a href="').concat(e.options.acceptUrlFallback,'" class="o-cookie-message__button">\n\t\t\t\t\tAccept &amp; continue\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<div class="o-cookie-message__action o-cookie-message__action--secondary">\n\t\t\t\t<a href="').concat(e.options.manageCookiesUrl,'" class="o-cookie-message__link">Manage cookies</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>')},t="o-cookie-message-label",n='\n<div class="o-cookie-message__heading">\n\t<h2 id="'.concat(t,'">Cookies on the FT</h2>\n</div>\n<p id="').concat("o-cookie-message-description",'">\n\tWe use <a href="http://help.ft.com/help/legal-privacy/cookies/" class="o-cookie-message__link o-cookie-message__link--external" target="_blank" rel="noopener">cookies</a> for a number of reasons, such as keeping FT Sites reliable and secure, personalising content and ads, providing social media features and to analyse how our Sites are used.\n</p>'),s=this.cookieMessageElement.firstElementChild,i=this.cookieMessageElement.innerHTML;s&&s.classList.contains("o-cookie-message__outer")||(""===i.trim()?(this.cookieMessageElement.innerHTML=o(n),this.cookieMessageElement.setAttribute("role","dialog"),this.cookieMessageElement.setAttribute("aria-labelledby",t),this.cookieMessageElement.setAttribute("aria-describedby","o-cookie-message-description")):this.cookieMessageElement.innerHTML=o(i))}},{key:"updateConsent",value:function(){var e=this,o=document.querySelector(".o-cookie-message__button");o&&o.addEventListener("click",(function(o){return o.preventDefault(),e.dispatchEvent("oCookieMessage.act"),e.removeCookieMessage(),fetch(e.options.acceptUrl,{method:"get",credentials:"include"})}))}},{key:"shouldShowCookieMessage",value:function(){return!document.cookie.includes("".concat(this.options.consentCookieName))}},{key:"showCookieMessage",value:function(){this.cookieMessageElement.classList.add("o-cookie-message","o-cookie-message--active"),this.options.theme&&this.cookieMessageElement.classList.add("o-cookie-message--".concat(this.options.theme)),this.dispatchEvent("oCookieMessage.view"),this.updateConsent()}},{key:"removeCookieMessage",value:function(){this.dispatchEvent("oCookieMessage.close");try{this.cookieMessageElement.parentNode.removeChild(this.cookieMessageElement)}catch(e){}}},{key:"dispatchEvent",value:function(e){var o=new CustomEvent(e,{bubbles:!0});this.cookieMessageElement.dispatchEvent(o)}}])&&n(o.prototype,t),s&&n(o,s),e}();document.addEventListener("o.DOMContentLoaded",(function e(){s.init(),document.removeEventListener("o.DOMContentLoaded",e)}));o.default=s}}]);
//# sourceMappingURL=o-cookie-message.a1ee846e40bc.bundle.js.map