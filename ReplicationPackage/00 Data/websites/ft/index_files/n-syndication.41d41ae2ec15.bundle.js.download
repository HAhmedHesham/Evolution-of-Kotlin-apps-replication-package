(window.webpackJsonp=window.webpackJsonp||[]).push([["n-syndication"],{"163e87d1":function(t,n,e){"use strict";e.r(n),e.d(n,"CONFIG",(function(){return a})),e.d(n,"init",(function(){return Pt})),e.d(n,"initRepublishing",(function(){})),e.d(n,"checkIfUserIsSyndicationCustomer",(function(){})),e.d(n,"getUserData",(function(){}));var a={};e.r(a),e.d(a,"MESSAGES",(function(){return x})),e.d(a,"SYNDICATION_ACCESS",(function(){return G})),e.d(a,"TRACKING",(function(){return D}));var o=e("f26e1e46"),r=e.n(o),i=e("33cab54f");function c(t,n,e,a,o,r,i){try{var c=t[r](i),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(a,o)}function s(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){c(r,a,o,i,s,"next",t)}function s(t){c(r,a,o,i,s,"throw",t)}i(void 0)}))}}function d(){return l.apply(this,arguments)}function l(){return(l=s(r.a.mark((function t(){var n,e,a,o,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/syndication/user-status",e={credentials:"include"},t.prev=2,t.next=5,fetch(n,e);case 5:if(!(a=t.sent).ok){t.next=10;break}return t.abrupt("return",a.json());case 10:t.t0=a.status,t.next=401===t.t0?13:503===t.t0?14:21;break;case 13:return t.abrupt("return",null);case 14:if(!a.headers.get("content-type").includes("application/json")){t.next=21;break}return t.next=17,a.json();case 17:return(o=t.sent).migrated=!0,o.MAINTENANCE_MODE=!0,t.abrupt("return",o);case 21:return t.next=23,a.text();case 23:throw c=t.sent,new Error("Next ".concat(n,' responded with "').concat(c,'" (').concat(a.status,")"));case 25:t.next=30;break;case 27:t.prev=27,t.t1=t.catch(2),Object(i.broadcast)("oErrors.log",{error:t.t1,info:{component:"next-syndication-redux"}});case 30:case"end":return t.stop()}}),t,null,[[2,27]])})))).apply(this,arguments)}function u(t){do{if(t===document.documentElement)return null;var n=t.getAttribute("data-content-id");if(!n&&!t.classList.contains("o-header__subnav-item")&&!(n=t.getAttribute("data-id"))){var e=t;"A"!==t.tagName.toUpperCase()&&(e=e.querySelector("a")),e&&e.hasAttribute("href")&&(n=f(n=e.getAttribute("href").split("/").pop()))&&t.setAttribute("data-content-id",n)}return n&&(n=f(n),t.setAttribute("data-content-id",n)),n||null}while(t=t.parentElement);return null}function f(t){return t.indexOf("#")>-1&&(t=t.substring(0,t.indexOf("#"))),t.indexOf("?")>-1&&(t=t.substring(0,t.indexOf("?"))),t}function p(t,n){return t.prepend?t.prepend(n):t.childNodes.length?t.insertBefore(n,t.childNodes[0]):t.appendChild(n),t}function h(t){var n=document.createDocumentFragment(),e=document.createElement("div");return e.insertAdjacentHTML("afterbegin",t),Array.from(e.children).reverse().forEach((function(t){return p(n,t)})),n}function m(t,n){return String(t).replace(/\{\{([^\}]+)\}\}/gim,(function(t,e){return e in n?n[e]:""}))}function y(t,n,e,a,o,r,i){try{var c=t[r](i),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(a,o)}function g(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){y(r,a,o,i,c,"next",t)}function c(t){y(r,a,o,i,c,"throw",t)}i(void 0)}))}}var v,b=[],_={};function w(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v=t,addEventListener("nSyndication.fetch",(function(t){return C(t.detail.response)}),!0),"[object Array]"===Object.prototype.toString.call(n)&&C(n)}function S(){return(S=g(r.a.mark((function t(n){var e,a,o,c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==v.MAINTENANCE_MODE){t.next=4;break}return e=n.map((function(t){return{id:t,canBeSyndicated:"maintenance",messageCode:"MSG_5100"}})),Object(i.broadcast)("nSyndication.fetch",{request:n,response:e}),t.abrupt("return",Promise.resolve(e));case 4:if(a={credentials:"include",headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify(n)},!n.length){t.next=25;break}return t.prev=6,t.next=9,fetch("/syndication/resolve".concat(location.search),a);case 9:if((o=t.sent).ok){t.next=15;break}return t.next=13,o.text();case 13:throw c=t.sent,new Error('Next /syndication/resolve responded with "'.concat(c,'" (').concat(o.status,")"));case 15:return t.next=17,o.json();case 17:return s=t.sent,Object(i.broadcast)("nSyndication.fetch",{request:n,response:s}),t.abrupt("return",s);case 22:t.prev=22,t.t0=t.catch(6),Object(i.broadcast)("oErrors.log",{error:t.t0,info:{component:"next-syndication-redux"}});case 25:case"end":return t.stop()}}),t,null,[[6,22]])})))).apply(this,arguments)}function A(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",e="".concat(t,"__").concat(n);return _[e]||_[t]||b.find((function(e){return k(e,t,n)}))||null}(u(t),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-content-id";do{if(t===document.documentElement)return null;var e=t.getAttribute(n);if(e)return e}while(t=t.parentElement);return null}(t,"data-iso-lang")||"en")}function E(t){return b.filter((function(n){return n.id===t}))}function k(t,n,e){var a="".concat(n,"__").concat(e);return t.__id__===a||t.id===n&&t.lang===e}function C(t){var n=[];return t.forEach((function(t){var e=t.id,a=t.lang||"en",o=t.__id__="".concat(e,"__").concat(a);if(o in _){n.push(t);var r=b.findIndex((function(t){return k(t,e,a)}));r>-1&&(b[r]=t)}n.includes(t)||b.push(t),_[o]=t})),Object(i.broadcast)("nSyndication.dataChanged",{existing:n,items:b}),{DATA_STORE:b,DATA_STORE_MAP:_,EXISTING:n}}var M,T='<p>Please ensure you have considered your <a data-trackable="contractual-rights" href="/republishing/contract">contractual rights</a> before republishing.</p>',O='<p class="syndication-message__content--warning">This content will incur additional charges to republish. Please contact us for further details (<a href="mailto:syndication@ft.com">syndication@ft.com</a> or +44 (0)207 873 4816).</p>',x={EMBARGO:"<p>Please note that this content is embargoed until {{embargoPeriod}} after its original publication date of {{publishedDateDisplay}}.</p>",ENGLISH:'<p class="syndication-message__content--warning">Please note that this content is only available to download in English.</p>',MSG_2000:"{{embargoMessage}}{{translationMessage}}".concat(T),MSG_2100:"<p>This content has already been downloaded and therefore will not count towards your republishing limit.</p>\n{{embargoMessage}}\n".concat(T),MSG_2200:'<p>Please contact us for details of republishing rights for this content (<a href="mailto:syndication@ft.com">syndication@ft.com</a> or +44 (0)207 873 4816).</p>',MSG_2300:"{{embargoMessage}}".concat(O),MSG_2320:"{{embargoMessage}}".concat(O,"\n").concat(T),MSG_2340:"<p>This content has already been downloaded and therefore will not count towards your republishing limit.</p>\n{{embargoMessage}}\n".concat(O,"\n").concat(T),MSG_4000:"<p>This content is not available for republishing.</p>",MSG_4050:"<p>Sorry, this content is no longer available.</p>",MSG_4100:"<p>You have reached your download limit for {{type}}s. Please contact your Account Manager to increase your limit.</p>",MSG_4200:"<p>Your contract does not allow {{type}}s to be downloaded. Please contact your Account Manager to change this.</p>",MSG_4250:"<p>You do not have rights to republish this type of content. Please contact your Account Manager for further details.</p>",MSG_4300:"<p>Report contains multiple articles. Please view each article individually for republishing rights.</p>",MSG_5000:"<p>Sorry, an error has occurred. Please try signing out and then in again. If error persists, please contact your Account Manager.</p>",MSG_5100:"<p>The Republishing Service is currently undergoing maintenance. Please try again later.</p>",GRAPHICS:"Please note that for copyright reasons not all the graphics in this article are available for republishing so will not be included in the download.",WORD_FORMAT:'Graphics are only available in Word format. Please select Word format (docx) in your  <a data-trackable="contractual-rights" href="/republishing/contract">syndication management tool</a> to download.'},G={STANDARD:"S1",RICH_ARTICLE:"S2"},D={CATEGORY:"syndication",DATA:{context:{app:"Syndication"},system:{product:"Syndication",source:"o-tracking"}},URI:"https://spoor-api.ft.com/px.gif"};function N(t,n){var e=n.MAINTENANCE_MODE,a=n.contributor_content;return t.translationMessage="",t.embargoPeriod&&"number"==typeof t.embargoPeriod&&(t.embargoPeriod="".concat(t.embargoPeriod," day").concat(t.embargoPeriod>1?"s":"")),t.embargoMessage=t.embargoPeriod?m(x.EMBARGO,t):"",Boolean(document.getElementById("ftlabsTranslationContainer"))&&(t.translationMessage=m(x.ENGLISH,t)),!0===e?x.MSG_5100:"package"===t.type?x.MSG_4300:!0===t.notAvailable?x.MSG_4050:"verify"===t.canBeSyndicated&&("en"!==t.lang?x.MSG_4250:x.MSG_2200),m("withContributorPayment"===t.canBeSyndicated&&!0!==a?x.MSG_2300:"withContributorPayment"===t.canBeSyndicated&&!0===t.downloaded?x.MSG_2340:"withContributorPayment"===t.canBeSyndicated?x.MSG_2320:"no"!==t.canBeSyndicated&&t.canBeSyndicated?!0===t.downloaded?x.MSG_2100:0===t.canDownload?"en"!==t.lang?x.MSG_4250:x.MSG_4200:-1===t.canDownload?x.MSG_4100:x.MSG_2000:x.MSG_4000,t)}function P(t,n){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hasGraphics,e=void 0!==n&&n,a=t.canAllGraphicsBeSyndicated,o=void 0!==a&&a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.download_format,c=void 0===i?"plain":i,s=r.allowed,d=void 0===s?{}:s,l=[];d.rich_articles&&(e&&!o&&l.push({messageType:"neutral",message:x.GRAPHICS}),e&&"docx"!==c&&l.push({messageType:"error",message:x.WORD_FORMAT}));return l}(t,n).map(I).join("")}function I(t){var n=t.messageType,e=void 0===n?"neutral":n,a=t.message,o=void 0===a?"":a;return'<div class="o-message o-message--alert o-message--'.concat(e,' n-syndication-rich-content-message" data-o-component="o-message">\n\t\t<div class="o-message__container">\n\t\t\t<div class="o-message__content">\n\t\t\t\t<p class="o-message__content-main">\n\t\t\t\t\t<span class="o-message__content-highlight n-syndication-rich-message_content-highlight">').concat(o,"</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>")}function j(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],a=!0,o=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(e.push(i.value),!n||e.length!==n);a=!0);}catch(t){o=!0,r=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw r}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return R(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return R(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}function L(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var B,q=(L(M={},"a.card__concept-article-link",{fn:"closest",slc:".card__concept-article"}),L(M,"a.topic-card__concept-article-link",{fn:"closest",slc:".topic-card__concept-article"}),L(M,"a.package__content-item",{fn:"querySelector",slc:".package__title"}),L(M,".story__link",{fn:"closest",slc:'article[data-trackable="story"]'}),L(M,"a",{fn:"closest",slc:".o-teaser__heading"}),L(M,".o-teaser",{fn:"querySelector",slc:".o-teaser__heading"}),L(M,".stream-item",{fn:"querySelector",slc:".card-openable__headline"}),L(M,'article[class="article"]',{fn:"querySelector",slc:".o-topper__headline"}),L(M,"article.article--brand",{fn:"querySelector",slc:".o-topper__headline"}),L(M,"article.article-grid",{fn:"querySelector",slc:".o-topper__headline",up:1}),L(M,"div.hero",{fn:"querySelector",slc:".hero__heading"}),L(M,"main.video",{fn:"querySelector",slc:".video__title"}),L(M,"li.o-teaser__related-item",{}),L(M,".js-teaser-headline",{}),M);function Y(t){return B=t,addEventListener("asyncContentLoaded",(function(){return U()}),!0),addEventListener("nSyndication.dataChanged",(function(){return function(t){Array.isArray(t)||(t=H());var n=Array.from(t).reduce((function(t,n){var e=n.getAttribute("data-content-id");return Array.isArray(t[e])||(t[e]=[]),t[e].push(n),t}),{});b.forEach((function(t){return function(t,n){if(!n.length)return;n.forEach((function(n){return function(t,n){var e=function(t){var n="FORM"!==t.tagName.toUpperCase()&&"BUTTON"!==t.tagName.toUpperCase();if(t!==document.documentElement&&n)for(var e=Object.entries(q),a=0,o=e;a<o.length;a++){var r=j(o[a],2),i=r[0],c=r[1];if(t.matches(i)){if("number"==typeof c.up&&c.up==c.up)for(var s=-1;++s<c.up;)t=t.parentElement;if(!c.fn&&!c.slc)return t;var d=t[c.fn](c.slc);if(d)return d}}return null}(n);null!==e&&"true"!==e.getAttribute("data-syndicated")&&(e.classList.add("n-syndication"),e.classList.add("n-syndication-state-".concat(t.canBeSyndicated)),p(e,function(t){var n=t.messageCode,e=t.lang,a=void 0===e?"en":e,o=t.id,r=t.type,i="n-syndication-icon-state-".concat(n).toLowerCase();return h('<button\n\t\t\t\t\t\t\tclass="n-syndication-icon '.concat(i,'"\n\t\t\t\t\t\t\tdata-content-id="').concat(o,'"\n\t\t\t\t\t\t\tdata-iso-lang="').concat(a,'"\n\t\t\t\t\t\t\tdata-content-type="').concat(r,'"\n\t\t\t\t\t\t\tdata-syndicated="true"\n\t\t\t\t\t\t\tdata-trackable="syn-icon"\n\t\t\t\t\t\t\tdata-message-code="').concat(n,'"\n\t\t\t\t\t\t\ttype="button">\n\t\t\t\t\t\t\t<span class="o-normalise-visually-hidden">').concat(N(t,B),"</span>\n\t\t\t\t\t\t</button>"))}(t)),e.setAttribute("data-content-type",t.type),e.setAttribute("data-syndicated","true"));e!==n&&(n.setAttribute("data-content-type",t.type),n.setAttribute("data-syndicated","true"))}(t,n)}))}(t,n[t.id])})),Object(i.broadcast)("nSyndication.iconified")}()}),!0),U()}function H(){return Object(i.$$)(["[data-content-id]","[data-id]","a.card__concept-article-link","a.topic-card__concept-article-link","a.package__content-item",".story__link"].join(", "))}function U(){var t,n,e=H();return function(t){return S.apply(this,arguments)}((t=e,n=Array.from(t).reduce((function(t,n){var e=u(n);return e&&(t[e]=e),t}),{}),Object.keys(n)))}var W,$,F,z,J,K=e("922a4198"),X=e("a6e351b8"),Q=e.n(X),V=new Q.a("local","syndication"),Z=location.pathname.includes("/download"),tt=location.pathname.includes("/save");function nt(t){addEventListener("click",et,!0),addEventListener("keyup",at,!0),addEventListener("resize",ct,!0),K.default.listenTo("resize"),J=t}function et(t){var n=A(t.target),e=!0,a={};if(a.category=D.CATEGORY,a.contractID=J.contract_id,a.product=D.CATEGORY,a.url=location.href,a.action=t.target.getAttribute("data-trackable"),n&&(a.lang=n.lang,a.message=n.messageCode,a.article_id=n.id,a.syndication_content=n.type),t.target.matches('[data-content-id][data-syndicated="true"].n-syndication-icon'))st(t);else if(t.target.matches('[data-content-id][data-syndicated="true"].download-button'))t.preventDefault(),st(t);else if(t.target.matches('.n-syndication-action[data-action="save"]'))!function(t){E(A(t.target).id).forEach((function(t){return t.saved=!0}))}(t),it(),st(t),rt();else if(t.target.matches('.n-syndication-action[data-action="download"]'))!function(t){var n=A(t.target);E(n.id).forEach((function(t){t.downloaded=!0,t.messageCode="MSG_2100"})),Object(i.broadcast)("nSyndication.downloadItem",{item:n})}(t),rt();else if(dt()){var o=t.target.getAttribute("data-action");(t.target.matches(".n-syndication-modal-shadow")||o&&"close"===o)&&(t.preventDefault(),rt())}else e=!1;!e||Object(i.broadcast)("oTracking.event",a)}function at(t){switch(t.key){case"Escape":it();var n={};n.category=D.CATEGORY,n.contractID=J.contract_id,n.product=D.CATEGORY,n.url=location.href,n.action="close-syndication-modal",Object(i.broadcast)("oTracking.event",n);break;case" ":case"Enter":t.target.matches('[data-content-id][data-syndicated="true"].n-syndication-icon')&&st(t)}}function ot(t){var n,e,a=function(t){return[!0===J.MAINTENANCE_MODE,"package"===t.type,!0===t.notAvailable,"verify"===t.canBeSyndicated,"withContributorPayment"===t.canBeSyndicated&&!0!==J.contributor_content,"no"===t.canBeSyndicated,!t.canBeSyndicated,t.canDownload<1].includes(!0)}(t),o=function(t){return[!0===t.saved,!0===J.MAINTENANCE_MODE,"package"===t.type,!0!==t.notAvailable&&"no"===t.canBeSyndicated,!0!==t.notAvailable&&!t.canBeSyndicated].includes(!0)}(t),r=a?"#":function(t,n){var e="".concat(location.port?"":"https://dl.syndication.ft.com","/syndication/download/").concat(t).concat(z);n.lang&&(e+=(e.includes("?")?"&":"?")+"lang=".concat(n.lang));return e}(t.id,t),i=a?"Download unavailable":"Download",c=o?"#":function(t,n){var e="/syndication/save/".concat(t).concat(z);n.lang&&(e+=(e.includes("?")?"&":"?")+"lang=".concat(n.lang));return e}(t.id,t),s=Z?"save-for-later":"save-for-later-downloads-page",d=!0===J.MAINTENANCE_MODE?"":t.title;return e=!0===t.saved?"Already saved":o?"Save unavailable":"Save for later",Z?n="redownload":tt||(n="download-items"),h('<div class="n-syndication-modal-shadow"></div>\n\t\t\t\t\t\t\t<div class="n-syndication-modal n-syndication-modal-'.concat(t.type,'" role="dialog" aria-labelledby="\'Download:  ').concat(d,'" tabindex="0">\n\t\t\t\t\t\t\t\t<header class="n-syndication-modal-heading">\n\t\t\t\t\t\t\t\t\t<a class="n-syndication-modal-close" data-action="close" \'data-trackable="close-syndication-modal" role="button" href="#" aria-label="Close" title="Close" tabindex="0"></a>\n\t\t\t\t\t\t\t\t\t<span role="heading" class="n-syndication-modal-title">').concat(d,'</span>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t<section class=" n-syndication-modal-content">\n\t\t\t\t\t\t\t\t\t').concat(t.wordCount?'<span class="n-syndication-modal-word-count">Word count: '.concat(t.wordCount,"</span>"):"",'\n\t\t\t\t\t\t\t\t\t<div class="n-syndication-modal-message">\n\t\t\t\t\t\t\t\t\t').concat(N(t,J),"\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t").concat(P(t,J),'\n\t\t\t\t\t\t\t\t\t<div class="n-syndication-actions" data-content-id="').concat(t.id,'" data-iso-lang="').concat(t.lang,'">\n\t\t\t\t\t\t\t\t\t\t<a class="n-syndication-action" data-action="save" ').concat(o?"disabled":"",' data-trackable="').concat(s,'" href="').concat(c,'">').concat(e,'</a>\n\t\t\t\t\t\t\t\t\t\t<a class="n-syndication-action n-syndication-action-primary" data-action="download" ').concat(a?"disabled":""," ").concat(n?'data-trackable="'.concat(n,'"'):"",' href="').concat(r,'">').concat(i,"</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t</div>"))}function rt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=setTimeout((function(){clearTimeout(n),n=null,it()}),t)}function it(){dt()&&($.remove(),F.remove(),W=null,$=null,F=null)}function ct(){if(dt()){var t=document.documentElement,n=t.clientWidth/2-$.clientWidth/2,e=Math.max(t.clientHeight/3-$.clientHeight/2,100);$.style.left="".concat(n,"px"),$.style.top="".concat(e,"px")}}function st(t){dt()&&it(),function(t){do{if("A"===t.tagName.toUpperCase())return!0}while(t=t.parentElement);return!1}(t.target.parentElement)&&t.preventDefault(),V.get("download_format").then((function(n){z=n&&Date.now()-n.time<=3e5?"?format=".concat(n.format):"",W=ot(A(t.target)),$=W.lastElementChild||W.lastChild,F=W.firstElementChild||W.firstChild,document.body.appendChild(W),ct()}))}function dt(){return!(!$||!document.body.contains($))}function lt(t){var n=document.createElement("a");n.classList.add("o-header__nav-link"),n.classList.add("n-syndication-republishing"),n.setAttribute("data-trackable","Republishing"),n.setAttribute("href","/republishing/contract"),n.textContent="Republishing",n.addEventListener("click",(function(n){Object(i.broadcast)("oTracking.event",{category:"syndication",action:"Republishing",contractID:t.contract_id,product:"syndication",referrer:location.href,url:n.target.href||n.target.getAttribute("href")})}));var e=document.createElement("li");return e.classList.add("o-header__nav-item"),e.setAttribute("data-trackable","syndication"),e.appendChild(n),e}function ut(t){!function(t){var n=Object(i.$)("#o-header-nav-desktop");if(n){var e=n.querySelector(".o-header__container");if(e){var a=e.querySelector('[data-trackable="user-nav"]');a||((a=document.createElement("ul")).classList.add("o-header__nav-list"),a.classList.add("o-header__nav-list--right"),a.setAttribute("data-trackable","user-nav"),e.appendChild(a));var o=lt(t);a.appendChild(o)}}}(t),function(t){var n=Object(i.$)("#o-header-drawer");if(n){var e=n.querySelector('[data-trackable="Portfolio"]');if(e){var a=lt(t);e.parentElement.insertAdjacentElement("afterend",a)}}}(t)}var ft=e("8b8c7872");function pt(t,n,e,a,o,r,i){try{var c=t[r](i),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(a,o)}function ht(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){pt(r,a,o,i,c,"next",t)}function c(t){pt(r,a,o,i,c,"throw",t)}i(void 0)}))}}function mt(){return yt.apply(this,arguments)}function yt(){return(yt=ht(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ft.products)();case 2:if(!(n=t.sent)||!n.products){t.next=5;break}return t.abrupt("return",n.products.split(",").filter((function(t){return t===G.STANDARD||t===G.RICH_ARTICLE})));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var gt,vt,bt,_t,wt,St=new Q.a("local","syndication");function At(t,n){addEventListener("click",kt,!0),addEventListener("keyup",Ct,!0),addEventListener("resize",Ot,!0),K.default.listenTo("resize"),_t=t,wt=n}function Et(t){var n=new Date(Date.now()),e=new Date(t)-n,a=Math.ceil(e/864e5);return a>=0?a:-1}function kt(t){var n=A(t.target),e=!0,a={};if(a.category=D.CATEGORY,a.contractID=_t.contract_id,a.product=D.CATEGORY,a.url=location.href,n&&(a.lang=n.lang,a.message=n.messageCode,a.article_id=n.id,a.syndication_content=n.type),t.target.matches('[data-content-id][data-syndicated="true"].n-syndication-icon'))xt(t);else if(t.target.matches('[data-content-id][data-syndicated="true"].download-button'))t.preventDefault(),xt(t);else if(t.target.matches('.n-syndication-action[data-action="save"]'))Tt();else if(Gt()){var o=t.target.getAttribute("data-action");(t.target.matches(".n-syndication-modal-shadow")||o&&"maintenance-modal-close"===o)&&(t.preventDefault(),Tt())}else e=!1;!e||Object(i.broadcast)("oTracking.event",a)}function Ct(t){switch(t.key){case"Escape":Mt();var n={};n.category=D.CATEGORY,n.contractID=_t.contract_id,n.product=D.CATEGORY,n.url=location.href,n.action="close-syndication-modal",Object(i.broadcast)("oTracking.event",n);break;case" ":case"Enter":t.target.matches('[data-content-id][data-syndicated="true"].n-syndication-icon')&&xt(t)}}function Mt(){Gt()&&(vt.remove(),bt.remove(),gt=null,vt=null,bt=null)}function Tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=setTimeout((function(){clearTimeout(n),n=null,Mt()}),t)}function Ot(){if(Gt()){var t=document.documentElement,n=t.clientWidth/2-vt.clientWidth/2,e=Math.max(t.clientHeight/3-vt.clientHeight/2,100);vt.style.left="".concat(n,"px"),vt.style.top="".concat(e,"px")}}function xt(t){Gt()&&Mt(),function(t){do{if("A"===t.tagName.toUpperCase())return!0}while(t=t.parentElement);return!1}(t.target.parentElement)&&t.preventDefault(),St.get("download_format").then((function(){var n,e;n=A(t.target),e=!0===_t.MAINTENANCE_MODE?"":n.title,gt=h('<div class="n-syndication-modal-shadow"></div>\n\t\t\t\t\t\t\t<div class="n-syndication-modal n-syndication-modal-'.concat(n.type,'" role="dialog" aria-labelledby="\'Download:  ').concat(e,'" tabindex="0">\n\t\t\t\t\t\t\t\t<header class="n-syndication-modal-heading">\n\t\t\t\t\t\t\t\t<span class="o-icons-icon o-icons-icon--warning-alt demo-icon n-syndication-maintenance-icon"></span>\n\t\t\t\t\t\t\t\t\t<a class="n-syndication-modal-close" data-action="close" \'data-trackable="close-syndication-modal" role="button" href="#" aria-label="Close" title="Close" tabindex="0"></a>\n\t\t\t\t\t\t\t\t\t<span role="heading" class="n-syndication-maintenance-modal-title" >Maintenance work is scheduled in ').concat(wt,' days on Oct 6, 2021</span>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t<section class=" n-syndication-modal-content">\n\t\t\t\t\t\t\t\t<div class="n-syndication-maintenance-modal-word-count">\n\t\t\t\t\t\t\t\t\t',"<span>10:30 - 14:30 BST (British Summer Time)</span>"," <br>\n\t\t\t\t\t\t\t\t\t","<span>5:30 - 9:30 EDT (Eastern Daylight Time)</span>",'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="n-syndication-maintenance-modal-message">\n\t\t\t\t\t\t\t\t\tYou will not be able to use the Syndication tool during this time.\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="n-syndication-maintenance-modal-lower-message">\n\t\t\t\t\t\t\t\t\tIf you require articles during the maintenance period, we will be able to provide them if you email\n\t\t\t\t\t\t\t\t\t<u><a href = "mailto: syndication@ft.com" style=" color: black" target="_blank">syndication@ft.com</a></u>\n\t\t\t\t\t\t\t\t\twith your requirement.\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="n-syndication-actions" data-content-id="').concat(n.id,'" data-iso-lang="').concat(n.lang,'">\n\t\t\t\t\t\t\t\t\t<button data-action="maintenance-modal-close" class="close-button-maintenance">\n\t\t\t\t\t\t\t\t\t<a><span data-action="maintenance-modal-close" class="close-message-maintenance">Thanks, I understand</span></a>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t</div>')),vt=gt.lastElementChild||gt.lastChild,bt=gt.firstElementChild||gt.firstChild,document.body.appendChild(gt),Ot()}))}function Gt(){return!(!vt||!document.body.contains(vt))}function Dt(t,n,e,a,o,r,i){try{var c=t[r](i),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(a,o)}function Nt(t){return function(){var n=this,e=arguments;return new Promise((function(a,o){var r=t.apply(n,e);function i(t){Dt(r,a,o,i,c,"next",t)}function c(t){Dt(r,a,o,i,c,"throw",t)}i(void 0)}))}}function Pt(t){return It.apply(this,arguments)}function It(){return(It=Nt(r.a.mark((function t(n){var e,a,o,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.get("syndication")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,mt();case 4:if((e=t.sent).length&&e.includes(G.STANDARD)){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,d();case 9:if(a=t.sent,!(!a||!0!==a.migrated)){t.next=13;break}return t.abrupt("return");case 13:if(ut(a),o=a.allowed||{},!(!0===o.spanish_content||!0===o.spanish_weekend)||!0===o.ft_com){t.next=18;break}return t.abrupt("return");case 18:w(a),Y(a),nt(a),(c=Et("October 5, 2021 10:30:00"))>=0&&At(a,c),Object(i.$$)(".video__actions__download").forEach((function(t){return t.parentNode.removeChild(t)}));case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=n-syndication.41d41ae2ec15.bundle.js.map