(window.webpackJsonp=window.webpackJsonp||[]).push([["o-date"],{"35e4b704":function(e,t,n){"use strict";n.r(t);var a=n("fa4420dc"),o=n.n(a);function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,u=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,r=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw r}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d;function l(e){console.warn('The o-date method "'.concat(e,'" is deprecated. Use the "ft-date-format" package instead or contact the Origami team for help: https://github.com/Financial-Times/ft-date-format'))}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t||console.warn("To initialise all o-date elements on the page use the `init` method. Passing no arguments to the constructor is deprecated."),!t||t instanceof HTMLElement||console.warn("Using the constructor to initialise one or more o-date elements with a query selector is deprecated. Pass a single o-date HTMLElement to initialise or use the `init` method."),t?t instanceof HTMLElement||(t=document.querySelector(t)):t=document.body,"o-date"===t.getAttribute("data-o-component")?this.el=t:this.el=t.querySelector('[data-o-component~="o-date"]'),this.el&&(document.body.addEventListener("update",this),this.update(),this.el.setAttribute("data-o-date-js","")),this.el&&!d&&(d=setInterval((function(){document.body.dispatchEvent(new CustomEvent("update"))}),6e4))}var t,n,a;return t=e,a=[{key:"init",value:function(t){if(t||(t=document.body),t instanceof HTMLElement||(t=document.querySelector(t)),/\bo-date\b/.test(t.getAttribute("data-o-component")))return new e(t);var n=t.querySelectorAll('[data-o-component~="o-date"]');return[].map.call(n,(function(t){return new e(t)}))}},{key:"toDate",value:function(){return l("toDate"),o.a.toDate.apply(o.a,arguments)}},{key:"format",value:function(){return l("format"),o.a.format.apply(o.a,arguments)}},{key:"getSecondsBetween",value:function(){return l("getSecondsBetween"),o.a.getSecondsBetween.apply(o.a,arguments)}},{key:"ftTime",value:function(){return l("ftTime"),o.a.ftTime.apply(o.a,arguments)}},{key:"isNearFuture",value:function(){return l("isNearFuture"),o.a.isNearFuture.apply(o.a,arguments)}},{key:"isFarFuture",value:function(){return l("isFarFuture"),o.a.isFarFuture.apply(o.a,arguments)}},{key:"isToday",value:function(){return l("isToday"),o.a.isToday.apply(o.a,arguments)}},{key:"isYesterday",value:function(){return l("isYesterday"),o.a.isYesterday.apply(o.a,arguments)}},{key:"timeAgo",value:function(){return l("timeAgo"),o.a.timeAgo.apply(o.a,arguments)}},{key:"asTodayOrYesterdayOrNothing",value:function(){return l("asTodayOrYesterdayOrNothing"),o.a.asTodayOrYesterdayOrNothing.apply(o.a,arguments)}},{key:"timeAgoNoSeconds",value:function(){return l("timeAgoNoSeconds"),o.a.timeAgoNoSeconds.apply(o.a,arguments)}}],(n=[{key:"handleEvent",value:function(e){"update"===e.type&&this.update()}},{key:"update",value:function(){var e=this.el,t=e.getAttribute("datetime"),n=t?o.a.toDate(t):null;if(n||""!==this.el.textContent||(n=new Date),n){var a,i=e.querySelectorAll(".o-date__printer,[data-o-date-printer]"),u=r(i=i.length?i:[e]);try{for(u.s();!(a=u.n()).done;){var d=a.value;this._renderDateFor(d,n)}}catch(e){u.e(e)}finally{u.f()}e.textContent?(e.setAttribute("title",o.a.format(n,"datetime")),e.removeAttribute("aria-hidden")):e.setAttribute("aria-hidden",!0)}}},{key:"destroy",value:function(){document.body.removeEventListener("update",this),this.el=null}},{key:"_renderDateFor",value:function(e,t){var n,a,r=e.getAttribute("data-o-date-format")||this.el.getAttribute("data-o-date-format");"today-or-yesterday-or-nothing"===r?n=o.a.asTodayOrYesterdayOrNothing(t):"date-only"===r?n=o.a.format(t,"date"):"time-ago-limit-4-hours"===r?n=o.a.timeAgo(t,{limit:4*o.a.inSeconds.hour}):"time-ago-limit-24-hours"===r?n=o.a.timeAgo(t,{limit:24*o.a.inSeconds.hour}):"time-ago-abbreviated"===r?(n=o.a.timeAgo(t,{abbreviated:!0}),a=o.a.timeAgo(t)):"time-ago-abbreviated-limit-4-hours"===r?(n=o.a.timeAgo(t,{abbreviated:!0,limit:4*o.a.inSeconds.hour}),a=o.a.timeAgo(t,{limit:4*o.a.inSeconds.hour})):n="time-ago-no-seconds"===r?o.a.timeAgoNoSeconds(t):null!==r?o.a.format(t,r):o.a.ftTime(t),1===e.childNodes.length&&e.firstChild&&3===e.firstChild.nodeType?e.firstChild.nodeValue=n:e.innerHTML=n,n?e.setAttribute("aria-label",a||n):e.removeAttribute("aria-label")}}])&&u(t.prototype,n),a&&u(t,a),e}();document.addEventListener("o.DOMContentLoaded",(function e(){s.init(),document.removeEventListener("o.DOMContentLoaded",e)}));t.default=s}}]);
//# sourceMappingURL=o-date.89e7b7d3b160.bundle.js.map