(window["jsonp-common-entrypoints"]=window["jsonp-common-entrypoints"]||[]).push([["auto/bootstrap/category-nav/v2/mobile/nav"],{"0IbO":function(t,e,a){"use strict";a.d(e,"a",(function(){return _}));var n=a("BIVT");var i=a.n(n);const o="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend transitionend webkitTransitionEnd MSTransitionEnd otransitionend",s="animation webkitAnimation mozAnimation MSAnimation oanimation transition webkitTransition MSTransition otransition",r=function(){false;return s.split(" ").some((t=>Object.prototype.hasOwnProperty.call(document.body.style,t)))};let c=true;const l=navigator.userAgent;const h=l.match(/Samsung Galaxy S6/i);const d=l.match(/Chrome\/([0-9]{2})/i);h&&d&&parseInt(d[1])<56&&(c=false);const u=function(t){t.stopPropagation();return true};function _(t,e,{onBeforeTransitionEnd:a=u,keepClass:n=false,baseAnimationClass:s="animated"}={}){const l=i.a.Deferred();if(!r()||!c)return l.resolve();const h=function(i){if(a(i)){t.removeClass(s).off(o,h);n||t.removeClass(e);l.resolve()}};t.addClass(s).addClass(e).on(o,h);return l.promise()}},Sc5Q:function(t,e,a){"use strict";var n=a("BIVT");var i=a.n(n);var o=a("V9r9");const s="data-aria-hidden-by-contain-focus";const r=()=>{i()(document).off(".a11yContainFocus")};const c=()=>{i()(`[${s}]`).removeAttr(`${"aria-hidden"+" "}${s}`)};const l=t=>{let e=[];if(t){e=t.siblings().toArray();const a=t.parent();const n=a.prop("tagName");n&&"body"!==n.toLowerCase()&&(e=e.concat(l(a)))}return e};const h="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex]:not([disabled]), *[contenteditable]";const d=t=>{const e=l(t);for(let a=0;a<e.length;a++){const t=e[a];if(t&&!t.getAttribute("aria-hidden")){t.setAttribute("aria-hidden","true");t.setAttribute(s,"true")}}};const u=t=>{const e=t instanceof jQuery?t:i()(t);d(e);r();if(!e.length)return;i()(document).on("keydown.a11yContainFocus",(t=>{if(t.keyCode===o["a"].TAB){const a=document.activeElement?i()(document.activeElement):null;const n=e.find(h).filter(":not(:hidden)");const o=a?n.index(a):-1;if(t.shiftKey&&o<=0){const e=n.get(n.length-1);e.focus();t.preventDefault()}if(!t.shiftKey&&(o===n.length-1||o<0)){n.first().trigger("focus");t.preventDefault()}}}))};const _=(t,e)=>{if(t&&e){const a=t instanceof jQuery?t:i()(t);const n=document.activeElement?i()(document.activeElement):null;const o=a.find(h).filter(":not(:hidden)");const s=n?o.index(n):-1;if(e.shiftKey&&0===s)return true;if(!e.shiftKey&&s===o.length-1)return true}return false};const v=(t,e)=>{const a=t instanceof jQuery?t:i()(t);const n=a.find(h).filter(":not(:hidden)");const o=n.not(e);const s=o.filter('[role="tab"]');0===n.length?a.trigger("focus"):1===n.length||0===o.length?n.first().trigger("focus"):o.first().is(s)?s.filter('[aria-selected="true"]').trigger("focus"):o.first().trigger("focus")};const E=t=>{const e=t instanceof jQuery?t:i()(t);return e.find(h).filter(":not(:hidden)")};const N=()=>{r();c()};e["a"]={FOCUSABLE_ELEMENTS:h,containFocusInElement:u,isLastFocusableItem:_,getFocusableElementsInContainer:E,setFocusToFirstFocusableElement:v,removeContainFocus:N}},Tou5:function(t,e,a){"use strict";var n=a("BIVT");var i=a.n(n);var o=a("V9r9");e["a"]={setMenubarKeyboardNavigation(t){function e(e){const a=e.attr("id");t.attr("aria-activedescendant",a);e.trigger("focus")}if("menubar"!==t.attr("role"))throw new Error(`${t} must have a role set to "menubar".`);const a=t.find('[role="menuitem"]').filter(":not(:disabled)").filter(":not(:hidden)");t.off("keydown.a11yMenubarFocus");t.on("keydown.a11yMenubarFocus",(t=>{if(t.keyCode===o["a"].RIGHT||t.keyCode===o["a"].LEFT){t.preventDefault();const n=i()(document.activeElement);const s=a.index(n);if(t.keyCode===o["a"].LEFT){if(0===s){e(a.eq(a.length-1));return}e(a.eq(s-1))}if(t.keyCode===o["a"].RIGHT){if(s===a.length-1){e(a.first());return}e(a.eq(s+1))}}if(t.keyCode===o["a"].ENTER||t.keyCode===o["a"].SPACE||t.keyCode===o["a"].DOWN){t.preventDefault();i()(t.target).trigger("menubar-item-press")}}))}}},ilZA:function(t,e,a){"use strict";const n=function(t,e){let a;let n;let i;let o;let s=0;const r=function(){s=new Date(Date.now());i=null;o=t.apply(a,n)};return function(...c){const l=new Date(Date.now());const h=e-(l.valueOf()-s.valueOf());a=this;n=c;if(h<=0){null!==i&&clearTimeout(i);i=null;s=l;o=t.apply(a,n)}else i||(i=setTimeout(r,h));return o}};e["a"]=n},yvtx:function(t,e,a){"use strict";a.r(e);var n=a("BIVT");var i=a.n(n);var o=a("Tou5");var s=a("Sc5Q");var r=a("V9r9");var c=a("E1kl");var l=a("PggL");var h=a("XkxG");var d=a("0IbO");var u=a("w1yB");var _=a("H3fw");var v=a("zxUc");const E=function(){};const N={MOBILE_CATNAV_WRAPPER:"#mobile-catnav-overlay",TOP_NAV_CATEGORY_CONTAINER:'[data-ui="mobile-top-catnav-container"]',TOP_NAV_CATEGORY_LINK:'[data-ui="mobile-top-nav-category-link"]',SUB_NAV_CATEGORY_CONTAINER:'[data-ui="mobile-sub-catnav-container"]',SUB_NAV_CATEGORY_LINK:'[data-ui="mobile-sub-category-link"]',TER_NAV_CATEGORY_CONTAINER:'[data-ui="mobile-tertiary-catnav-container"]',TER_NAV_CATEGORY_LINK:'[data-ui="mobile-tertiary-category-link"]',ONSALE_LINK:'[data-ui="mobile-catnav-onsale-link"]',MOBILE_CATNAV_BACK_BUTTON:'[data-ui="mobile-catnav-back-btn"]',MOBILE_CATNAV_MENU:"#mobile-catnav-menu",TOP_NAV_TITLE:"#mobile-catnav-header-title",SUB_NAV_TITLE:"#mobile-sub-catnav-header-title",TER_NAV_TITLE:"#mobile-tertiary-catnav-header-title",MODAL_CONTAINER:"#etsy-modal-container",OVERLAY_MASK:"[data-overlay-mask]",OVERLAY_CONTENT_WRAPPER:"[data-overlay-content-wrapper]",GNAV:"#gnav-header-inner",OVERLAY_INNER:'[data-ui="mobile-cat-nav"]',HEADER:'[data-ui="mobile-catnav-header"]',SCROLL_WRAPPER:'[data-ui="mobile-catnav-scroll-wrapper"]',LAZY_IMAGES:"[data-mobile-cat-nav-lazy-image] noscript",MOBILE_TOP_NAV_PROMO:'[data-ui="mobile-top-nav-promo-link"]',MOBILE_SUB_NAV_PROMO:'[data-ui="mobile-sub-nav-promo-link"]',GIFT_GUIDE:"[data-mobile-gift-guide]",CYBER_SALE:"[data-mobile-cyber-sale]",COLLAGE_BUTTONS:".wt-btn",MOBILE_CATNAV_CLOSE_BUTTON:"#category-nav-close-button"};const A="gifting_catnav_flyout_js";const T={DISPLAY_NONE:"wt-display-none",OVERLAY_MASK:"mobile-catnav-overlay-mask",ANIMATIONS:{SLIDE_FROM_LEFT:"wt-animated--slide-from-left",BACK_BUTTON_ENTER:"catnav-animated-drift-left-in",BACK_BUTTON_LEAVE:"catnav-animated-drift-right-out",TITLE_ENTER:"catnav-animated-drift-right-in",TITLE_LEAVE:"catnav-animated-drift-left-out",SUB_NAV_IN:"wt-animated--slide-from-right"}};const f={TRANSITION_END:"transitionend"};const m={MOUSE_LEAVE_TIMEOUT:400,MOUSE_ENTER_TIMEOUT:350,MOUSE_ENTER_DROPDOWN_DELAY:200};const O=640;E.prototype={init(t){var e;this.$context=t;this.$mobileCatnavMenu=i()(N.MOBILE_CATNAV_MENU);this.$topNavTitle=i()(N.TOP_NAV_TITLE);this.$subNavTitle=i()(N.SUB_NAV_TITLE);this.$terNavTitle=i()(N.TER_NAV_TITLE);this.$topNavCategoryList=this.$context.find(N.TOP_NAV_CATEGORY_LIST);this.$topNavCategoryLinks=this.$context.find(N.TOP_NAV_CATEGORY_LINK);this.$subNavLinks=this.$context.find(N.SUB_NAV_CATEGORY_LINK);this.$backButton=this.$context.find(N.MOBILE_CATNAV_BACK_BUTTON);this.$searchResults=i()(".gnav-search-inner").find("[data-id='search-suggestions']");this.$overlay=i()(N.MOBILE_CATNAV_WRAPPER);this.$overlayInner=this.$overlay.find(N.OVERLAY_INNER);this.$gnav=i()(N.GNAV);this.$header=this.$context.find(N.HEADER);this.browse_title=this.$header.find("[data-categories-translation]").data("categories-translation");this.$scrollWrapper=this.$context.find(N.SCROLL_WRAPPER);this.$topNavTitle.html(this.browse_title);this.didLoadLazyImages=false;this.$lazyImages=this.$overlayInner.find(N.LAZY_IMAGES);if(null!==(e=this.$overlay[0])&&void 0!==e&&e.querySelector("[data-overlay-modal]")){const t=u["a"].getBoolean("relocate_cat_nav",false)?{customTrigger:true}:{};this.collageOverlay=new h["a"](this.$overlay[0],t)}this.$overlayContainer=i()(N.MODAL_CONTAINER);this.$overlayMask=this.$overlayContainer.find(N.OVERLAY_MASK);this.$overlayContentWrapper=this.$overlayContainer.find(N.OVERLAY_CONTENT_WRAPPER);this.bindEvents()},bindEvents(){this.listenForCategoryNavOpenFromSearchDropdown();this.captureTransitionEnd();this.$context.on("click",N.TOP_NAV_CATEGORY_LINK,i.a.proxy(this.onMouseClickInNavItem,this)).on("keypress",N.TOP_NAV_CATEGORY_LINK,i.a.proxy(this.onKeyPressInNavItem,this)).on("click",N.SUB_NAV_CATEGORY_LINK,i.a.proxy(this.onMouseClickInNavItem,this)).on("keypress",N.SUB_NAV_CATEGORY_LINK,i.a.proxy(this.onKeyPressInNavItem,this)).on("click",N.MOBILE_CATNAV_BACK_BUTTON,i.a.proxy(this.onMouseClickBack,this)).on("click",N.ONSALE_LINK,(()=>{_["default"].logEvent({event_name:"mobile_nav_onsale_click"})})).on("touchstart",N.MOBILE_TOP_NAV_PROMO,(t=>{const e=i()(t.currentTarget).data("eventName");_["default"].logEvent({event_name:"mobile_top_nav_promo_click",promo_name:e})})).on("touchstart",N.MOBILE_SUB_NAV_PROMO,(t=>{const e=i()(t.currentTarget).data("nodeId");_["default"].logEvent({event_name:"mobile_sub_nav_promo_click",node_id:e})})).on("touchstart",N.CYBER_SALE,(()=>{_["default"].logEvent({event_name:"catnav_mobile_sale_clicked"})})).on("touchstart",N.GIFT_GUIDE,(()=>{_["default"].logEvent({event_name:"catnav_mobile_gifts_clicked"})}));u["a"].getBoolean("relocate_cat_nav",false)&&this.$context.on("click",N.MOBILE_CATNAV_CLOSE_BUTTON,(()=>{const t=i()("#global-enhancements-search-query");i()("html, body").animate({scrollTop:t});t.focus()}));this.$overlay.on(l["a"].EVENTS.BEFORE_OPEN,i.a.proxy(this.onBeforeOpen,this));this.$overlay.on(l["a"].EVENTS.CLOSE,i.a.proxy(this.onClose,this));this.$overlay.on(l["a"].EVENTS.BEFORE_OPEN,i.a.proxy(this.onOpen,this))},listenForCategoryNavOpenFromSearchDropdown(){document.addEventListener("categoryNavOpenFromSearchDropdown",(()=>{this.openCatNavOverlay()}))},openCatNavOverlay(){this.collageOverlay.open()},captureTransitionEnd(){this.$context.find(N.COLLAGE_BUTTONS).each(((t,e)=>{e.addEventListener(f.TRANSITION_END,(t=>{t.stopPropagation()}),true)}))},onMouseClickInNavItem(t){_["default"].logEvent({event_name:"mobile_category_nav_click"});const e=i()(t.currentTarget);const a=e.aria("controls");const n=e.data("name");this.show(`#${a} ul`);if(this.$backButton.hasClass(T.DISPLAY_NONE)){this.show(N.MOBILE_CATNAV_BACK_BUTTON);Object(d["a"])(this.$backButton,T.ANIMATIONS.BACK_BUTTON_ENTER)}if(e.hasClass("top-nav-item")){this.$backButton.data("subnav-id",a);this.$backButton.data("subnav-name",n);this.show(`#${a}-ep`);this.hide(N.TOP_NAV_CATEGORY_CONTAINER);this.hide(N.MOBILE_CATNAV_MENU);this.$subNavTitle.html(n);this.showTitle(this.$subNavTitle,this.$topNavTitle,false,true)}else if(e.hasClass("subnav-item")&&!e.data().isViewAllCategoryLink){this.$backButton.data("ternav-id",a);this.hide(N.SUB_NAV_CATEGORY_CONTAINER);this.$terNavTitle.html(n);this.showTitle(this.$terNavTitle,this.$subNavTitle,false,true)}e.attr("aria-expanded",true);Object(d["a"])(i()(`#${a}`),T.ANIMATIONS.SUB_NAV_IN).then(i.a.proxy((()=>{s["a"].setFocusToFirstFocusableElement(`#${a} ul`)}),this))},onKeyPressInNavItem(t){13!=t.which&&32!=t.which||this.onMouseClickInNavItem(t)},onMouseClickBack(t){const e=this.$backButton.data("ternav-id");const a=this.$backButton.data("subnav-id");const n=this.$backButton.data("subnav-name");if("0"!=e){i()(`[aria-controls="${e}"]`).attr("aria-expanded",false);this.hide(`#${e} ul`);this.show(`#${a} ul`);this.showTitle(this.$subNavTitle,this.$terNavTitle,true,true);this.$backButton.data("subnav_name","");this.$backButton.data("ternav-id","0");Object(d["a"])(i()(`#${a}`),T.ANIMATIONS.SLIDE_FROM_LEFT).then(i.a.proxy((()=>{s["a"].setFocusToFirstFocusableElement(`#${a}`)}),this))}else{i()(`[aria-controls="${a}"]`).attr("aria-expanded",false);this.hide(`#${a} ul`);this.showTopLevel(true);Object(d["a"])(i()(".mobile-topnav"),T.ANIMATIONS.SLIDE_FROM_LEFT).then(i.a.proxy((()=>{s["a"].setFocusToFirstFocusableElement(".mobile-topnav")}),this))}},onBeforeOpen(){this.$overlayMask.addClass(T.OVERLAY_MASK);this.$overlayContentWrapper.addClass(T.OVERLAY_MASK);this.setOverlayHeight();if(!this.didLoadLazyImages){this.loadLazyImages();this.didLoadLazyImages=true}},onOpen(){s["a"].setFocusToFirstFocusableElement(".mobile-topnav");_["default"].logEvent({event_name:"mobile_category_nav_open",gift_guide_flyout_enabled:u["a"].getBoolean(A,false)})},setOverlayHeight(){const t=this.$gnav.outerHeight();const e=t+this.$header.outerHeight();i()(window).width()<O?this.$overlayInner.css({top:`${t}px`,height:`calc(100vh - ${t}px)`}):this.$overlayInner.css({top:"0",height:"100vh"})},loadLazyImages(){this.$lazyImages.each((function(){const t=i()(this);t.replaceWith(t.text())}))},onClose(){const t=this.$backButton.data("ternav-id");const e=this.$backButton.data("subnav-id");this.hide(`#${t} ul`);this.hide(this.$terNavTitle);this.hide(`#${e} ul`);this.showTopLevel(false);this.$overlayMask.removeClass(T.OVERLAY_MASK);this.$overlayContentWrapper.removeClass(T.OVERLAY_MASK);_["default"].logEvent({event_name:"mobile_category_nav_close"})},showTopLevel(t){this.show(N.MOBILE_CATNAV_MENU);this.show("[data-ui=mobile-top-catnav-container]");this.showTitle(this.$topNavTitle,this.$subNavTitle,true,t);this.$backButton.data("subnav-id","0");this.$backButton.hasClass(T.DISPLAY_NONE)||Object(d["a"])(this.$backButton,T.ANIMATIONS.BACK_BUTTON_LEAVE).then(i.a.proxy((function(){this.hide(N.MOBILE_CATNAV_BACK_BUTTON)}),this))},showTitle(t,e,a,n){const o=a?"BACK_BUTTON":"TITLE";t.removeClass(T.DISPLAY_NONE);if(n){t.stop();e.stop();Object(d["a"])(t,T.ANIMATIONS[`${o}_ENTER`]);this.$showing=t;Object(d["a"])(e,T.ANIMATIONS[`${o}_LEAVE`]).then(i.a.proxy((function(){this.$showing.is(e)||e.addClass(T.DISPLAY_NONE)}),this))}else e.addClass(T.DISPLAY_NONE)},show(t){this.$context.find(t).removeClass(T.DISPLAY_NONE).attr("aria-hidden","false");return this},hide(t){this.$context.find(t).addClass(T.DISPLAY_NONE).attr("aria-hidden","true");return this},focus(t){this.$context.find(`${t} ${N.MENUITEM}`).trigger("focus");return this},onTabAway(t){this.clearLeaveNavTimeout().clearMouseEnterNavItem().clearActiveNavItems().hide(N.SUB_NAV)},setAriaActiveDescendant(t,e){this.$context.find(t).parent("ul").attr("aria-activedescendant",e);return this},setMenuKeyboardNavigation(t){c["a"].setMenuKeyboardNavigation(this.$context.find(t));return this},setA11yInitialStateMenubar(){const t=this.$navCategoryLinks.find(N.MENUITEM);t.attr("tabindex","-1");const e=t.first();e.attr("tabindex","0");this.$topNavCategoryList.attr("aria-activedescendant",e.attr("id"));return this},bindA11yEvents(){if(!this.$topNavCategoryList||this.$topNavCategoryList.length<1)return this;o["a"].setMenubarKeyboardNavigation(this.$topNavCategoryList);this.$context.on("keydown.catnav",i.a.proxy((function(t){this.$searchResults.hide();t.keyCode===r["a"].TAB&&this.onTabAway()}),this));this.$topNavCategoryList.on("menubar-item-press",N.MENUITEM,i.a.proxy((function(t){const e=i()(t.target);"true"===e.attr("aria-haspopup")?this.onKeyActivateTopNavItem(e.parent()):e.attr("href")&&"#"!==e.attr("href")&&(window.location=e.attr("href"))}),this));return this},bindA11yEventsSideNav(){this.$sideNavCategoryList.on("menu-item-open-submenu menu-item-activate",N.MENUITEM,i.a.proxy((function(t){const e=i()(t.target);if("true"===e.attr("aria-haspopup")){const t=e.parent("li");const a=t.data("node-id");this.makeSideNavItemActive(t).getFirstFocusableChildForSelector(N.TERTIARY_NAV+this.getDataAttributeString(a)).trigger("focus")}else"menu-item-activate"===t.type&&e.attr("href")&&"#"!==e.attr("href")&&(window.location=e.attr("href"))}),this));this.$sideNavCategoryList.on("menu-item-leave",N.MENUITEM,i.a.proxy((function(t){const e=i()(t.target);const a=e.parents("ul").data("node-id");this.hide(N.SUB_NAV).clearActiveNavItems().on("focus",N.TOP_NAV_CATEGORY_LINK+this.getDataAttributeString(a))}),this));return this},bindA11yEventsTertiaryNav(){this.$tertiaryNavs.on("menu-item-leave",N.MENUITEM,i.a.proxy((function(t){const e=i()(t.target);const a=e.parents(N.TERTIARY_NAV);const n=a.data("node-id");const o=a.attr("data-has-side-nav");if("false"===o){this.hide(N.SUB_NAV).clearActiveNavItems().on("focus",N.TOP_NAV_CATEGORY_LINK+this.getDataAttributeString(n));return this}this.on("focus",N.SIDE_NAV_CATEGORY_LINK+this.getDataAttributeString(n))}),this));this.$tertiaryNavs.on("menu-item-activate",N.MENUITEM,i.a.proxy((t=>{window.location=i()(t.target).attr("href")}),this));return this}};var g=E;var b=a("/wG7");var y=a("ilZA");var p=a("oVvz");const I=function(t){let e=false,a;return function(){if(e)return a;e=true;a=t.apply(this,arguments);return a}};var C=I;const L=639;const $=900;const B="gifting_catnav_flyout_js";function M(){const t={KEY:"catnav-mobile",NAME:"CategoryNav_V2_Mobile_ApiSpec_CategoryNav"};const e={MOBILE_CAT_NAV:"#mobile-catnav-overlay"};const a=new g;const n=i()(e.MOBILE_CAT_NAV);const o=u["a"].getString("mott_version");const s=u["a"].getBoolean("catnav_show_sales",false);const r=u["a"].getString("catnav_gift_guide","control");const c=u["a"].getBoolean(B,false);const l=u["a"].getBoolean("show_signin",false);const h=u["a"].getString("from_page","");let d=0;if(1===n.length){d=n.children().length;if(0===d){const e={mott_version:o,show_sales:s,catnav_gift_guide:r,gifting_catnav_flyout_js:c,show_signin:l,locale:Object(p["a"])(),from_page:h};b["a"].fetchOne(t.KEY,t.NAME,e,"GET").done((e=>{if(e.output&&e.output[t.KEY]){n.html(e.output[t.KEY]);a.init(n)}}))}else 1===d&&a.init(n)}}const S=C(M);function w(){if(i()(window).width()<=$){i()(window).off("resize.catnav-mobile");S();i()(window).width()>L&&_["default"].logEvent({event_name:"md-breakpoint-catnav"})}}if(i()(window).width()>$)i()(window).on("resize.catnav-mobile",Object(y["a"])(w,1e3));else{i()(M);i()(window).width()>L&&_["default"].logEvent({event_name:"md-breakpoint-catnav"})}}}]);