define("@ali/lzdmod-promotion-popup-image-link-entrance/m/index",["@ali/mui-zepto/zepto","@ali/mui-zepto/event","@ali/lzdmod-mtop/index"],(function(e,t,o){o.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=5)}([function(t,o){t.exports=e("@ali/mui-zepto/zepto")},,,,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=c(o(0));o(6);var i=c(o(7)),u=c(o(8)),a=c(o(10));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,o){return o?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function p(e){return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function s(){}function d(e,t){if(!t)return e&&e.then?e.then(s):Promise.resolve()}var f=function(){function e(t){var o=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.close=p((function(){return o.contentDom.hide(),l()})),this.$el=(0,r.default)(t),this.initView(),!this.isHideMode){if(window&&window.navigator&&window.navigator.userAgent){var n=window.navigator.userAgent.toLocaleLowerCase().match(/(gcash|tngkit|momo|truemoney|zalo|paylah)/gi);if(n&&n[0])return}this.bindEvents(),u.default.setupMessageChannelForIframe()}}return n(e,[{key:"initView",value:function(){try{var e=this;if(e.isHideMode)return void(0,r.default)(".promotion-popup-image-link-entrance").css("display","none");if(window&&window.navigator&&window.navigator.userAgent){var t=window.navigator.userAgent.toLocaleLowerCase().match(/(gcash|tngkit|momo|truemoney|zalo|paylah)/gi);if(t&&t[0])return void(0,r.default)(".promotion-popup-image-link-entrance").css("display","none")}var o=e.isBigMode(),n=e.poplayer,a=n.imageUrl,c=n.imageUrlForNoBudget;return e.popupImageDom=o?(0,r.default)(".promotion-big-popup-img"):(0,r.default)(".promotion-popup-img"),l(!o&&u.default.checkBudget(e.configData),(function(t){e.dev&&console.log("haveBudget",t),e.popupImageDom.prop("src",t?a:c);var n=i.default.containerStyleForConfig(e.configData,o,e.inIframe);e.dev&&console.log("@contentStyleString",n),e.contentDom=o?(0,r.default)(".promotion-big-popup-content"):(0,r.default)(".promotion-popup-content"),e.isBigMode()?e.checkShow()&&e.contentDom.css(n):e.contentDom.css(n);try{u.default.logExposure({budget:t?"yes":"no"},e.configData)}catch(o){e.dev&&u.default.logExposure({budget:t?"yes":"no"},e.configData),console.log("WVPopLayer.display error",o)}if(e.inIframe){var l=i.default.containerStyleForConfig(e.configData,o,!1);u.default.pushMessage({style:l,action:"updateIframeStyle"}),(0,r.default)(".promotion-popup-content").css("opacity",.9),(0,r.default)(".promotion-popup-img").on("load",(function(){setTimeout((function(){(0,r.default)(".promotion-popup-content").css("opacity",1)}),500)}))}}),o)}catch(e){return Promise.reject(e)}}},{key:"isBigMode",value:function(){return"big"===this.poplayer.mode}},{key:"checkShow",value:function(){var e=!0,t=this.poplayer,o=t.periodDays,n=t.showTimes,r=window.localStorage;if(!o||!n)return!0;if(r){var i=null,u=void 0;try{u=JSON.parse(r.getItem("PROMOTION_POPUP_INFO"))}catch(e){u=null}if(u){var a=24*o*60*60*1e3;(new Date).getTime()-u.startTime<a&&u.times<n?(u.times+=1,i=u,e=!0):e=!1}else i={startTime:(new Date).getTime(),times:1},e=!0;i&&r.setItem("PROMOTION_POPUP_INFO",JSON.stringify(i))}return e}},{key:"bindEvents",value:function(){this.bindEvents_click(),this.bindEvents_close()}},{key:"bindEvents_click",value:function(){var e=this;this.popupImageDom.bind("click",p((function(){return d(u.default.clickImage(e.configData))})))}},{key:"bindEvents_close",value:function(){var e=this;(this.isBigMode()?(0,r.default)(".promotion-big-popup-close"):(0,r.default)(".promotion-popup-close")).bind("click",p((function(){return function(e){if(e&&e.then)return e.then(s)}(function(e,t){try{var o=e()}catch(e){return t(e)}return o&&o.then?o.then(void 0,t):o}((function(){return d(e.close())}),(function(e){console.error("close error",e)})))})))}},{key:"configData",get:function(){return a.default.combine(window.__PAGE_CONFIG__.poplayer,window.__PAGE_CONFIG__.poplayerDev)}},{key:"poplayerDev",get:function(){return this.configData.poplayerDev||{devMode:"Open",checkBudgetResult:"Have budget"}}},{key:"dev",get:function(){return this.configData.dev}},{key:"poplayer",get:function(){return this.configData.poplayer}},{key:"inIframe",get:function(){try{return window.self!==window.top}catch(e){return!0}}},{key:"isHideMode",get:function(){return"hide"===this.poplayer.mode}}]),e}();t.default=function(e){return new f(e)},e.exports=t.default},function(t,o){t.exports=e("@ali/mui-zepto/event")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={containerStyleForConfig:function(e,t,o){var n=e.poplayer,r=n.imageWidth,i=n.imageHeight,u=n.positionType,a=n.horizontal,c=n.vertical,l=function(e){return Number(e)/2+"px"},p={display:"block"};if(!t){if(p.width=l(r),p.height=l(i),o)return p.top="0",p.left="0",p;if(/^\w+-center$/i.test(u)){var s=u.match(/^\w+/i)[0].toLowerCase();["top","bottom"].includes(s)?(p[s]=l(c),p.left="50vw",p["margin-left"]=-Number(r)/4+Number(a)/2+"px"):["left","right"].includes(s)&&(p[s]=l(a),p.top="50vh",p["margin-top"]=-Number(i)/4+Number(c)/2+"px")}else"center"===u?(p.top="50vh",p.left="50vw",p["margin-top"]=-Number(i)/4+Number(c)/2+"px",p["margin-left"]=-Number(r)/4+Number(a)/2+"px"):(/top/i.test(u)&&(p.top=l(c)),/right/i.test(u)&&(p.right=l(a)),/bottom/i.test(u)&&(p.bottom=l(c)),/left/i.test(u)&&(p.left=l(a)))}return p},convertStyleMapToString:function(e){return Object.keys(e).map((function(t){return t+":"+e[t]})).join(";")}};t.default=n,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},i=o(9),u=(n=i)&&n.__esModule?n:{default:n};function a(e,t,o){return o?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function c(e,t){try{var o=e()}catch(e){return t(e)}return o&&o.then?o.then(void 0,t):o}var l=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i=r({page:window.location.pathname,venture:window.g_config.regionID.toLowerCase()||"id"},o),u=[];for(var a in i)u.push(a+"="+i[a]);var c=u.join("&"),l=window.goldlog_queue||(window.goldlog_queue=[]),p={action:"goldlog.record",arguments:[e,t,c]};n.dev&&console.log("event",p),l.push(p)};function p(){}var s=function(){try{return window.self!==window.top}catch(e){return!0}};function d(e,t){if(!t)return e&&e.then?e.then(p):Promise.resolve()}var f={logExposure:function(e,t){var o=t.poplayer.goldlog_logkey_exposure;o&&l(o,"EXP",e,t)},logClick:function(e,t){var o=t.poplayer.goldlog_logkey_click;o&&l(o,"CLK",e,t)},checkBudget:function(e){try{if(e.dev)switch(e.poplayerDev.checkBudgetResult){case"Have budget":return Promise.resolve(!0);case"No budget":return Promise.resolve(!1);default:return}return c((function(){return a(u.default.request({api:"mtop.lazada.usergrowth.newuser.award.checkBudget",v:"1.0",data:{bizId:"LZD_NEW_USER",source:"msite_to_app"},ecode:0,type:"GET",dataType:"json",timeout:2e4}),(function(e){var t=e.data.result;return"string"==typeof t?"true"===t.toLowerCase():!!t}))}),(function(e){return console.error("checkBudget error",e),!1}))}catch(e){return Promise.reject(e)}},clickImage:function(e){try{var t=this,o=(n=function(t){return e.dev&&console.log("navToUrl",t),s()?f.pushMessage({url:t,action:"redirectURL"}):location.href=t,a()},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(e){return Promise.reject(e)}});return function(e){if(e&&e.then)return e.then(p)}(c((function(){var n=e.poplayer,r=n.url,i=n.urlForNoBudget,u=n.mode;return a("big"!==u&&t.checkBudget(e),(function(n){return t.logClick({budget:n?"yes":"no"},e),function(e){var t=e();if(t&&t.then)return t.then(p)}((function(){return d(o(n?r:i))}))}),"big"===u)}),(function(e){console.error("click error",e)})))}catch(e){return Promise.reject(e)}var n},setupMessageChannelForIframe:function(){var e=this;if(s()){window.__promotionPopup_messageQueue__=[],window.__promptionPopup_channelReady__=!1;window.addEventListener("message",(function(t){var o=t.data.payload;o&&"PDPReady"===o.action&&(console.log("PDPReady",t),window.__promptionPopup_channelReady__=!0,e.pushMessage())}),!1)}},pushMessage:function(e){e&&window.__promotionPopup_messageQueue__.push(e),console.log("window.__promotionPopup_messageQueue__",window.__promotionPopup_messageQueue__),window.__promptionPopup_channelReady__&&(window.__promotionPopup_messageQueue__.map((function(e){return parent.postMessage({payload:e},"*"),null})),window.__promotionPopup_messageQueue__=[])}};t.default=f,e.exports=t.default},function(t,o){t.exports=e("@ali/lzdmod-mtop/index")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r={poplayer:{url:"http://pre-wormhole.lazada.sg/wow/i/sg/marketing/mkt-msite-for-app?hybrid=1&wh_showError=true",urlForNoBudget:"https://c.lazada.sg/t/c.Y1z7",imageUrl:"https://laz-img-cdn.alicdn.com/tfs/TB1pdJTzAL0gK0jSZFxXXXWHVXa-200-200.png",imageUrlForNoBudget:"https://laz-img-cdn.alicdn.com/tfs/TB1NudPzuT2gK0jSZFvXXXnFXXa-200-200.png",imageWidth:"200",imageHeight:"200",positionType:"Bottom-Right",horizontal:"30",vertical:"124",goldlog_logkey_exposure:"/lzd_member.mSite_Acquisition.Entrypoint_expo",goldlog_logkey_click:"/lzd_member.mSite_Acquisition.Entrypoint_click",openApp_region:window.g_config.regionID.toLowerCase()||"id",openApp_region_custom:""},poplayerDev:{devMode:"Close",checkBudgetResult:"Default"}};t.default={combine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={poplayer:n({},r.poplayer,e),poplayerDev:n({},r.poplayerDev,t)};return o.dev="Open"===o.poplayerDev.devMode,o}},e.exports=t.default}])}));